function runAllSequentially(e,t){var n=-1,i=setTimeout.bind(null,function(){++n===e.length?t():e[n].run(i)});i()}!function(e,t,n,i,r,o){e.GoogleAnalyticsObject=i,e.ga=e.ga||function(){(e.ga.q=e.ga.q||[]).push(arguments)},e.ga.l=+new Date,r=t.createElement(n),o=t.getElementsByTagName(n)[0],r.async=1,r.src="//www.google-analytics.com/analytics.js",o.parentNode.insertBefore(r,o)}(window,document,"script","ga"),ga("create","UA-48530561-3","auto"),ga("send","pageview"),function(e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).adapter=e()}(function(){return function i(r,o,s){function a(t,e){if(!o[t]){if(!r[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(c)return c(t,!0);throw(e=new Error("Cannot find module '"+t+"'")).code="MODULE_NOT_FOUND",e}n=o[t]={exports:{}},r[t][0].call(n.exports,function(e){return a(r[t][1][e]||e)},n,n.exports,i,r,o,s)}return o[t].exports}for(var c="function"==typeof require&&require,e=0;e<s.length;e++)a(s[e]);return a}({1:[function(e,t,n){"use strict";var N=e("sdp");function s(e,t,n,i,r){t=N.writeRtpDescription(e.kind,t);return t=(t=(t+=N.writeIceParameters(e.iceGatherer.getLocalParameters()))+N.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),"offer"===n?"actpass":r||"active"))+("a=mid:"+e.mid+"\r\n"),e.rtpSender&&e.rtpReceiver?t+="a=sendrecv\r\n":e.rtpSender?t+="a=sendonly\r\n":e.rtpReceiver?t+="a=recvonly\r\n":t+="a=inactive\r\n",e.rtpSender&&(n=e.rtpSender._initialTrackId||e.rtpSender.track.id,e.rtpSender._initialTrackId=n,t=t+"a="+(r="msid:"+(i?i.id:"-")+" "+n+"\r\n")+"a=ssrc:"+e.sendEncodingParameters[0].ssrc+" "+r,e.sendEncodingParameters[0].rtx)&&(t=(t+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" "+r)+"a=ssrc-group:FID "+e.sendEncodingParameters[0].ssrc+" "+e.sendEncodingParameters[0].rtx.ssrc+"\r\n"),t+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" cname:"+N.localCName+"\r\n",e.rtpSender&&e.sendEncodingParameters[0].rtx&&(t+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" cname:"+N.localCName+"\r\n"),t}function k(i,r){function o(e,t){e=parseInt(e,10);for(var n=0;n<t.length;n++)if(t[n].payloadType===e||t[n].preferredPayloadType===e)return t[n]}var s={codecs:[],headerExtensions:[],fecMechanisms:[]};return i.codecs.forEach(function(n){for(var e=0;e<r.codecs.length;e++){var t=r.codecs[e];if(n.name.toLowerCase()===t.name.toLowerCase()&&n.clockRate===t.clockRate&&("rtx"!==n.name.toLowerCase()||!n.parameters||!t.parameters.apt||function(e,t,n,i){e=o(e.parameters.apt,n),n=o(t.parameters.apt,i);return e&&n&&e.name.toLowerCase()===n.name.toLowerCase()}(n,t,i.codecs,r.codecs))){(t=JSON.parse(JSON.stringify(t))).numChannels=Math.min(n.numChannels,t.numChannels),s.codecs.push(t),t.rtcpFeedback=t.rtcpFeedback.filter(function(e){for(var t=0;t<n.rtcpFeedback.length;t++)if(n.rtcpFeedback[t].type===e.type&&n.rtcpFeedback[t].parameter===e.parameter)return!0;return!1});break}}}),i.headerExtensions.forEach(function(e){for(var t=0;t<r.headerExtensions.length;t++){var n=r.headerExtensions[t];if(e.uri===n.uri){s.headerExtensions.push(n);break}}}),s}function o(e,t,n){return-1!=={offer:{setLocalDescription:["stable","have-local-offer"],setRemoteDescription:["stable","have-remote-offer"]},answer:{setLocalDescription:["have-remote-offer","have-local-pranswer"],setRemoteDescription:["have-local-offer","have-remote-pranswer"]}}[t][e].indexOf(n)}function O(e,t){var n=e.getRemoteCandidates().find(function(e){return t.foundation===e.foundation&&t.ip===e.ip&&t.port===e.port&&t.priority===e.priority&&t.protocol===e.protocol&&t.type===e.type});return n||e.addRemoteCandidate(t),!n}function u(e,t){t=new Error(t);return t.name=e,t.code={NotSupportedError:9,InvalidStateError:11,InvalidAccessError:15,TypeError:void 0,OperationError:void 0}[e],t}t.exports=function(x,I){function A(e,t){t.addTrack(e),t.dispatchEvent(new x.MediaStreamTrackEvent("addtrack",{track:e}))}function r(e,t,n,i){var r=new Event("track");r.track=t,r.receiver=n,r.transceiver={receiver:n},r.streams=i,x.setTimeout(function(){e._dispatchEvent("track",r)})}function i(e){var t,i,r,n=this,o=document.createDocumentFragment();if(["addEventListener","removeEventListener","dispatchEvent"].forEach(function(e){n[e]=o[e].bind(o)}),this.canTrickleIceCandidates=null,this.needNegotiation=!1,this.localStreams=[],this.remoteStreams=[],this._localDescription=null,this._remoteDescription=null,this.signalingState="stable",this.iceConnectionState="new",this.connectionState="new",this.iceGatheringState="new",e=JSON.parse(JSON.stringify(e||{})),this.usingBundle="max-bundle"===e.bundlePolicy,"negotiate"===e.rtcpMuxPolicy)throw u("NotSupportedError","rtcpMuxPolicy 'negotiate' is not supported");switch(e.rtcpMuxPolicy||(e.rtcpMuxPolicy="require"),e.iceTransportPolicy){case"all":case"relay":break;default:e.iceTransportPolicy="all"}switch(e.bundlePolicy){case"balanced":case"max-compat":case"max-bundle":break;default:e.bundlePolicy="balanced"}if(e.iceServers=(t=e.iceServers||[],i=I,r=!1,(t=JSON.parse(JSON.stringify(t))).filter(function(e){var t,n;if(e&&(e.urls||e.url))return n=e.urls||e.url,e.url&&!e.urls&&console.warn("RTCIceServer.url is deprecated! Use urls instead."),n=(n=(t="string"==typeof n)?[n]:n).filter(function(e){return 0!==e.indexOf("turn:")||-1===e.indexOf("transport=udp")||-1!==e.indexOf("turn:[")||r?0===e.indexOf("stun:")&&14393<=i&&-1===e.indexOf("?transport=udp"):r=!0}),delete e.url,e.urls=t?n[0]:n,!!n.length})),this._iceGatherers=[],e.iceCandidatePoolSize)for(var s=e.iceCandidatePoolSize;0<s;s--)this._iceGatherers.push(new x.RTCIceGatherer({iceServers:e.iceServers,gatherPolicy:e.iceTransportPolicy}));else e.iceCandidatePoolSize=0;this._config=e,this.transceivers=[],this._sdpSessionId=N.generateSessionId(),this._sdpSessionVersion=0,this._dtlsRole=void 0,this._isClosed=!1}Object.defineProperty(i.prototype,"localDescription",{configurable:!0,get:function(){return this._localDescription}}),Object.defineProperty(i.prototype,"remoteDescription",{configurable:!0,get:function(){return this._remoteDescription}}),i.prototype.onicecandidate=null,i.prototype.onaddstream=null,i.prototype.ontrack=null,i.prototype.onremovestream=null,i.prototype.onsignalingstatechange=null,i.prototype.oniceconnectionstatechange=null,i.prototype.onconnectionstatechange=null,i.prototype.onicegatheringstatechange=null,i.prototype.onnegotiationneeded=null,i.prototype.ondatachannel=null,i.prototype._dispatchEvent=function(e,t){this._isClosed||(this.dispatchEvent(t),"function"==typeof this["on"+e]&&this["on"+e](t))},i.prototype._emitGatheringStateChange=function(){var e=new Event("icegatheringstatechange");this._dispatchEvent("icegatheringstatechange",e)},i.prototype.getConfiguration=function(){return this._config},i.prototype.getLocalStreams=function(){return this.localStreams},i.prototype.getRemoteStreams=function(){return this.remoteStreams},i.prototype._createTransceiver=function(e,t){var n=0<this.transceivers.length,e={track:null,iceGatherer:null,iceTransport:null,dtlsTransport:null,localCapabilities:null,remoteCapabilities:null,rtpSender:null,rtpReceiver:null,kind:e,mid:null,sendEncodingParameters:null,recvEncodingParameters:null,stream:null,associatedRemoteMediaStreams:[],wantReceive:!0};return this.usingBundle&&n?(e.iceTransport=this.transceivers[0].iceTransport,e.dtlsTransport=this.transceivers[0].dtlsTransport):(n=this._createIceAndDtlsTransports(),e.iceTransport=n.iceTransport,e.dtlsTransport=n.dtlsTransport),t||this.transceivers.push(e),e},i.prototype.addTrack=function(t,e){if(this._isClosed)throw u("InvalidStateError","Attempted to call addTrack on a closed peerconnection.");var n;if(this.transceivers.find(function(e){return e.track===t}))throw u("InvalidAccessError","Track already exists.");for(var i=0;i<this.transceivers.length;i++)this.transceivers[i].track||this.transceivers[i].kind!==t.kind||(n=this.transceivers[i]);return n=n||this._createTransceiver(t.kind),this._maybeFireNegotiationNeeded(),-1===this.localStreams.indexOf(e)&&this.localStreams.push(e),n.track=t,n.stream=e,n.rtpSender=new x.RTCRtpSender(t,n.dtlsTransport),n.rtpSender},i.prototype.addStream=function(t){var i,n=this;15025<=I?t.getTracks().forEach(function(e){n.addTrack(e,t)}):(i=t.clone(),t.getTracks().forEach(function(e,t){var n=i.getTracks()[t];e.addEventListener("enabled",function(e){n.enabled=e.enabled})}),i.getTracks().forEach(function(e){n.addTrack(e,i)}))},i.prototype.removeTrack=function(t){if(this._isClosed)throw u("InvalidStateError","Attempted to call removeTrack on a closed peerconnection.");if(!(t instanceof x.RTCRtpSender))throw new TypeError("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.");var e=this.transceivers.find(function(e){return e.rtpSender===t});if(!e)throw u("InvalidAccessError","Sender was not created by this connection.");var n=e.stream;e.rtpSender.stop(),e.rtpSender=null,e.track=null,e.stream=null,-1===this.transceivers.map(function(e){return e.stream}).indexOf(n)&&-1<this.localStreams.indexOf(n)&&this.localStreams.splice(this.localStreams.indexOf(n),1),this._maybeFireNegotiationNeeded()},i.prototype.removeStream=function(e){var n=this;e.getTracks().forEach(function(t){var e=n.getSenders().find(function(e){return e.track===t});e&&n.removeTrack(e)})},i.prototype.getSenders=function(){return this.transceivers.filter(function(e){return!!e.rtpSender}).map(function(e){return e.rtpSender})},i.prototype.getReceivers=function(){return this.transceivers.filter(function(e){return!!e.rtpReceiver}).map(function(e){return e.rtpReceiver})},i.prototype._createIceGatherer=function(n,e){var i,r=this;return e&&0<n?this.transceivers[0].iceGatherer:this._iceGatherers.length?this._iceGatherers.shift():(i=new x.RTCIceGatherer({iceServers:this._config.iceServers,gatherPolicy:this._config.iceTransportPolicy}),Object.defineProperty(i,"state",{value:"new",writable:!0}),this.transceivers[n].bufferedCandidateEvents=[],this.transceivers[n].bufferCandidates=function(e){var t=!e.candidate||0===Object.keys(e.candidate).length;i.state=t?"completed":"gathering",null!==r.transceivers[n].bufferedCandidateEvents&&r.transceivers[n].bufferedCandidateEvents.push(e)},i.addEventListener("localcandidate",this.transceivers[n].bufferCandidates),i)},i.prototype._gather=function(i,r){var e,o=this,s=this.transceivers[r].iceGatherer;s.onlocalcandidate||(e=this.transceivers[r].bufferedCandidateEvents,this.transceivers[r].bufferedCandidateEvents=null,s.removeEventListener("localcandidate",this.transceivers[r].bufferCandidates),s.onlocalcandidate=function(e){var t,n;o.usingBundle&&0<r||((t=new Event("icecandidate")).candidate={sdpMid:i,sdpMLineIndex:r},(n=!(e=e.candidate)||0===Object.keys(e).length)?"new"!==s.state&&"gathering"!==s.state||(s.state="completed"):("new"===s.state&&(s.state="gathering"),e.component=1,e.ufrag=s.getLocalParameters().usernameFragment,e=N.writeCandidate(e),t.candidate=Object.assign(t.candidate,N.parseCandidate(e)),t.candidate.candidate=e,t.candidate.toJSON=function(){return{candidate:t.candidate.candidate,sdpMid:t.candidate.sdpMid,sdpMLineIndex:t.candidate.sdpMLineIndex,usernameFragment:t.candidate.usernameFragment}}),(e=N.getMediaSections(o._localDescription.sdp))[t.candidate.sdpMLineIndex]+=n?"a=end-of-candidates\r\n":"a="+t.candidate.candidate+"\r\n",o._localDescription.sdp=N.getDescription(o._localDescription.sdp)+e.join(""),e=o.transceivers.every(function(e){return e.iceGatherer&&"completed"===e.iceGatherer.state}),"gathering"!==o.iceGatheringState&&(o.iceGatheringState="gathering",o._emitGatheringStateChange()),n||o._dispatchEvent("icecandidate",t),e&&(o._dispatchEvent("icecandidate",new Event("icecandidate")),o.iceGatheringState="complete",o._emitGatheringStateChange()))},x.setTimeout(function(){e.forEach(function(e){s.onlocalcandidate(e)})},0))},i.prototype._createIceAndDtlsTransports=function(){var e=this,t=new x.RTCIceTransport(null),n=(t.onicestatechange=function(){e._updateIceConnectionState(),e._updateConnectionState()},new x.RTCDtlsTransport(t));return n.ondtlsstatechange=function(){e._updateConnectionState()},n.onerror=function(){Object.defineProperty(n,"state",{value:"failed",writable:!0}),e._updateConnectionState()},{iceTransport:t,dtlsTransport:n}},i.prototype._disposeIceAndDtlsTransports=function(e){var t=this.transceivers[e].iceGatherer,t=(t&&(delete t.onlocalcandidate,delete this.transceivers[e].iceGatherer),this.transceivers[e].iceTransport),t=(t&&(delete t.onicestatechange,delete this.transceivers[e].iceTransport),this.transceivers[e].dtlsTransport);t&&(delete t.ondtlsstatechange,delete t.onerror,delete this.transceivers[e].dtlsTransport)},i.prototype._transceive=function(e,t,n){var i=k(e.localCapabilities,e.remoteCapabilities);t&&e.rtpSender&&(i.encodings=e.sendEncodingParameters,i.rtcp={cname:N.localCName,compound:e.rtcpParameters.compound},e.recvEncodingParameters.length&&(i.rtcp.ssrc=e.recvEncodingParameters[0].ssrc),e.rtpSender.send(i)),n&&e.rtpReceiver&&0<i.codecs.length&&("video"===e.kind&&e.recvEncodingParameters&&I<15019&&e.recvEncodingParameters.forEach(function(e){delete e.rtx}),e.recvEncodingParameters.length?i.encodings=e.recvEncodingParameters:i.encodings=[{}],i.rtcp={compound:e.rtcpParameters.compound},e.rtcpParameters.cname&&(i.rtcp.cname=e.rtcpParameters.cname),e.sendEncodingParameters.length&&(i.rtcp.ssrc=e.sendEncodingParameters[0].ssrc),e.rtpReceiver.receive(i))},i.prototype.setLocalDescription=function(e){var t,l,d,h=this;return-1===["offer","answer"].indexOf(e.type)?Promise.reject(u("TypeError",'Unsupported type "'+e.type+'"')):!o("setLocalDescription",e.type,h.signalingState)||h._isClosed?Promise.reject(u("InvalidStateError","Can not set local "+e.type+" in state "+h.signalingState)):("offer"===e.type?(t=N.splitSections(e.sdp),l=t.shift(),t.forEach(function(e,t){e=N.parseRtpParameters(e);h.transceivers[t].localCapabilities=e}),h.transceivers.forEach(function(e,t){h._gather(e.mid,t)})):"answer"===e.type&&(l=(t=N.splitSections(h._remoteDescription.sdp)).shift(),d=0<N.matchPrefix(l,"a=ice-lite").length,t.forEach(function(e,t){var n,i=h.transceivers[t],r=i.iceGatherer,o=i.iceTransport,s=i.dtlsTransport,a=i.localCapabilities,c=i.remoteCapabilities;N.isRejected(e)&&0===N.matchPrefix(e,"a=bundle-only").length||i.rejected||(n=N.getIceParameters(e,l),e=N.getDtlsParameters(e,l),d&&(e.role="server"),h.usingBundle&&0!==t||(h._gather(i.mid,t),"new"===o.state&&o.start(r,n,d?"controlling":"controlled"),"new"===s.state&&s.start(e)),t=k(a,c),h._transceive(i,0<t.codecs.length,!1))})),h._localDescription={type:e.type,sdp:e.sdp},"offer"===e.type?h._updateSignalingState("have-local-offer"):h._updateSignalingState("stable"),Promise.resolve())},i.prototype.setRemoteDescription=function(C){var P,S,e,E,T,w,t,R=this;return-1===["offer","answer"].indexOf(C.type)?Promise.reject(u("TypeError",'Unsupported type "'+C.type+'"')):!o("setRemoteDescription",C.type,R.signalingState)||R._isClosed?Promise.reject(u("InvalidStateError","Can not set remote "+C.type+" in state "+R.signalingState)):(P={},R.remoteStreams.forEach(function(e){P[e.id]=e}),S=[],e=N.splitSections(C.sdp),E=e.shift(),T=0<N.matchPrefix(E,"a=ice-lite").length,w=0<N.matchPrefix(E,"a=group:BUNDLE ").length,R.usingBundle=w,t=N.matchPrefix(E,"a=ice-options:")[0],R.canTrickleIceCandidates=!!t&&0<=t.substr(14).split(" ").indexOf("trickle"),e.forEach(function(e,t){var n,i,r,o,s,a,c,l,d,h,u,p,f,m=N.splitLines(e),_=N.getKind(e),y=N.isRejected(e)&&0===N.matchPrefix(e,"a=bundle-only").length,m=m[0].substr(2).split(" ")[2],v=N.getDirection(e,E),g=N.parseMsid(e),b=N.getMid(e)||N.generateIdentifier();y||"application"===_&&("DTLS/SCTP"===m||"UDP/DTLS/SCTP"===m)?R.transceivers[t]={mid:b,kind:_,protocol:m,rejected:!0}:(!y&&R.transceivers[t]&&R.transceivers[t].rejected&&(R.transceivers[t]=R._createTransceiver(_,!0)),m=N.parseRtpParameters(e),y||(o=N.getIceParameters(e,E),(s=N.getDtlsParameters(e,E)).role="client"),i=N.parseRtpEncodingParameters(e),a=N.parseRtcpParameters(e),c=0<N.matchPrefix(e,"a=end-of-candidates",E).length,e=N.matchPrefix(e,"a=candidate:").map(function(e){return N.parseCandidate(e)}).filter(function(e){return 1===e.component}),("offer"===C.type||"answer"===C.type)&&!y&&w&&0<t&&R.transceivers[t]&&(R._disposeIceAndDtlsTransports(t),R.transceivers[t].iceGatherer=R.transceivers[0].iceGatherer,R.transceivers[t].iceTransport=R.transceivers[0].iceTransport,R.transceivers[t].dtlsTransport=R.transceivers[0].dtlsTransport,R.transceivers[t].rtpSender&&R.transceivers[t].rtpSender.setTransport(R.transceivers[0].dtlsTransport),R.transceivers[t].rtpReceiver)&&R.transceivers[t].rtpReceiver.setTransport(R.transceivers[0].dtlsTransport),"offer"!==C.type||y?"answer"!==C.type||y||(y=(n=R.transceivers[t]).iceGatherer,p=n.iceTransport,l=n.dtlsTransport,f=n.rtpReceiver,d=n.sendEncodingParameters,r=n.localCapabilities,R.transceivers[t].recvEncodingParameters=i,R.transceivers[t].remoteCapabilities=m,R.transceivers[t].rtcpParameters=a,e.length&&"new"===p.state&&(!T&&!c||w&&0!==t?e.forEach(function(e){O(n.iceTransport,e)}):p.setRemoteCandidates(e)),w&&0!==t||("new"===p.state&&p.start(y,o,"controlling"),"new"===l.state&&l.start(s)),!k(n.localCapabilities,n.remoteCapabilities).codecs.filter(function(e){return"rtx"===e.name.toLowerCase()}).length&&n.sendEncodingParameters[0].rtx&&delete n.sendEncodingParameters[0].rtx,R._transceive(n,"sendrecv"===v||"recvonly"===v,"sendrecv"===v||"sendonly"===v),!f||"sendrecv"!==v&&"sendonly"!==v?delete n.rtpReceiver:(u=f.track,g?(P[g.stream]||(P[g.stream]=new x.MediaStream),A(u,P[g.stream]),S.push([u,f,P[g.stream]])):(P.default||(P.default=new x.MediaStream),A(u,P.default),S.push([u,f,P.default])))):((n=R.transceivers[t]||R._createTransceiver(_)).mid=b,n.iceGatherer||(n.iceGatherer=R._createIceGatherer(t,w)),e.length&&"new"===n.iceTransport.state&&(!c||w&&0!==t?e.forEach(function(e){O(n.iceTransport,e)}):n.iceTransport.setRemoteCandidates(e)),r=x.RTCRtpReceiver.getCapabilities(_),I<15019&&(r.codecs=r.codecs.filter(function(e){return"rtx"!==e.name})),d=n.sendEncodingParameters||[{ssrc:1001*(2*t+2)}],p=!1,"sendrecv"===v||"sendonly"===v?(p=!n.rtpReceiver,f=n.rtpReceiver||new x.RTCRtpReceiver(n.dtlsTransport,_),p&&(u=f.track,(h=g&&"-"===g.stream?h:g?(P[g.stream]||(P[g.stream]=new x.MediaStream,Object.defineProperty(P[g.stream],"id",{get:function(){return g.stream}})),Object.defineProperty(u,"id",{get:function(){return g.track}}),P[g.stream]):(P.default||(P.default=new x.MediaStream),P.default))&&(A(u,h),n.associatedRemoteMediaStreams.push(h)),S.push([u,f,h]))):n.rtpReceiver&&n.rtpReceiver.track&&(n.associatedRemoteMediaStreams.forEach(function(e){var t=e.getTracks().find(function(e){return e.id===n.rtpReceiver.track.id});t&&(t=t,(e=e).removeTrack(t),e.dispatchEvent(new x.MediaStreamTrackEvent("removetrack",{track:t})))}),n.associatedRemoteMediaStreams=[]),n.localCapabilities=r,n.remoteCapabilities=m,n.rtpReceiver=f,n.rtcpParameters=a,n.sendEncodingParameters=d,n.recvEncodingParameters=i,R._transceive(R.transceivers[t],!1,p)))}),void 0===R._dtlsRole&&(R._dtlsRole="offer"===C.type?"active":"passive"),R._remoteDescription={type:C.type,sdp:C.sdp},"offer"===C.type?R._updateSignalingState("have-remote-offer"):R._updateSignalingState("stable"),Object.keys(P).forEach(function(e){var t,i=P[e];i.getTracks().length&&(-1===R.remoteStreams.indexOf(i)&&(R.remoteStreams.push(i),(t=new Event("addstream")).stream=i,x.setTimeout(function(){R._dispatchEvent("addstream",t)})),S.forEach(function(e){var t=e[0],n=e[1];i.id===e[2].id&&r(R,t,n,[i])}))}),S.forEach(function(e){e[2]||r(R,e[0],e[1],[])}),x.setTimeout(function(){R&&R.transceivers&&R.transceivers.forEach(function(e){e.iceTransport&&"new"===e.iceTransport.state&&0<e.iceTransport.getRemoteCandidates().length&&(console.warn("Timeout for addRemoteCandidate. Consider sending an end-of-candidates notification"),e.iceTransport.addRemoteCandidate({}))})},4e3),Promise.resolve())},i.prototype.close=function(){this.transceivers.forEach(function(e){e.iceTransport&&e.iceTransport.stop(),e.dtlsTransport&&e.dtlsTransport.stop(),e.rtpSender&&e.rtpSender.stop(),e.rtpReceiver&&e.rtpReceiver.stop()}),this._isClosed=!0,this._updateSignalingState("closed")},i.prototype._updateSignalingState=function(e){this.signalingState=e;e=new Event("signalingstatechange");this._dispatchEvent("signalingstatechange",e)},i.prototype._maybeFireNegotiationNeeded=function(){var t=this;"stable"===this.signalingState&&!0!==this.needNegotiation&&(this.needNegotiation=!0,x.setTimeout(function(){var e;t.needNegotiation&&(t.needNegotiation=!1,e=new Event("negotiationneeded"),t._dispatchEvent("negotiationneeded",e))},0))},i.prototype._updateIceConnectionState=function(){var e,t={new:0,closed:0,checking:0,connected:0,completed:0,disconnected:0,failed:0};this.transceivers.forEach(function(e){t[e.iceTransport.state]++}),e="new",0<t.failed?e="failed":0<t.checking?e="checking":0<t.disconnected?e="disconnected":0<t.new?e="new":0<t.connected?e="connected":0<t.completed&&(e="completed"),e!==this.iceConnectionState&&(this.iceConnectionState=e,e=new Event("iceconnectionstatechange"),this._dispatchEvent("iceconnectionstatechange",e))},i.prototype._updateConnectionState=function(){var e,t={new:0,closed:0,connecting:0,connected:0,completed:0,disconnected:0,failed:0};this.transceivers.forEach(function(e){t[e.iceTransport.state]++,t[e.dtlsTransport.state]++}),t.connected+=t.completed,e="new",0<t.failed?e="failed":0<t.connecting?e="connecting":0<t.disconnected?e="disconnected":0<t.new?e="new":0<t.connected&&(e="connected"),e!==this.connectionState&&(this.connectionState=e,e=new Event("connectionstatechange"),this._dispatchEvent("connectionstatechange",e))},i.prototype.createOffer=function(){var o=this;if(o._isClosed)return Promise.reject(u("InvalidStateError","Can not call createOffer after close"));var t=o.transceivers.filter(function(e){return"audio"===e.kind}).length,n=o.transceivers.filter(function(e){return"video"===e.kind}).length,e=arguments[0];if(e){if(e.mandatory||e.optional)throw new TypeError("Legacy mandatory/optional constraints not supported.");void 0!==e.offerToReceiveAudio&&(t=!0===e.offerToReceiveAudio?1:!1===e.offerToReceiveAudio?0:e.offerToReceiveAudio),void 0!==e.offerToReceiveVideo&&(n=!0===e.offerToReceiveVideo?1:!1===e.offerToReceiveVideo?0:e.offerToReceiveVideo)}for(o.transceivers.forEach(function(e){"audio"===e.kind?--t<0&&(e.wantReceive=!1):"video"===e.kind&&--n<0&&(e.wantReceive=!1)});0<t||0<n;)0<t&&(o._createTransceiver("audio"),t--),0<n&&(o._createTransceiver("video"),n--);var i=N.writeSessionBoilerplate(o._sdpSessionId,o._sdpSessionVersion++),e=(o.transceivers.forEach(function(e,t){var n=e.track,i=e.kind,r=e.mid||N.generateIdentifier(),r=(e.mid=r,e.iceGatherer||(e.iceGatherer=o._createIceGatherer(t,o.usingBundle)),x.RTCRtpSender.getCapabilities(i)),t=(I<15019&&(r.codecs=r.codecs.filter(function(e){return"rtx"!==e.name})),r.codecs.forEach(function(t){"H264"===t.name&&void 0===t.parameters["level-asymmetry-allowed"]&&(t.parameters["level-asymmetry-allowed"]="1"),e.remoteCapabilities&&e.remoteCapabilities.codecs&&e.remoteCapabilities.codecs.forEach(function(e){t.name.toLowerCase()===e.name.toLowerCase()&&t.clockRate===e.clockRate&&(t.preferredPayloadType=e.payloadType)})}),r.headerExtensions.forEach(function(t){(e.remoteCapabilities&&e.remoteCapabilities.headerExtensions||[]).forEach(function(e){t.uri===e.uri&&(t.id=e.id)})}),e.sendEncodingParameters||[{ssrc:1001*(2*t+1)}]);n&&15019<=I&&"video"===i&&!t[0].rtx&&(t[0].rtx={ssrc:t[0].ssrc+1}),e.wantReceive&&(e.rtpReceiver=new x.RTCRtpReceiver(e.dtlsTransport,i)),e.localCapabilities=r,e.sendEncodingParameters=t}),"max-compat"!==o._config.bundlePolicy&&(i+="a=group:BUNDLE "+o.transceivers.map(function(e){return e.mid}).join(" ")+"\r\n"),i+="a=ice-options:trickle\r\n",o.transceivers.forEach(function(e,t){i=i+s(e,e.localCapabilities,"offer",e.stream,o._dtlsRole)+"a=rtcp-rsize\r\n",!e.iceGatherer||"new"===o.iceGatheringState||0!==t&&o.usingBundle||(e.iceGatherer.getLocalCandidates().forEach(function(e){e.component=1,i+="a="+N.writeCandidate(e)+"\r\n"}),"completed"===e.iceGatherer.state&&(i+="a=end-of-candidates\r\n"))}),new x.RTCSessionDescription({type:"offer",sdp:i}));return Promise.resolve(e)},i.prototype.createAnswer=function(){var i,r,e,o=this;return o._isClosed?Promise.reject(u("InvalidStateError","Can not call createAnswer after close")):"have-remote-offer"!==o.signalingState&&"have-local-pranswer"!==o.signalingState?Promise.reject(u("InvalidStateError","Can not call createAnswer in signalingState "+o.signalingState)):(i=N.writeSessionBoilerplate(o._sdpSessionId,o._sdpSessionVersion++),o.usingBundle&&(i+="a=group:BUNDLE "+o.transceivers.map(function(e){return e.mid}).join(" ")+"\r\n"),i+="a=ice-options:trickle\r\n",r=N.getMediaSections(o._remoteDescription.sdp).length,o.transceivers.forEach(function(e,t){var n;r<t+1||(e.rejected?("application"===e.kind?"DTLS/SCTP"===e.protocol?i+="m=application 0 DTLS/SCTP 5000\r\n":i+="m=application 0 "+e.protocol+" webrtc-datachannel\r\n":"audio"===e.kind?i+="m=audio 0 UDP/TLS/RTP/SAVPF 0\r\na=rtpmap:0 PCMU/8000\r\n":"video"===e.kind&&(i+="m=video 0 UDP/TLS/RTP/SAVPF 120\r\na=rtpmap:120 VP8/90000\r\n"),i+="c=IN IP4 0.0.0.0\r\na=inactive\r\na=mid:"+e.mid+"\r\n"):(e.stream&&("audio"===e.kind?n=e.stream.getAudioTracks()[0]:"video"===e.kind&&(n=e.stream.getVideoTracks()[0]),n)&&15019<=I&&"video"===e.kind&&!e.sendEncodingParameters[0].rtx&&(e.sendEncodingParameters[0].rtx={ssrc:e.sendEncodingParameters[0].ssrc+1}),!(t=k(e.localCapabilities,e.remoteCapabilities)).codecs.filter(function(e){return"rtx"===e.name.toLowerCase()}).length&&e.sendEncodingParameters[0].rtx&&delete e.sendEncodingParameters[0].rtx,i+=s(e,t,"answer",e.stream,o._dtlsRole),e.rtcpParameters&&e.rtcpParameters.reducedSize&&(i+="a=rtcp-rsize\r\n")))}),e=new x.RTCSessionDescription({type:"answer",sdp:i}),Promise.resolve(e))},i.prototype.addIceCandidate=function(a){var c,l=this;return a&&void 0===a.sdpMLineIndex&&!a.sdpMid?Promise.reject(new TypeError("sdpMLineIndex or sdpMid required")):new Promise(function(e,t){if(!l._remoteDescription)return t(u("InvalidStateError","Can not add ICE candidate without a remote description"));if(a&&""!==a.candidate){var n=a.sdpMLineIndex;if(a.sdpMid)for(var i=0;i<l.transceivers.length;i++)if(l.transceivers[i].mid===a.sdpMid){n=i;break}var r=l.transceivers[n];if(!r)return t(u("OperationError","Can not add ICE candidate"));if(r.rejected)return e();var o=0<Object.keys(a.candidate).length?N.parseCandidate(a.candidate):{};if("tcp"===o.protocol&&(0===o.port||9===o.port))return e();if(o.component&&1!==o.component)return e();if((0===n||0<n&&r.iceTransport!==l.transceivers[0].iceTransport)&&!O(r.iceTransport,o))return t(u("OperationError","Can not add ICE candidate"));r=a.candidate.trim();0===r.indexOf("a=")&&(r=r.substr(2)),(c=N.getMediaSections(l._remoteDescription.sdp))[n]+="a="+(o.type?r:"end-of-candidates")+"\r\n",l._remoteDescription.sdp=N.getDescription(l._remoteDescription.sdp)+c.join("")}else for(var s=0;s<l.transceivers.length&&(l.transceivers[s].rejected||(l.transceivers[s].iceTransport.addRemoteCandidate({}),(c=N.getMediaSections(l._remoteDescription.sdp))[s]+="a=end-of-candidates\r\n",l._remoteDescription.sdp=N.getDescription(l._remoteDescription.sdp)+c.join(""),!l.usingBundle));s++);e()})},i.prototype.getStats=function(t){if(t&&t instanceof x.MediaStreamTrack){var n=null;if(this.transceivers.forEach(function(e){e.rtpSender&&e.rtpSender.track===t?n=e.rtpSender:e.rtpReceiver&&e.rtpReceiver.track===t&&(n=e.rtpReceiver)}),n)return n.getStats();throw u("InvalidAccessError","Invalid selector.")}var i=[];return this.transceivers.forEach(function(t){["rtpSender","rtpReceiver","iceGatherer","iceTransport","dtlsTransport"].forEach(function(e){t[e]&&i.push(t[e].getStats())})}),Promise.all(i).then(function(e){var t=new Map;return e.forEach(function(e){e.forEach(function(e){t.set(e.id,e)})}),t})};["RTCRtpSender","RTCRtpReceiver","RTCIceGatherer","RTCIceTransport","RTCDtlsTransport"].forEach(function(e){var t,e=x[e];e&&e.prototype&&e.prototype.getStats&&(t=e.prototype.getStats,e.prototype.getStats=function(){return t.apply(this).then(function(n){var i=new Map;return Object.keys(n).forEach(function(e){var t;n[e].type={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[(t=n[e]).type]||t.type,i.set(e,n[e])}),i})})});var e=["createOffer","createAnswer"];return e.forEach(function(e){var n=i.prototype[e];i.prototype[e]=function(){var t=arguments;return"function"==typeof t[0]||"function"==typeof t[1]?n.apply(this,[arguments[2]]).then(function(e){"function"==typeof t[0]&&t[0].apply(null,[e])},function(e){"function"==typeof t[1]&&t[1].apply(null,[e])}):n.apply(this,arguments)}}),(e=["setLocalDescription","setRemoteDescription","addIceCandidate"]).forEach(function(e){var n=i.prototype[e];i.prototype[e]=function(){var t=arguments;return"function"==typeof t[1]||"function"==typeof t[2]?n.apply(this,arguments).then(function(){"function"==typeof t[1]&&t[1].apply(null)},function(e){"function"==typeof t[2]&&t[2].apply(null,[e])}):n.apply(this,arguments)}}),["getStats"].forEach(function(e){var t=i.prototype[e];i.prototype[e]=function(){var e=arguments;return"function"==typeof e[1]?t.apply(this,arguments).then(function(){"function"==typeof e[1]&&e[1].apply(null)}):t.apply(this,arguments)}}),i}},{sdp:2}],2:[function(e,t,n){"use strict";var l={generateIdentifier:function(){return Math.random().toString(36).substr(2,10)}};l.localCName=l.generateIdentifier(),l.splitLines=function(e){return e.trim().split("\n").map(function(e){return e.trim()})},l.splitSections=function(e){return e.split("\nm=").map(function(e,t){return(0<t?"m="+e:e).trim()+"\r\n"})},l.getDescription=function(e){e=l.splitSections(e);return e&&e[0]},l.getMediaSections=function(e){e=l.splitSections(e);return e.shift(),e},l.matchPrefix=function(e,t){return l.splitLines(e).filter(function(e){return 0===e.indexOf(t)})},l.parseCandidate=function(e){for(var t=(0===e.indexOf("a=candidate:")?e.substring(12):e.substring(10)).split(" "),n={foundation:t[0],component:parseInt(t[1],10),protocol:t[2].toLowerCase(),priority:parseInt(t[3],10),ip:t[4],address:t[4],port:parseInt(t[5],10),type:t[7]},i=8;i<t.length;i+=2)switch(t[i]){case"raddr":n.relatedAddress=t[i+1];break;case"rport":n.relatedPort=parseInt(t[i+1],10);break;case"tcptype":n.tcpType=t[i+1];break;case"ufrag":n.ufrag=t[i+1],n.usernameFragment=t[i+1];break;default:n[t[i]]=t[i+1]}return n},l.writeCandidate=function(e){var t=[],n=(t.push(e.foundation),t.push(e.component),t.push(e.protocol.toUpperCase()),t.push(e.priority),t.push(e.address||e.ip),t.push(e.port),e.type);return t.push("typ"),t.push(n),"host"!==n&&e.relatedAddress&&e.relatedPort&&(t.push("raddr"),t.push(e.relatedAddress),t.push("rport"),t.push(e.relatedPort)),e.tcpType&&"tcp"===e.protocol.toLowerCase()&&(t.push("tcptype"),t.push(e.tcpType)),(e.usernameFragment||e.ufrag)&&(t.push("ufrag"),t.push(e.usernameFragment||e.ufrag)),"candidate:"+t.join(" ")},l.parseIceOptions=function(e){return e.substr(14).split(" ")},l.parseRtpMap=function(e){var e=e.substr(9).split(" "),t={payloadType:parseInt(e.shift(),10)},e=e[0].split("/");return t.name=e[0],t.clockRate=parseInt(e[1],10),t.channels=3===e.length?parseInt(e[2],10):1,t.numChannels=t.channels,t},l.writeRtpMap=function(e){var t=e.payloadType,n=(void 0!==e.preferredPayloadType&&(t=e.preferredPayloadType),e.channels||e.numChannels||1);return"a=rtpmap:"+t+" "+e.name+"/"+e.clockRate+(1!==n?"/"+n:"")+"\r\n"},l.parseExtmap=function(e){e=e.substr(9).split(" ");return{id:parseInt(e[0],10),direction:0<e[0].indexOf("/")?e[0].split("/")[1]:"sendrecv",uri:e[1]}},l.writeExtmap=function(e){return"a=extmap:"+(e.id||e.preferredId)+(e.direction&&"sendrecv"!==e.direction?"/"+e.direction:"")+" "+e.uri+"\r\n"},l.parseFmtp=function(e){for(var t,n={},i=e.substr(e.indexOf(" ")+1).split(";"),r=0;r<i.length;r++)n[(t=i[r].trim().split("="))[0].trim()]=t[1];return n},l.writeFmtp=function(t){var n,e="",i=t.payloadType;return void 0!==t.preferredPayloadType&&(i=t.preferredPayloadType),t.parameters&&Object.keys(t.parameters).length&&(n=[],Object.keys(t.parameters).forEach(function(e){t.parameters[e]?n.push(e+"="+t.parameters[e]):n.push(e)}),e+="a=fmtp:"+i+" "+n.join(";")+"\r\n"),e},l.parseRtcpFb=function(e){e=e.substr(e.indexOf(" ")+1).split(" ");return{type:e.shift(),parameter:e.join(" ")}},l.writeRtcpFb=function(e){var t="",n=e.payloadType;return void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.rtcpFeedback&&e.rtcpFeedback.length&&e.rtcpFeedback.forEach(function(e){t+="a=rtcp-fb:"+n+" "+e.type+(e.parameter&&e.parameter.length?" "+e.parameter:"")+"\r\n"}),t},l.parseSsrcMedia=function(e){var t=e.indexOf(" "),n={ssrc:parseInt(e.substr(7,t-7),10)},i=e.indexOf(":",t);return-1<i?(n.attribute=e.substr(t+1,i-t-1),n.value=e.substr(i+1)):n.attribute=e.substr(t+1),n},l.parseSsrcGroup=function(e){e=e.substr(13).split(" ");return{semantics:e.shift(),ssrcs:e.map(function(e){return parseInt(e,10)})}},l.getMid=function(e){e=l.matchPrefix(e,"a=mid:")[0];if(e)return e.substr(6)},l.parseFingerprint=function(e){e=e.substr(14).split(" ");return{algorithm:e[0].toLowerCase(),value:e[1]}},l.getDtlsParameters=function(e,t){return{role:"auto",fingerprints:l.matchPrefix(e+t,"a=fingerprint:").map(l.parseFingerprint)}},l.writeDtlsParameters=function(e,t){var n="a=setup:"+t+"\r\n";return e.fingerprints.forEach(function(e){n+="a=fingerprint:"+e.algorithm+" "+e.value+"\r\n"}),n},l.getIceParameters=function(e,t){e=l.splitLines(e);return{usernameFragment:(e=e.concat(l.splitLines(t))).filter(function(e){return 0===e.indexOf("a=ice-ufrag:")})[0].substr(12),password:e.filter(function(e){return 0===e.indexOf("a=ice-pwd:")})[0].substr(10)}},l.writeIceParameters=function(e){return"a=ice-ufrag:"+e.usernameFragment+"\r\na=ice-pwd:"+e.password+"\r\n"},l.parseRtpParameters=function(e){for(var t={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},n=l.splitLines(e)[0].split(" "),i=3;i<n.length;i++){var r=n[i],o=l.matchPrefix(e,"a=rtpmap:"+r+" ")[0];if(o){var s=l.parseRtpMap(o),o=l.matchPrefix(e,"a=fmtp:"+r+" ");switch(s.parameters=o.length?l.parseFmtp(o[0]):{},s.rtcpFeedback=l.matchPrefix(e,"a=rtcp-fb:"+r+" ").map(l.parseRtcpFb),t.codecs.push(s),s.name.toUpperCase()){case"RED":case"ULPFEC":t.fecMechanisms.push(s.name.toUpperCase())}}}return l.matchPrefix(e,"a=extmap:").forEach(function(e){t.headerExtensions.push(l.parseExtmap(e))}),t},l.writeRtpDescription=function(e,t){var n="",i=(n=(n=(n=(n+="m="+e+" ")+(0<t.codecs.length?"9":"0")+" UDP/TLS/RTP/SAVPF ")+(t.codecs.map(function(e){return void 0!==e.preferredPayloadType?e.preferredPayloadType:e.payloadType}).join(" ")+"\r\n"))+"c=IN IP4 0.0.0.0\r\n"+"a=rtcp:9 IN IP4 0.0.0.0\r\n",t.codecs.forEach(function(e){n=(n=(n+=l.writeRtpMap(e))+l.writeFmtp(e))+l.writeRtcpFb(e)}),0);return t.codecs.forEach(function(e){e.maxptime>i&&(i=e.maxptime)}),0<i&&(n+="a=maxptime:"+i+"\r\n"),n+="a=rtcp-mux\r\n",t.headerExtensions&&t.headerExtensions.forEach(function(e){n+=l.writeExtmap(e)}),n},l.parseRtpEncodingParameters=function(e){var t,n=[],i=l.parseRtpParameters(e),r=-1!==i.fecMechanisms.indexOf("RED"),o=-1!==i.fecMechanisms.indexOf("ULPFEC"),s=l.matchPrefix(e,"a=ssrc:").map(function(e){return l.parseSsrcMedia(e)}).filter(function(e){return"cname"===e.attribute}),a=0<s.length&&s[0].ssrc,s=l.matchPrefix(e,"a=ssrc-group:FID").map(function(e){return e.substr(17).split(" ").map(function(e){return parseInt(e,10)})}),c=(0<s.length&&1<s[0].length&&s[0][0]===a&&(t=s[0][1]),i.codecs.forEach(function(e){"RTX"===e.name.toUpperCase()&&e.parameters.apt&&(e={ssrc:a,codecPayloadType:parseInt(e.parameters.apt,10)},a&&t&&(e.rtx={ssrc:t}),n.push(e),r)&&((e=JSON.parse(JSON.stringify(e))).fec={ssrc:a,mechanism:o?"red+ulpfec":"red"},n.push(e))}),0===n.length&&a&&n.push({ssrc:a}),l.matchPrefix(e,"b="));return c.length&&(c=0===c[0].indexOf("b=TIAS:")?parseInt(c[0].substr(7),10):0===c[0].indexOf("b=AS:")?1e3*parseInt(c[0].substr(5),10)*.95-16e3:void 0,n.forEach(function(e){e.maxBitrate=c})),n},l.parseRtcpParameters=function(e){var t={},n=l.matchPrefix(e,"a=ssrc:").map(function(e){return l.parseSsrcMedia(e)}).filter(function(e){return"cname"===e.attribute})[0],n=(n&&(t.cname=n.value,t.ssrc=n.ssrc),l.matchPrefix(e,"a=rtcp-rsize")),n=(t.reducedSize=0<n.length,t.compound=0===n.length,l.matchPrefix(e,"a=rtcp-mux"));return t.mux=0<n.length,t},l.parseMsid=function(e){var t,n=l.matchPrefix(e,"a=msid:");return 1===n.length?{stream:(t=n[0].substr(7).split(" "))[0],track:t[1]}:0<(n=l.matchPrefix(e,"a=ssrc:").map(function(e){return l.parseSsrcMedia(e)}).filter(function(e){return"msid"===e.attribute})).length?{stream:(t=n[0].value.split(" "))[0],track:t[1]}:void 0},l.generateSessionId=function(){return Math.random().toString().substr(2,21)},l.writeSessionBoilerplate=function(e,t,n){t=void 0!==t?t:2,e=e||l.generateSessionId();return"v=0\r\no="+(n||"thisisadapterortc")+" "+e+" "+t+" IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},l.writeMediaSection=function(e,t,n,i){t=l.writeRtpDescription(e.kind,t);return t=(t=(t+=l.writeIceParameters(e.iceGatherer.getLocalParameters()))+l.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),"offer"===n?"actpass":"active"))+("a=mid:"+e.mid+"\r\n"),e.direction?t+="a="+e.direction+"\r\n":e.rtpSender&&e.rtpReceiver?t+="a=sendrecv\r\n":e.rtpSender?t+="a=sendonly\r\n":e.rtpReceiver?t+="a=recvonly\r\n":t+="a=inactive\r\n",e.rtpSender&&(t=t+"a="+(n="msid:"+i.id+" "+e.rtpSender.track.id+"\r\n")+"a=ssrc:"+e.sendEncodingParameters[0].ssrc+" "+n,e.sendEncodingParameters[0].rtx)&&(t=(t+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" "+n)+"a=ssrc-group:FID "+e.sendEncodingParameters[0].ssrc+" "+e.sendEncodingParameters[0].rtx.ssrc+"\r\n"),t+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" cname:"+l.localCName+"\r\n",e.rtpSender&&e.sendEncodingParameters[0].rtx&&(t+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" cname:"+l.localCName+"\r\n"),t},l.getDirection=function(e,t){for(var n=l.splitLines(e),i=0;i<n.length;i++)switch(n[i]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return n[i].substr(2)}return t?l.getDirection(t):"sendrecv"},l.getKind=function(e){return l.splitLines(e)[0].split(" ")[0].substr(2)},l.isRejected=function(e){return"0"===e.split(" ",2)[1]},l.parseMLine=function(e){e=l.splitLines(e)[0].substr(2).split(" ");return{kind:e[0],port:parseInt(e[1],10),protocol:e[2],fmt:e.slice(3).join(" ")}},l.parseOLine=function(e){e=l.matchPrefix(e,"o=")[0].substr(2).split(" ");return{username:e[0],sessionId:e[1],sessionVersion:parseInt(e[2],10),netType:e[3],addressType:e[4],address:e[5]}},l.isValidSDP=function(e){if("string"!=typeof e||0===e.length)return!1;for(var t=l.splitLines(e),n=0;n<t.length;n++)if(t[n].length<2||"="!==t[n].charAt(1))return!1;return!0},"object"==typeof t&&(t.exports=l)},{}],3:[function(n,i,e){!function(e){"use strict";var t=n("./adapter_factory.js");i.exports=t({window:e.window})}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./adapter_factory.js":4}],4:[function(u,e,t){"use strict";var p=u("./utils");e.exports=function(e,t){var n,i=e&&e.window,r={shimChrome:!0,shimFirefox:!0,shimEdge:!0,shimSafari:!0};for(n in t)hasOwnProperty.call(t,n)&&(r[n]=t[n]);var o=p.log,e=p.detectBrowser(i),s=u("./chrome/chrome_shim")||null,a=u("./edge/edge_shim")||null,c=u("./firefox/firefox_shim")||null,l=u("./safari/safari_shim")||null,d=u("./common_shim")||null,h={browserDetails:e,commonShim:d,extractVersion:p.extractVersion,disableLog:p.disableLog,disableWarnings:p.disableWarnings};switch(e.browser){case"chrome":if(!s||!s.shimPeerConnection||!r.shimChrome)return o("Chrome shim is not included in this adapter release."),h;o("adapter.js shimming chrome."),h.browserShim=s,d.shimCreateObjectURL(i),s.shimGetUserMedia(i),s.shimMediaStream(i),s.shimSourceObject(i),s.shimPeerConnection(i),s.shimOnTrack(i),s.shimAddTrackRemoveTrack(i),s.shimGetSendersWithDtmf(i),s.shimSenderReceiverGetStats(i),s.fixNegotiationNeeded(i),d.shimRTCIceCandidate(i),d.shimMaxMessageSize(i),d.shimSendThrowTypeError(i);break;case"firefox":if(!c||!c.shimPeerConnection||!r.shimFirefox)return o("Firefox shim is not included in this adapter release."),h;o("adapter.js shimming firefox."),h.browserShim=c,d.shimCreateObjectURL(i),c.shimGetUserMedia(i),c.shimSourceObject(i),c.shimPeerConnection(i),c.shimOnTrack(i),c.shimRemoveStream(i),c.shimSenderGetStats(i),c.shimReceiverGetStats(i),c.shimRTCDataChannel(i),d.shimRTCIceCandidate(i),d.shimMaxMessageSize(i),d.shimSendThrowTypeError(i);break;case"edge":if(!a||!a.shimPeerConnection||!r.shimEdge)return o("MS edge shim is not included in this adapter release."),h;o("adapter.js shimming edge."),h.browserShim=a,d.shimCreateObjectURL(i),a.shimGetUserMedia(i),a.shimPeerConnection(i),a.shimReplaceTrack(i),a.shimGetDisplayMedia(i),d.shimMaxMessageSize(i),d.shimSendThrowTypeError(i);break;case"safari":if(!l||!r.shimSafari)return o("Safari shim is not included in this adapter release."),h;o("adapter.js shimming safari."),h.browserShim=l,d.shimCreateObjectURL(i),l.shimRTCIceServerUrls(i),l.shimCreateOfferLegacy(i),l.shimCallbacksAPI(i),l.shimLocalStreamsAPI(i),l.shimRemoteStreamsAPI(i),l.shimTrackEventTransceiver(i),l.shimGetUserMedia(i),d.shimRTCIceCandidate(i),d.shimMaxMessageSize(i),d.shimSendThrowTypeError(i);break;default:o("Unsupported browser!")}return h}},{"./chrome/chrome_shim":5,"./common_shim":7,"./edge/edge_shim":8,"./firefox/firefox_shim":11,"./safari/safari_shim":13,"./utils":14}],5:[function(e,t,n){"use strict";var c=e("../utils.js"),i=c.log;function r(n,t,e){var i,r=e?"outbound-rtp":"inbound-rtp",o=new Map;return null!==t&&(i=[],n.forEach(function(e){"track"===e.type&&e.trackIdentifier===t.id&&i.push(e)}),i.forEach(function(t){n.forEach(function(e){e.type===r&&e.trackId===t.id&&!function t(n,i,r){i&&!r.has(i.id)&&(r.set(i.id,i),Object.keys(i).forEach(function(e){e.endsWith("Id")?t(n,n.get(i[e]),r):e.endsWith("Ids")&&i[e].forEach(function(e){t(n,n.get(e),r)})}))}(n,e,o)})})),o}t.exports={shimGetUserMedia:e("./getusermedia"),shimMediaStream:function(e){e.MediaStream=e.MediaStream||e.webkitMediaStream},shimOnTrack:function(o){var e;"object"!=typeof o||!o.RTCPeerConnection||"ontrack"in o.RTCPeerConnection.prototype?c.wrapPeerConnectionEvent(o,"track",function(e){return e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e}):(Object.defineProperty(o.RTCPeerConnection.prototype,"ontrack",{get:function(){return this._ontrack},set:function(e){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=e)},enumerable:!0,configurable:!0}),e=o.RTCPeerConnection.prototype.setRemoteDescription,o.RTCPeerConnection.prototype.setRemoteDescription=function(){var r=this;return r._ontrackpoly||(r._ontrackpoly=function(i){i.stream.addEventListener("addtrack",function(t){var e=o.RTCPeerConnection.prototype.getReceivers?r.getReceivers().find(function(e){return e.track&&e.track.id===t.track.id}):{track:t.track},n=new Event("track");n.track=t.track,n.receiver=e,n.transceiver={receiver:e},n.streams=[i.stream],r.dispatchEvent(n)}),i.stream.getTracks().forEach(function(t){var e=o.RTCPeerConnection.prototype.getReceivers?r.getReceivers().find(function(e){return e.track&&e.track.id===t.id}):{track:t},n=new Event("track");n.track=t,n.receiver=e,n.transceiver={receiver:e},n.streams=[i.stream],r.dispatchEvent(n)})},r.addEventListener("addstream",r._ontrackpoly)),e.apply(r,arguments)})},shimGetSendersWithDtmf:function(e){var i,r,t,n,o,s;"object"==typeof e&&e.RTCPeerConnection&&!("getSenders"in e.RTCPeerConnection.prototype)&&"createDTMFSender"in e.RTCPeerConnection.prototype?(i=function(e,t){return{track:t,get dtmf(){return void 0===this._dtmf&&("audio"===t.kind?this._dtmf=e.createDTMFSender(t):this._dtmf=null),this._dtmf},_pc:e}},e.RTCPeerConnection.prototype.getSenders||(e.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()},r=e.RTCPeerConnection.prototype.addTrack,e.RTCPeerConnection.prototype.addTrack=function(e,t){var n=r.apply(this,arguments);return n||(n=i(this,e),this._senders.push(n)),n},t=e.RTCPeerConnection.prototype.removeTrack,e.RTCPeerConnection.prototype.removeTrack=function(e){t.apply(this,arguments);e=this._senders.indexOf(e);-1!==e&&this._senders.splice(e,1)}),n=e.RTCPeerConnection.prototype.addStream,e.RTCPeerConnection.prototype.addStream=function(e){var t=this;t._senders=t._senders||[],n.apply(t,[e]),e.getTracks().forEach(function(e){t._senders.push(i(t,e))})},o=e.RTCPeerConnection.prototype.removeStream,e.RTCPeerConnection.prototype.removeStream=function(e){var n=this;n._senders=n._senders||[],o.apply(n,[e]),e.getTracks().forEach(function(t){var e=n._senders.find(function(e){return e.track===t});e&&n._senders.splice(n._senders.indexOf(e),1)})}):"object"==typeof e&&e.RTCPeerConnection&&"getSenders"in e.RTCPeerConnection.prototype&&"createDTMFSender"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)&&(s=e.RTCPeerConnection.prototype.getSenders,e.RTCPeerConnection.prototype.getSenders=function(){var t=this,e=s.apply(t,[]);return e.forEach(function(e){e._pc=t}),e},Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get:function(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}}))},shimSenderReceiverGetStats:function(e){var n,t,i,o;"object"==typeof e&&e.RTCPeerConnection&&e.RTCRtpSender&&e.RTCRtpReceiver&&("getStats"in e.RTCRtpSender.prototype||((n=e.RTCPeerConnection.prototype.getSenders)&&(e.RTCPeerConnection.prototype.getSenders=function(){var t=this,e=n.apply(t,[]);return e.forEach(function(e){e._pc=t}),e}),(t=e.RTCPeerConnection.prototype.addTrack)&&(e.RTCPeerConnection.prototype.addTrack=function(){var e=t.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){var t=this;return this._pc.getStats().then(function(e){return r(e,t.track,!0)})}),"getStats"in e.RTCRtpReceiver.prototype||((i=e.RTCPeerConnection.prototype.getReceivers)&&(e.RTCPeerConnection.prototype.getReceivers=function(){var t=this,e=i.apply(t,[]);return e.forEach(function(e){e._pc=t}),e}),c.wrapPeerConnectionEvent(e,"track",function(e){return e.receiver._pc=e.srcElement,e}),e.RTCRtpReceiver.prototype.getStats=function(){var t=this;return this._pc.getStats().then(function(e){return r(e,t.track,!1)})}),"getStats"in e.RTCRtpSender.prototype)&&"getStats"in e.RTCRtpReceiver.prototype&&(o=e.RTCPeerConnection.prototype.getStats,e.RTCPeerConnection.prototype.getStats=function(){var t,n,i,r;return 0<arguments.length&&arguments[0]instanceof e.MediaStreamTrack?(t=arguments[0],this.getSenders().forEach(function(e){e.track===t&&(n?r=!0:n=e)}),this.getReceivers().forEach(function(e){return e.track===t&&(i?r=!0:i=e),e.track===t}),r||n&&i?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):n?n.getStats():i?i.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))):o.apply(this,arguments)})},shimSourceObject:function(e){var n=e&&e.URL;"object"!=typeof e||!e.HTMLMediaElement||"srcObject"in e.HTMLMediaElement.prototype||Object.defineProperty(e.HTMLMediaElement.prototype,"srcObject",{get:function(){return this._srcObject},set:function(e){var t=this;this._srcObject=e,this.src&&n.revokeObjectURL(this.src),e?(this.src=n.createObjectURL(e),e.addEventListener("addtrack",function(){t.src&&n.revokeObjectURL(t.src),t.src=n.createObjectURL(e)}),e.addEventListener("removetrack",function(){t.src&&n.revokeObjectURL(t.src),t.src=n.createObjectURL(e)})):this.src=""}})},shimAddTrackRemoveTrackWithNative:function(e){e.RTCPeerConnection.prototype.getLocalStreams=function(){var t=this;return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(function(e){return t._shimmedLocalStreams[e][0]})};var i=e.RTCPeerConnection.prototype.addTrack,r=(e.RTCPeerConnection.prototype.addTrack=function(e,t){if(!t)return i.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};var n=i.apply(this,arguments);return this._shimmedLocalStreams[t.id]?-1===this._shimmedLocalStreams[t.id].indexOf(n)&&this._shimmedLocalStreams[t.id].push(n):this._shimmedLocalStreams[t.id]=[t,n],n},e.RTCPeerConnection.prototype.addStream),t=(e.RTCPeerConnection.prototype.addStream=function(e){var n=this,t=(this._shimmedLocalStreams=this._shimmedLocalStreams||{},e.getTracks().forEach(function(t){if(n.getSenders().find(function(e){return e.track===t}))throw new DOMException("Track already exists.","InvalidAccessError")}),n.getSenders()),i=(r.apply(this,arguments),n.getSenders().filter(function(e){return-1===t.indexOf(e)}));this._shimmedLocalStreams[e.id]=[e].concat(i)},e.RTCPeerConnection.prototype.removeStream),o=(e.RTCPeerConnection.prototype.removeStream=function(e){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[e.id],t.apply(this,arguments)},e.RTCPeerConnection.prototype.removeTrack);e.RTCPeerConnection.prototype.removeTrack=function(n){var i=this;return this._shimmedLocalStreams=this._shimmedLocalStreams||{},n&&Object.keys(this._shimmedLocalStreams).forEach(function(e){var t=i._shimmedLocalStreams[e].indexOf(n);-1!==t&&i._shimmedLocalStreams[e].splice(t,1),1===i._shimmedLocalStreams[e].length&&delete i._shimmedLocalStreams[e]}),o.apply(this,arguments)}},shimAddTrackRemoveTrack:function(r){if(r.RTCPeerConnection){var e=c.detectBrowser(r);if(r.RTCPeerConnection.prototype.addTrack&&65<=e.version)return this.shimAddTrackRemoveTrackWithNative(r);var n=r.RTCPeerConnection.prototype.getLocalStreams,i=(r.RTCPeerConnection.prototype.getLocalStreams=function(){var t=this,e=n.apply(this);return t._reverseStreams=t._reverseStreams||{},e.map(function(e){return t._reverseStreams[e.id]})},r.RTCPeerConnection.prototype.addStream),o=(r.RTCPeerConnection.prototype.addStream=function(e){var t,n=this;n._streams=n._streams||{},n._reverseStreams=n._reverseStreams||{},e.getTracks().forEach(function(t){if(n.getSenders().find(function(e){return e.track===t}))throw new DOMException("Track already exists.","InvalidAccessError")}),n._reverseStreams[e.id]||(t=new r.MediaStream(e.getTracks()),n._streams[e.id]=t,n._reverseStreams[t.id]=e,e=t),i.apply(n,[e])},r.RTCPeerConnection.prototype.removeStream),t=(r.RTCPeerConnection.prototype.removeStream=function(e){var t=this;t._streams=t._streams||{},t._reverseStreams=t._reverseStreams||{},o.apply(t,[t._streams[e.id]||e]),delete t._reverseStreams[(t._streams[e.id]||e).id],delete t._streams[e.id]},r.RTCPeerConnection.prototype.addTrack=function(t,e){var n=this;if("closed"===n.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");var i=[].slice.call(arguments,1);if(1!==i.length||!i[0].getTracks().find(function(e){return e===t}))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(n.getSenders().find(function(e){return e.track===t}))throw new DOMException("Track already exists.","InvalidAccessError");n._streams=n._streams||{},n._reverseStreams=n._reverseStreams||{};var i=n._streams[e.id];return i?(i.addTrack(t),Promise.resolve().then(function(){n.dispatchEvent(new Event("negotiationneeded"))})):(i=new r.MediaStream([t]),n._streams[e.id]=i,n._reverseStreams[i.id]=e,n.addStream(i)),n.getSenders().find(function(e){return e.track===t})},["createOffer","createAnswer"].forEach(function(e){var i=r.RTCPeerConnection.prototype[e];r.RTCPeerConnection.prototype[e]=function(){var t=this,n=arguments;return arguments.length&&"function"==typeof arguments[0]?i.apply(t,[function(e){e=a(t,e);n[0].apply(null,[e])},function(e){n[1]&&n[1].apply(null,e)},arguments[2]]):i.apply(t,arguments).then(function(e){return a(t,e)})}}),r.RTCPeerConnection.prototype.setLocalDescription),s=(r.RTCPeerConnection.prototype.setLocalDescription=function(){var n,e,i;return arguments.length&&arguments[0].type&&(arguments[0]=(n=this,i=(e=arguments[0]).sdp,Object.keys(n._reverseStreams||[]).forEach(function(e){var e=n._reverseStreams[e],t=n._streams[e.id];i=i.replace(new RegExp(e.id,"g"),t.id)}),new RTCSessionDescription({type:e.type,sdp:i}))),t.apply(this,arguments)},Object.getOwnPropertyDescriptor(r.RTCPeerConnection.prototype,"localDescription"));Object.defineProperty(r.RTCPeerConnection.prototype,"localDescription",{get:function(){var e=s.get.apply(this);return""===e.type?e:a(this,e)}}),r.RTCPeerConnection.prototype.removeTrack=function(t){var n,i=this;if("closed"===i.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!t._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(t._pc===i))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");i._streams=i._streams||{},Object.keys(i._streams).forEach(function(e){i._streams[e].getTracks().find(function(e){return t.track===e})&&(n=i._streams[e])}),n&&(1===n.getTracks().length?i.removeStream(i._reverseStreams[n.id]):n.removeTrack(t.track),i.dispatchEvent(new Event("negotiationneeded")))}}function a(n,e){var i=e.sdp;return Object.keys(n._reverseStreams||[]).forEach(function(e){var e=n._reverseStreams[e],t=n._streams[e.id];i=i.replace(new RegExp(t.id,"g"),e.id)}),new RTCSessionDescription({type:e.type,sdp:i})}},shimPeerConnection:function(n){var a,e,t=c.detectBrowser(n);!n.RTCPeerConnection&&n.webkitRTCPeerConnection&&(n.RTCPeerConnection=function(e,t){return i("PeerConnection"),e&&e.iceTransportPolicy&&(e.iceTransports=e.iceTransportPolicy),new n.webkitRTCPeerConnection(e,t)},n.RTCPeerConnection.prototype=n.webkitRTCPeerConnection.prototype,n.webkitRTCPeerConnection.generateCertificate)&&Object.defineProperty(n.RTCPeerConnection,"generateCertificate",{get:function(){return n.webkitRTCPeerConnection.generateCertificate}}),n.RTCPeerConnection&&(a=n.RTCPeerConnection.prototype.getStats,n.RTCPeerConnection.prototype.getStats=function(e,t,n){var i,r,o=this,s=arguments;return 0<arguments.length&&"function"==typeof e?a.apply(this,arguments):0!==a.length||0!==arguments.length&&"function"==typeof e?(i=function(e){var i={};return e.result().forEach(function(t){var n={id:t.id,timestamp:t.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[t.type]||t.type};t.names().forEach(function(e){n[e]=t.stat(e)}),i[n.id]=n}),i},r=function(t){return new Map(Object.keys(t).map(function(e){return[e,t[e]]}))},2<=arguments.length?a.apply(this,[function(e){s[1](r(i(e)))},e]):new Promise(function(t,e){a.apply(o,[function(e){t(r(i(e)))},e])}).then(t,n)):a.apply(this,[])},t.version<51&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(e){var r=n.RTCPeerConnection.prototype[e];n.RTCPeerConnection.prototype[e]=function(){var n=arguments,i=this,e=new Promise(function(e,t){r.apply(i,[n[0],e,t])});return n.length<2?e:e.then(function(){n[1].apply(null,[])},function(e){3<=n.length&&n[2].apply(null,[e])})}}),t.version<52&&["createOffer","createAnswer"].forEach(function(e){var r=n.RTCPeerConnection.prototype[e];n.RTCPeerConnection.prototype[e]=function(){var n,i=this;return arguments.length<1||1===arguments.length&&"object"==typeof arguments[0]?(n=1===arguments.length?arguments[0]:void 0,new Promise(function(e,t){r.apply(i,[e,t,n])})):r.apply(this,arguments)}}),["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(e){var t=n.RTCPeerConnection.prototype[e];n.RTCPeerConnection.prototype[e]=function(){return arguments[0]=new("addIceCandidate"===e?n.RTCIceCandidate:n.RTCSessionDescription)(arguments[0]),t.apply(this,arguments)}}),e=n.RTCPeerConnection.prototype.addIceCandidate,n.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?e.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})},fixNegotiationNeeded:function(e){c.wrapPeerConnectionEvent(e,"negotiationneeded",function(e){var t=e.target;if("stable"===t.signalingState)return e})},shimGetDisplayMedia:function(o,e){!o.navigator||!o.navigator.mediaDevices||"getDisplayMedia"in o.navigator.mediaDevices||("function"!=typeof e?console.error("shimGetDisplayMedia: getSourceId argument is not a function"):(o.navigator.mediaDevices.getDisplayMedia=function(r){return e(r).then(function(e){var t=r.video&&r.video.width,n=r.video&&r.video.height,i=r.video&&r.video.frameRate;return r.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:e,maxFrameRate:i||3}},t&&(r.video.mandatory.maxWidth=t),n&&(r.video.mandatory.maxHeight=n),o.navigator.mediaDevices.getUserMedia(r)})},o.navigator.getDisplayMedia=function(e){return c.deprecated("navigator.getDisplayMedia","navigator.mediaDevices.getDisplayMedia"),o.navigator.mediaDevices.getDisplayMedia(e)}))}}},{"../utils.js":14,"./getusermedia":6}],6:[function(e,t,n){"use strict";var o=e("../utils.js"),l=o.log;t.exports=function(e){function i(n,i){if(!(61<=s.version)){if((n=JSON.parse(JSON.stringify(n)))&&"object"==typeof n.audio&&((e=function(e,t,n){t in e&&!(n in e)&&(e[n]=e[t],delete e[t])})((n=JSON.parse(JSON.stringify(n))).audio,"autoGainControl","googAutoGainControl"),e(n.audio,"noiseSuppression","googNoiseSuppression"),n.audio=c(n.audio)),n&&"object"==typeof n.video){var r,o=(o=n.video.facingMode)&&("object"==typeof o?o:{ideal:o}),e=s.version<66;if(o&&("user"===o.exact||"environment"===o.exact||"user"===o.ideal||"environment"===o.ideal)&&(!a.mediaDevices.getSupportedConstraints||!a.mediaDevices.getSupportedConstraints().facingMode||e))if(delete n.video.facingMode,"environment"===o.exact||"environment"===o.ideal?r=["back","rear"]:"user"!==o.exact&&"user"!==o.ideal||(r=["front"]),r)return a.mediaDevices.enumerateDevices().then(function(e){var t=(e=e.filter(function(e){return"videoinput"===e.kind})).find(function(t){return r.some(function(e){return-1!==t.label.toLowerCase().indexOf(e)})});return(t=!t&&e.length&&-1!==r.indexOf("back")?e[e.length-1]:t)&&(n.video.deviceId=o.exact?{exact:t.deviceId}:{ideal:t.deviceId}),n.video=c(n.video),l("chrome: "+JSON.stringify(n)),i(n)});n.video=c(n.video)}l("chrome: "+JSON.stringify(n))}return i(n)}function r(e){return 64<=s.version?e:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[e.name]||e.name,message:e.message,constraint:e.constraint||e.constraintName,toString:function(){return this.name+(this.message&&": ")+this.message}}}function t(n){return new Promise(function(e,t){a.getUserMedia(n,e,t)})}var n,s=o.detectBrowser(e),a=e&&e.navigator,c=function(r){var o;return"object"!=typeof r||r.mandatory||r.optional?r:(o={},Object.keys(r).forEach(function(t){var n,i,e;"require"!==t&&"advanced"!==t&&"mediaSource"!==t&&(void 0!==(n="object"==typeof r[t]?r[t]:{ideal:r[t]}).exact&&"number"==typeof n.exact&&(n.min=n.max=n.exact),i=function(e,t){return e?e+t.charAt(0).toUpperCase()+t.slice(1):"deviceId"===t?"sourceId":t},void 0!==n.ideal&&(o.optional=o.optional||[],e={},"number"==typeof n.ideal?(e[i("min",t)]=n.ideal,o.optional.push(e),(e={})[i("max",t)]=n.ideal):e[i("",t)]=n.ideal,o.optional.push(e)),void 0!==n.exact&&"number"!=typeof n.exact?(o.mandatory=o.mandatory||{},o.mandatory[i("",t)]=n.exact):["min","max"].forEach(function(e){void 0!==n[e]&&(o.mandatory=o.mandatory||{},o.mandatory[i(e,t)]=n[e])}))}),r.advanced&&(o.optional=(o.optional||[]).concat(r.advanced)),o)};a.getUserMedia=function(e,t,n){i(e,function(e){a.webkitGetUserMedia(e,t,function(e){n&&n(r(e))})})};a.mediaDevices||(a.mediaDevices={getUserMedia:t,enumerateDevices:function(){return new Promise(function(t){var n={audio:"audioinput",video:"videoinput"};return e.MediaStreamTrack.getSources(function(e){t(e.map(function(e){return{label:e.label,kind:n[e.kind],deviceId:e.id,groupId:""}}))})})},getSupportedConstraints:function(){return{deviceId:!0,echoCancellation:!0,facingMode:!0,frameRate:!0,height:!0,width:!0}}}),a.mediaDevices.getUserMedia?(n=a.mediaDevices.getUserMedia.bind(a.mediaDevices),a.mediaDevices.getUserMedia=function(e){return i(e,function(t){return n(t).then(function(e){if(t.audio&&!e.getAudioTracks().length||t.video&&!e.getVideoTracks().length)throw e.getTracks().forEach(function(e){e.stop()}),new DOMException("","NotFoundError");return e},function(e){return Promise.reject(r(e))})})}):a.mediaDevices.getUserMedia=t,void 0===a.mediaDevices.addEventListener&&(a.mediaDevices.addEventListener=function(){l("Dummy mediaDevices.addEventListener called.")}),void 0===a.mediaDevices.removeEventListener&&(a.mediaDevices.removeEventListener=function(){l("Dummy mediaDevices.removeEventListener called.")})}},{"../utils.js":14}],7:[function(e,t,n){"use strict";var a=e("sdp"),c=e("./utils");t.exports={shimRTCIceCandidate:function(t){var r;!t.RTCIceCandidate||t.RTCIceCandidate&&"foundation"in t.RTCIceCandidate.prototype||(r=t.RTCIceCandidate,t.RTCIceCandidate=function(e){var t,n,i;return"object"==typeof e&&e.candidate&&0===e.candidate.indexOf("a=")&&((e=JSON.parse(JSON.stringify(e))).candidate=e.candidate.substr(2)),e.candidate&&e.candidate.length?(t=new r(e),n=a.parseCandidate(e.candidate),(i=Object.assign(t,n)).toJSON=function(){return{candidate:i.candidate,sdpMid:i.sdpMid,sdpMLineIndex:i.sdpMLineIndex,usernameFragment:i.usernameFragment}},i):new r(e)},t.RTCIceCandidate.prototype=r.prototype,c.wrapPeerConnectionEvent(t,"icecandidate",function(e){return e.candidate&&Object.defineProperty(e,"candidate",{value:new t.RTCIceCandidate(e.candidate),writable:"false"}),e}))},shimCreateObjectURL:function(e){var n,t,i,r,o,s,a=e&&e.URL;"object"==typeof e&&e.HTMLMediaElement&&"srcObject"in e.HTMLMediaElement.prototype&&a.createObjectURL&&a.revokeObjectURL&&(n=a.createObjectURL.bind(a),t=a.revokeObjectURL.bind(a),i=new Map,r=0,a.createObjectURL=function(e){var t;return"getTracks"in e?(t="polyblob:"+ ++r,i.set(t,e),c.deprecated("URL.createObjectURL(stream)","elem.srcObject = stream"),t):n(e)},a.revokeObjectURL=function(e){t(e),i.delete(e)},o=Object.getOwnPropertyDescriptor(e.HTMLMediaElement.prototype,"src"),Object.defineProperty(e.HTMLMediaElement.prototype,"src",{get:function(){return o.get.apply(this)},set:function(e){return this.srcObject=i.get(e)||null,o.set.apply(this,[e])}}),s=e.HTMLMediaElement.prototype.setAttribute,e.HTMLMediaElement.prototype.setAttribute=function(){return 2===arguments.length&&"src"===(""+arguments[0]).toLowerCase()&&(this.srcObject=i.get(arguments[1])||null),s.apply(this,arguments)})},shimMaxMessageSize:function(e){var o,s;!e.RTCSctpTransport&&e.RTCPeerConnection&&(o=c.detectBrowser(e),"sctp"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,"sctp",{get:function(){return void 0===this._sctp?null:this._sctp}}),s=e.RTCPeerConnection.prototype.setRemoteDescription,e.RTCPeerConnection.prototype.setRemoteDescription=function(){var e,t,n,i,r;return this._sctp=null,function(e){e=a.splitSections(e.sdp);return e.shift(),e.some(function(e){e=a.parseMLine(e);return e&&"application"===e.kind&&-1!==e.protocol.indexOf("SCTP")})}(arguments[0])&&(r=null===(r=(r=arguments[0]).sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/))||r.length<2||(r=parseInt(r[1],10))!=r?-1:r,n=r,i=65536,n=i="firefox"===o.browser?o.version<57?-1===n?16384:2147483637:o.version<60?57===o.version?65535:65536:2147483637:i,i=arguments[0],r=r,t=65536,"firefox"===o.browser&&57===o.version&&(t=65535),0<(i=a.matchPrefix(i.sdp,"a=max-message-size:")).length?t=parseInt(i[0].substr(19),10):"firefox"===o.browser&&-1!==r&&(t=2147483637),i=t,e=0===n&&0===i?Number.POSITIVE_INFINITY:0===n||0===i?Math.max(n,i):Math.min(n,i),r={},Object.defineProperty(r,"maxMessageSize",{get:function(){return e}}),this._sctp=r),s.apply(this,arguments)})},shimSendThrowTypeError:function(e){var t;function n(t,n){var i=t.send;t.send=function(){var e=arguments[0],e=e.length||e.size||e.byteLength;if("open"===t.readyState&&n.sctp&&e>n.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+n.sctp.maxMessageSize+" bytes)");return i.apply(t,arguments)}}e.RTCPeerConnection&&"createDataChannel"in e.RTCPeerConnection.prototype&&(t=e.RTCPeerConnection.prototype.createDataChannel,e.RTCPeerConnection.prototype.createDataChannel=function(){var e=t.apply(this,arguments);return n(e,this),e},c.wrapPeerConnectionEvent(e,"datachannel",function(e){return n(e.channel,e.target),e}))}}},{"./utils":14,sdp:2}],8:[function(e,t,n){"use strict";var r=e("../utils"),o=e("./filtericeservers"),s=e("rtcpeerconnection-shim");t.exports={shimGetUserMedia:e("./getusermedia"),shimPeerConnection:function(e){var n,t=r.detectBrowser(e),i=(e.RTCIceGatherer&&(e.RTCIceCandidate||(e.RTCIceCandidate=function(e){return e}),e.RTCSessionDescription||(e.RTCSessionDescription=function(e){return e}),t.version<15025)&&(n=Object.getOwnPropertyDescriptor(e.MediaStreamTrack.prototype,"enabled"),Object.defineProperty(e.MediaStreamTrack.prototype,"enabled",{set:function(e){n.set.call(this,e);var t=new Event("enabled");t.enabled=e,this.dispatchEvent(t)}})),!e.RTCRtpSender||"dtmf"in e.RTCRtpSender.prototype||Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get:function(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=new e.RTCDtmfSender(this):"video"===this.track.kind&&(this._dtmf=null)),this._dtmf}}),e.RTCDtmfSender&&!e.RTCDTMFSender&&(e.RTCDTMFSender=e.RTCDtmfSender),s(e,t.version));e.RTCPeerConnection=function(e){return e&&e.iceServers&&(e.iceServers=o(e.iceServers)),new i(e)},e.RTCPeerConnection.prototype=i.prototype},shimReplaceTrack:function(e){!e.RTCRtpSender||"replaceTrack"in e.RTCRtpSender.prototype||(e.RTCRtpSender.prototype.replaceTrack=e.RTCRtpSender.prototype.setTrack)},shimGetDisplayMedia:function(t,e){var n;"getDisplayMedia"in t.navigator&&t.navigator.mediaDevices&&!("getDisplayMedia"in t.navigator.mediaDevices)&&(n=t.navigator.getDisplayMedia,t.navigator.mediaDevices.getDisplayMedia=function(e){return n.call(t.navigator,e)},t.navigator.getDisplayMedia=function(e){return r.deprecated("navigator.getDisplayMedia","navigator.mediaDevices.getDisplayMedia"),n.call(t.navigator,e)})}}},{"../utils":14,"./filtericeservers":9,"./getusermedia":10,"rtcpeerconnection-shim":1}],9:[function(e,t,n){"use strict";var o=e("../utils");t.exports=function(e,i){var r=!1;return(e=JSON.parse(JSON.stringify(e))).filter(function(e){var t,n;if(e&&(e.urls||e.url))return n=e.urls||e.url,e.url&&!e.urls&&o.deprecated("RTCIceServer.url","RTCIceServer.urls"),n=(n=(t="string"==typeof n)?[n]:n).filter(function(e){return 0!==e.indexOf("turn:")||-1===e.indexOf("transport=udp")||-1!==e.indexOf("turn:[")||r?0===e.indexOf("stun:")&&14393<=i&&-1===e.indexOf("?transport=udp"):r=!0}),delete e.url,e.urls=t?n[0]:n,!!n.length})}},{"../utils":14}],10:[function(e,t,n){"use strict";t.exports=function(e){var e=e&&e.navigator,t=e.mediaDevices.getUserMedia.bind(e.mediaDevices);e.mediaDevices.getUserMedia=function(e){return t(e).catch(function(e){return Promise.reject({name:{PermissionDeniedError:"NotAllowedError"}[(e=e).name]||e.name,message:e.message,constraint:e.constraint,toString:function(){return this.name}})})}}},{}],11:[function(e,t,n){"use strict";var i=e("../utils");t.exports={shimGetUserMedia:e("./getusermedia"),shimOnTrack:function(e){"object"!=typeof e||!e.RTCPeerConnection||"ontrack"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,"ontrack",{get:function(){return this._ontrack},set:function(e){this._ontrack&&(this.removeEventListener("track",this._ontrack),this.removeEventListener("addstream",this._ontrackpoly)),this.addEventListener("track",this._ontrack=e),this.addEventListener("addstream",this._ontrackpoly=function(n){n.stream.getTracks().forEach(function(e){var t=new Event("track");t.track=e,t.receiver={track:e},t.transceiver={receiver:t.receiver},t.streams=[n.stream],this.dispatchEvent(t)}.bind(this))}.bind(this))},enumerable:!0,configurable:!0}),"object"==typeof e&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})},shimSourceObject:function(e){"object"!=typeof e||!e.HTMLMediaElement||"srcObject"in e.HTMLMediaElement.prototype||Object.defineProperty(e.HTMLMediaElement.prototype,"srcObject",{get:function(){return this.mozSrcObject},set:function(e){this.mozSrcObject=e}})},shimPeerConnection:function(a){var e,o,n,c=i.detectBrowser(a);"object"==typeof a&&(a.RTCPeerConnection||a.mozRTCPeerConnection)&&(a.RTCPeerConnection||(a.RTCPeerConnection=function(e,t){if(c.version<38&&e&&e.iceServers){for(var n=[],i=0;i<e.iceServers.length;i++){var r=e.iceServers[i];if(r.hasOwnProperty("urls"))for(var o=0;o<r.urls.length;o++){var s={url:r.urls[o]};0===r.urls[o].indexOf("turn")&&(s.username=r.username,s.credential=r.credential),n.push(s)}else n.push(e.iceServers[i])}e.iceServers=n}return new a.mozRTCPeerConnection(e,t)},a.RTCPeerConnection.prototype=a.mozRTCPeerConnection.prototype,a.mozRTCPeerConnection.generateCertificate&&Object.defineProperty(a.RTCPeerConnection,"generateCertificate",{get:function(){return a.mozRTCPeerConnection.generateCertificate}}),a.RTCSessionDescription=a.mozRTCSessionDescription,a.RTCIceCandidate=a.mozRTCIceCandidate),["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(e){var t=a.RTCPeerConnection.prototype[e];a.RTCPeerConnection.prototype[e]=function(){return arguments[0]=new("addIceCandidate"===e?a.RTCIceCandidate:a.RTCSessionDescription)(arguments[0]),t.apply(this,arguments)}}),e=a.RTCPeerConnection.prototype.addIceCandidate,a.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?e.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())},o={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},n=a.RTCPeerConnection.prototype.getStats,a.RTCPeerConnection.prototype.getStats=function(e,r,t){return n.apply(this,[e||null]).then(function(n){var t,i;if(c.version<48&&(t=n,i=new Map,Object.keys(t).forEach(function(e){i.set(e,t[e]),i[e]=t[e]}),n=i),c.version<53&&!r)try{n.forEach(function(e){e.type=o[e.type]||e.type})}catch(e){if("TypeError"!==e.name)throw e;n.forEach(function(e,t){n.set(t,Object.assign({},e,{type:o[e.type]||e.type}))})}return n}).then(r,t)})},shimSenderGetStats:function(e){var n,t;"object"==typeof e&&e.RTCPeerConnection&&e.RTCRtpSender&&(e.RTCRtpSender&&"getStats"in e.RTCRtpSender.prototype||((n=e.RTCPeerConnection.prototype.getSenders)&&(e.RTCPeerConnection.prototype.getSenders=function(){var t=this,e=n.apply(t,[]);return e.forEach(function(e){e._pc=t}),e}),(t=e.RTCPeerConnection.prototype.addTrack)&&(e.RTCPeerConnection.prototype.addTrack=function(){var e=t.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}))},shimReceiverGetStats:function(e){var n;"object"==typeof e&&e.RTCPeerConnection&&e.RTCRtpSender&&(e.RTCRtpSender&&"getStats"in e.RTCRtpReceiver.prototype||((n=e.RTCPeerConnection.prototype.getReceivers)&&(e.RTCPeerConnection.prototype.getReceivers=function(){var t=this,e=n.apply(t,[]);return e.forEach(function(e){e._pc=t}),e}),i.wrapPeerConnectionEvent(e,"track",function(e){return e.receiver._pc=e.srcElement,e}),e.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}))},shimRemoveStream:function(e){!e.RTCPeerConnection||"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(t){var n=this;i.deprecated("removeStream","removeTrack"),this.getSenders().forEach(function(e){e.track&&-1!==t.getTracks().indexOf(e.track)&&n.removeTrack(e)})})},shimRTCDataChannel:function(e){e.DataChannel&&!e.RTCDataChannel&&(e.RTCDataChannel=e.DataChannel)},shimGetDisplayMedia:function(t,n){!t.navigator||!t.navigator.mediaDevices||"getDisplayMedia"in t.navigator.mediaDevices||(t.navigator.mediaDevices.getDisplayMedia=function(e){return e&&e.video?(!0===e.video?e.video={mediaSource:n}:e.video.mediaSource=n,t.navigator.mediaDevices.getUserMedia(e)):((e=new DOMException("getDisplayMedia without video constraints is undefined")).name="NotFoundError",e.code=8,Promise.reject(e))},t.navigator.getDisplayMedia=function(e){return i.deprecated("navigator.getDisplayMedia","navigator.mediaDevices.getDisplayMedia"),t.navigator.mediaDevices.getDisplayMedia(e)})}}},{"../utils":14,"./getusermedia":12}],12:[function(e,t,n){"use strict";var h=e("../utils"),u=h.log;t.exports=function(e){function i(e,t,n){function i(i){var r;return"object"!=typeof i||i.require||(r=[],Object.keys(i).forEach(function(e){var t,n;"require"!==e&&"advanced"!==e&&"mediaSource"!==e&&(void 0===(t=i[e]="object"==typeof i[e]?i[e]:{ideal:i[e]}).min&&void 0===t.max&&void 0===t.exact||r.push(e),void 0!==t.exact&&("number"==typeof t.exact?t.min=t.max=t.exact:i[e]=t.exact,delete t.exact),void 0!==t.ideal)&&(i.advanced=i.advanced||[],n={},"number"==typeof t.ideal?n[e]={min:t.ideal,max:t.ideal}:n[e]=t.ideal,i.advanced.push(n),delete t.ideal,Object.keys(t).length||delete i[e])}),r.length&&(i.require=r)),i}return e=JSON.parse(JSON.stringify(e)),c.version<38&&(u("spec: "+JSON.stringify(e)),e.audio&&(e.audio=i(e.audio)),e.video&&(e.video=i(e.video)),u("ff37: "+JSON.stringify(e))),l.mozGetUserMedia(e,t,function(e){n(d(e))})}var t,n,r,o,s,a,c=h.detectBrowser(e),l=e&&e.navigator,e=e&&e.MediaStreamTrack,d=function(e){return{name:{InternalError:"NotReadableError",NotSupportedError:"TypeError",PermissionDeniedError:"NotAllowedError",SecurityError:"NotAllowedError"}[e.name]||e.name,message:{"The operation is insecure.":"The request is not allowed by the user agent or the platform in the current context."}[e.message]||e.message,constraint:e.constraint,toString:function(){return this.name+(this.message&&": ")+this.message}}};l.mediaDevices||(l.mediaDevices={getUserMedia:function(n){return new Promise(function(e,t){i(n,e,t)})},addEventListener:function(){},removeEventListener:function(){}}),l.mediaDevices.enumerateDevices=l.mediaDevices.enumerateDevices||function(){return new Promise(function(e){e([{kind:"audioinput",deviceId:"default",label:"",groupId:""},{kind:"videoinput",deviceId:"default",label:"",groupId:""}])})},c.version<41&&(t=l.mediaDevices.enumerateDevices.bind(l.mediaDevices),l.mediaDevices.enumerateDevices=function(){return t().then(void 0,function(e){if("NotFoundError"===e.name)return[];throw e})}),c.version<49&&(n=l.mediaDevices.getUserMedia.bind(l.mediaDevices),l.mediaDevices.getUserMedia=function(t){return n(t).then(function(e){if(t.audio&&!e.getAudioTracks().length||t.video&&!e.getVideoTracks().length)throw e.getTracks().forEach(function(e){e.stop()}),new DOMException("The object can not be found here.","NotFoundError");return e},function(e){return Promise.reject(d(e))})}),55<c.version&&"autoGainControl"in l.mediaDevices.getSupportedConstraints()||(r=function(e,t,n){t in e&&!(n in e)&&(e[n]=e[t],delete e[t])},o=l.mediaDevices.getUserMedia.bind(l.mediaDevices),l.mediaDevices.getUserMedia=function(e){return"object"==typeof e&&"object"==typeof e.audio&&(e=JSON.parse(JSON.stringify(e)),r(e.audio,"autoGainControl","mozAutoGainControl"),r(e.audio,"noiseSuppression","mozNoiseSuppression")),o(e)},e&&e.prototype.getSettings&&(s=e.prototype.getSettings,e.prototype.getSettings=function(){var e=s.apply(this,arguments);return r(e,"mozAutoGainControl","autoGainControl"),r(e,"mozNoiseSuppression","noiseSuppression"),e}),e&&e.prototype.applyConstraints&&(a=e.prototype.applyConstraints,e.prototype.applyConstraints=function(e){return"audio"===this.kind&&"object"==typeof e&&(e=JSON.parse(JSON.stringify(e)),r(e,"autoGainControl","mozAutoGainControl"),r(e,"noiseSuppression","mozNoiseSuppression")),a.apply(this,[e])})),l.getUserMedia=function(e,t,n){if(c.version<44)return i(e,t,n);h.deprecated("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),l.mediaDevices.getUserMedia(e).then(t,n)}}},{"../utils":14}],13:[function(e,t,n){"use strict";var s=e("../utils");t.exports={shimLocalStreamsAPI:function(e){var i;"object"==typeof e&&e.RTCPeerConnection&&("getLocalStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),"getStreamById"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getStreamById=function(t){var n=null;return this._localStreams&&this._localStreams.forEach(function(e){e.id===t&&(n=e)}),this._remoteStreams&&this._remoteStreams.forEach(function(e){e.id===t&&(n=e)}),n}),"addStream"in e.RTCPeerConnection.prototype||(i=e.RTCPeerConnection.prototype.addTrack,e.RTCPeerConnection.prototype.addStream=function(t){this._localStreams||(this._localStreams=[]),-1===this._localStreams.indexOf(t)&&this._localStreams.push(t);var n=this;t.getTracks().forEach(function(e){i.call(n,e,t)})},e.RTCPeerConnection.prototype.addTrack=function(e,t){return t&&(this._localStreams?-1===this._localStreams.indexOf(t)&&this._localStreams.push(t):this._localStreams=[t]),i.call(this,e,t)}),"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(e){this._localStreams||(this._localStreams=[]);var t,n,i=this._localStreams.indexOf(e);-1!==i&&(this._localStreams.splice(i,1),t=this,n=e.getTracks(),this.getSenders().forEach(function(e){-1!==n.indexOf(e.track)&&t.removeTrack(e)}))}))},shimRemoteStreamsAPI:function(e){var t;"object"==typeof e&&e.RTCPeerConnection&&("getRemoteStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams||[]}),"onaddstream"in e.RTCPeerConnection.prototype||(Object.defineProperty(e.RTCPeerConnection.prototype,"onaddstream",{get:function(){return this._onaddstream},set:function(e){this._onaddstream&&this.removeEventListener("addstream",this._onaddstream),this.addEventListener("addstream",this._onaddstream=e)}}),t=e.RTCPeerConnection.prototype.setRemoteDescription,e.RTCPeerConnection.prototype.setRemoteDescription=function(){var n=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(e){e.streams.forEach(function(e){var t;n._remoteStreams||(n._remoteStreams=[]),0<=n._remoteStreams.indexOf(e)||(n._remoteStreams.push(e),(t=new Event("addstream")).stream=e,n.dispatchEvent(t))})}),t.apply(n,arguments)}))},shimCallbacksAPI:function(e){var i,r,o,s,a;"object"==typeof e&&e.RTCPeerConnection&&(e=e.RTCPeerConnection.prototype,i=e.createOffer,r=e.createAnswer,o=e.setLocalDescription,s=e.setRemoteDescription,a=e.addIceCandidate,e.createOffer=function(e,t){var n=i.apply(this,[2<=arguments.length?arguments[2]:e]);return t?(n.then(e,t),Promise.resolve()):n},e.createAnswer=function(e,t){var n=r.apply(this,[2<=arguments.length?arguments[2]:e]);return t?(n.then(e,t),Promise.resolve()):n},e.setLocalDescription=function(e,t,n){e=o.apply(this,[e]);return n?(e.then(t,n),Promise.resolve()):e},e.setRemoteDescription=function(e,t,n){e=s.apply(this,[e]);return n?(e.then(t,n),Promise.resolve()):e},e.addIceCandidate=function(e,t,n){e=a.apply(this,[e]);return n?(e.then(t,n),Promise.resolve()):e})},shimGetUserMedia:function(e){var i=e&&e.navigator;i.getUserMedia||(i.webkitGetUserMedia?i.getUserMedia=i.webkitGetUserMedia.bind(i):i.mediaDevices&&i.mediaDevices.getUserMedia&&(i.getUserMedia=function(e,t,n){i.mediaDevices.getUserMedia(e).then(t,n)}.bind(i)))},shimRTCIceServerUrls:function(e){var o=e.RTCPeerConnection;e.RTCPeerConnection=function(e,t){if(e&&e.iceServers){for(var n=[],i=0;i<e.iceServers.length;i++){var r=e.iceServers[i];!r.hasOwnProperty("urls")&&r.hasOwnProperty("url")?(s.deprecated("RTCIceServer.url","RTCIceServer.urls"),(r=JSON.parse(JSON.stringify(r))).urls=r.url,delete r.url,n.push(r)):n.push(e.iceServers[i])}e.iceServers=n}return new o(e,t)},e.RTCPeerConnection.prototype=o.prototype,"generateCertificate"in e.RTCPeerConnection&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get:function(){return o.generateCertificate}})},shimTrackEventTransceiver:function(e){"object"==typeof e&&e.RTCPeerConnection&&"receiver"in e.RTCTrackEvent.prototype&&!e.RTCTransceiver&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})},shimCreateOfferLegacy:function(e){var i=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(e){var t,n=this;return e&&(void 0!==e.offerToReceiveAudio&&(e.offerToReceiveAudio=!!e.offerToReceiveAudio),t=n.getTransceivers().find(function(e){return e.sender.track&&"audio"===e.sender.track.kind}),!1===e.offerToReceiveAudio&&t?"sendrecv"===t.direction?t.setDirection?t.setDirection("sendonly"):t.direction="sendonly":"recvonly"===t.direction&&(t.setDirection?t.setDirection("inactive"):t.direction="inactive"):!0!==e.offerToReceiveAudio||t||n.addTransceiver("audio"),void 0!==e.offerToReceiveVideo&&(e.offerToReceiveVideo=!!e.offerToReceiveVideo),t=n.getTransceivers().find(function(e){return e.sender.track&&"video"===e.sender.track.kind}),!1===e.offerToReceiveVideo&&t?"sendrecv"===t.direction?t.setDirection("sendonly"):"recvonly"===t.direction&&t.setDirection("inactive"):!0!==e.offerToReceiveVideo||t||n.addTransceiver("video")),i.apply(n,arguments)}}}},{"../utils":14}],14:[function(e,t,n){"use strict";var i=!0,r=!0;function o(e,t,n){e=e.match(t);return e&&e.length>=n&&parseInt(e[n],10)}t.exports={extractVersion:o,wrapPeerConnectionEvent:function(e,i,r){var o,s;e.RTCPeerConnection&&(e=e.RTCPeerConnection.prototype,o=e.addEventListener,e.addEventListener=function(e,t){var n;return e!==i?o.apply(this,arguments):(n=function(e){e=r(e);e&&t(e)},this._eventMap=this._eventMap||{},this._eventMap[t]=n,o.apply(this,[e,n]))},s=e.removeEventListener,e.removeEventListener=function(e,t){var n;return e===i&&this._eventMap&&this._eventMap[t]?(n=this._eventMap[t],delete this._eventMap[t],s.apply(this,[e,n])):s.apply(this,arguments)},Object.defineProperty(e,"on"+i,{get:function(){return this["_on"+i]},set:function(e){this["_on"+i]&&(this.removeEventListener(i,this["_on"+i]),delete this["_on"+i]),e&&this.addEventListener(i,this["_on"+i]=e)},enumerable:!0,configurable:!0}))},disableLog:function(e){return"boolean"!=typeof e?new Error("Argument type: "+typeof e+". Please use a boolean."):(i=e)?"adapter.js logging disabled":"adapter.js logging enabled"},disableWarnings:function(e){return"boolean"!=typeof e?new Error("Argument type: "+typeof e+". Please use a boolean."):(r=!e,"adapter.js deprecation warnings "+(e?"disabled":"enabled"))},log:function(){"object"!=typeof window||i||"undefined"!=typeof console&&"function"==typeof console.log&&console.log.apply(console,arguments)},deprecated:function(e,t){r&&console.warn(e+" is deprecated, please use "+t+" instead.")},detectBrowser:function(e){var t=e&&e.navigator,n={browser:null,version:null};if(void 0!==e&&e.navigator)if(t.mozGetUserMedia)n.browser="firefox",n.version=o(t.userAgent,/Firefox\/(\d+)\./,1);else if(t.webkitGetUserMedia)n.browser="chrome",n.version=o(t.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(t.mediaDevices&&t.userAgent.match(/Edge\/(\d+).(\d+)$/))n.browser="edge",n.version=o(t.userAgent,/Edge\/(\d+).(\d+)$/,2);else{if(!e.RTCPeerConnection||!t.userAgent.match(/AppleWebKit\/(\d+)\./))return n.browser="Not a supported browser.",n;n.browser="safari",n.version=o(t.userAgent,/AppleWebKit\/(\d+)\./,1)}else n.browser="Not a browser.";return n}}},{}]},{},[3])(3)}),function(){window.WebComponents=window.WebComponents||{flags:{}};var e,t=document.querySelector('script[src*="webcomponents-lite.js"]'),n={};if(!n.noOpts){if(location.search.slice(1).split("&").forEach(function(e){var t,e=e.split("=");e[0]&&(t=e[0].match(/wc-(.+)/))&&(n[t[1]]=e[1]||!0)}),t)for(var i,r=0;i=t.attributes[r];r++)"src"!==i.name&&(n[i.name]=i.value||!0);n.log&&n.log.split?(e=n.log.split(","),n.log={},e.forEach(function(e){n.log[e]=!0})):n.log={}}n.register&&(window.CustomElements=window.CustomElements||{flags:{}},window.CustomElements.flags.register=n.register),WebComponents.flags=n}(),function(e){"use strict";var y,v,g,b,C,t,n=!1;if(!e.forceJURL)try{var i=new URL("b","http://a");i.pathname="c%20d",n="http://a/c%20d"===i.href}catch(e){}function P(e){return void 0!==y[e]}function S(){o.call(this),this._isInvalid=!0}function E(e){return""==e&&S.call(this),e.toLowerCase()}function T(e){var t=e.charCodeAt(0);return 32<t&&t<127&&-1==[34,35,60,62,63,96].indexOf(t)?e:encodeURIComponent(e)}function r(e,t,n){function i(e){h.push(e)}var r,o,s=t||"scheme start",a=0,c="",l=!1,d=!1,h=[];e:for(;(e[a-1]!=g||0==a)&&!this._isInvalid;){var u=e[a];switch(s){case"scheme start":if(!u||!b.test(u)){if(t){i("Invalid scheme.");break e}c="",s="no scheme";continue}c+=u.toLowerCase(),s="scheme";break;case"scheme":if(u&&C.test(u))c+=u.toLowerCase();else{if(":"!=u){if(t){if(g==u)break e;i("Code point not allowed in scheme: "+u);break e}c="",a=0,s="no scheme";continue}if(this._scheme=c,c="",t)break e;P(this._scheme)&&(this._isRelative=!0),s="file"==this._scheme?"relative":this._isRelative&&n&&n._scheme==this._scheme?"relative or authority":this._isRelative?"authority first slash":"scheme data"}break;case"scheme data":"?"==u?(this._query="?",s="query"):"#"==u?(this._fragment="#",s="fragment"):g!=u&&"\t"!=u&&"\n"!=u&&"\r"!=u&&(this._schemeData+=T(u));break;case"no scheme":if(n&&P(n._scheme)){s="relative";continue}i("Missing scheme."),S.call(this);break;case"relative or authority":if("/"!=u||"/"!=e[a+1]){i("Expected /, got: "+u),s="relative";continue}s="authority ignore slashes";break;case"relative":if(this._isRelative=!0,"file"!=this._scheme&&(this._scheme=n._scheme),g==u){this._host=n._host,this._port=n._port,this._path=n._path.slice(),this._query=n._query,this._username=n._username,this._password=n._password;break e}if("/"==u||"\\"==u)"\\"==u&&i("\\ is an invalid code point."),s="relative slash";else if("?"==u)this._host=n._host,this._port=n._port,this._path=n._path.slice(),this._query="?",this._username=n._username,this._password=n._password,s="query";else{if("#"!=u){var p=e[a+1],f=e[a+2];("file"!=this._scheme||!b.test(u)||":"!=p&&"|"!=p||g!=f&&"/"!=f&&"\\"!=f&&"?"!=f&&"#"!=f)&&(this._host=n._host,this._port=n._port,this._username=n._username,this._password=n._password,this._path=n._path.slice(),this._path.pop()),s="relative path";continue}this._host=n._host,this._port=n._port,this._path=n._path.slice(),this._query=n._query,this._fragment="#",this._username=n._username,this._password=n._password,s="fragment"}break;case"relative slash":if("/"!=u&&"\\"!=u){"file"!=this._scheme&&(this._host=n._host,this._port=n._port,this._username=n._username,this._password=n._password),s="relative path";continue}"\\"==u&&i("\\ is an invalid code point."),s="file"==this._scheme?"file host":"authority ignore slashes";break;case"authority first slash":if("/"!=u){i("Expected '/', got: "+u),s="authority ignore slashes";continue}s="authority second slash";break;case"authority second slash":if(s="authority ignore slashes","/"==u)break;i("Expected '/', got: "+u);continue;case"authority ignore slashes":if("/"!=u&&"\\"!=u){s="authority";continue}i("Expected authority, got: "+u);break;case"authority":if("@"==u){l&&(i("@ already seen."),c+="%40");for(var l=!0,m=0;m<c.length;m++){var _=c[m];"\t"==_||"\n"==_||"\r"==_?i("Invalid whitespace in authority."):":"==_&&null===this._password?this._password="":(_=T(_),null!==this._password?this._password+=_:this._username+=_)}c=""}else{if(g==u||"/"==u||"\\"==u||"?"==u||"#"==u){a-=c.length,c="",s="host";continue}c+=u}break;case"file host":if(g==u||"/"==u||"\\"==u||"?"==u||"#"==u){s=2!=c.length||!b.test(c[0])||":"!=c[1]&&"|"!=c[1]?(0==c.length||(this._host=E.call(this,c),c=""),"relative path start"):"relative path";continue}"\t"==u||"\n"==u||"\r"==u?i("Invalid whitespace in file host."):c+=u;break;case"host":case"hostname":if(":"!=u||d){if(g==u||"/"==u||"\\"==u||"?"==u||"#"==u){if(this._host=E.call(this,c),c="",s="relative path start",t)break e;continue}"\t"!=u&&"\n"!=u&&"\r"!=u?("["==u?d=!0:"]"==u&&(d=!1),c+=u):i("Invalid code point in host/hostname: "+u)}else if(this._host=E.call(this,c),c="",s="port","hostname"==t)break e;break;case"port":if(/[0-9]/.test(u))c+=u;else{if(g==u||"/"==u||"\\"==u||"?"==u||"#"==u||t){if(""!=c&&((p=parseInt(c,10))!=y[this._scheme]&&(this._port=p+""),c=""),t)break e;s="relative path start";continue}"\t"==u||"\n"==u||"\r"==u?i("Invalid code point in port: "+u):S.call(this)}break;case"relative path start":if("\\"==u&&i("'\\' not allowed in path."),s="relative path","/"!=u&&"\\"!=u)continue;break;case"relative path":g!=u&&"/"!=u&&"\\"!=u&&(t||"?"!=u&&"#"!=u)?"\t"!=u&&"\n"!=u&&"\r"!=u&&(c+=T(u)):("\\"==u&&i("\\ not allowed in relative path."),".."==(c=(f=v[c.toLowerCase()])?f:c)?(this._path.pop(),"/"!=u&&"\\"!=u&&this._path.push("")):"."==c&&"/"!=u&&"\\"!=u?this._path.push(""):"."!=c&&("file"==this._scheme&&0==this._path.length&&2==c.length&&b.test(c[0])&&"|"==c[1]&&(c=c[0]+":"),this._path.push(c)),c="","?"==u?(this._query="?",s="query"):"#"==u&&(this._fragment="#",s="fragment"));break;case"query":t||"#"!=u?g!=u&&"\t"!=u&&"\n"!=u&&"\r"!=u&&(this._query+=(o=void 0,32<(o=(r=u).charCodeAt(0))&&o<127&&-1==[34,35,60,62,96].indexOf(o)?r:encodeURIComponent(r))):(this._fragment="#",s="fragment");break;case"fragment":g!=u&&"\t"!=u&&"\n"!=u&&"\r"!=u&&(this._fragment+=u)}a++}}function o(){this._scheme="",this._schemeData="",this._username="",this._password=null,this._host="",this._port="",this._path=[],this._query="",this._fragment="",this._isInvalid=!1,this._isRelative=!1}function s(e,t){void 0===t||t instanceof s||(t=new s(String(t))),this._url=e,o.call(this);e=e.replace(/^[ \t\r\n\f]+|[ \t\r\n\f]+$/g,"");r.call(this,e,null,t)}n||((y=Object.create(null)).ftp=21,y.file=0,y.gopher=70,y.http=80,y.https=443,y.ws=80,y.wss=443,(v=Object.create(null))["%2e"]=".",v[".%2e"]="..",v["%2e."]="..",g=void(v["%2e%2e"]=".."),b=/[a-zA-Z]/,C=/[a-zA-Z0-9\+\-\.]/,s.prototype={toString:function(){return this.href},get href(){var e;return this._isInvalid?this._url:((e="")==this._username&&null==this._password||(e=this._username+(null!=this._password?":"+this._password:"")+"@"),this.protocol+(this._isRelative?"//"+e+this.host:"")+this.pathname+this._query+this._fragment)},set href(e){o.call(this),r.call(this,e)},get protocol(){return this._scheme+":"},set protocol(e){this._isInvalid||r.call(this,e+":","scheme start")},get host(){return this._isInvalid?"":this._port?this._host+":"+this._port:this._host},set host(e){!this._isInvalid&&this._isRelative&&r.call(this,e,"host")},get hostname(){return this._host},set hostname(e){!this._isInvalid&&this._isRelative&&r.call(this,e,"hostname")},get port(){return this._port},set port(e){!this._isInvalid&&this._isRelative&&r.call(this,e,"port")},get pathname(){return this._isInvalid?"":this._isRelative?"/"+this._path.join("/"):this._schemeData},set pathname(e){!this._isInvalid&&this._isRelative&&(this._path=[],r.call(this,e,"relative path start"))},get search(){return this._isInvalid||!this._query||"?"==this._query?"":this._query},set search(e){!this._isInvalid&&this._isRelative&&((this._query="?")==e[0]&&(e=e.slice(1)),r.call(this,e,"query"))},get hash(){return this._isInvalid||!this._fragment||"#"==this._fragment?"":this._fragment},set hash(e){this._isInvalid||((this._fragment="#")==e[0]&&(e=e.slice(1)),r.call(this,e,"fragment"))},get origin(){var e;if(this._isInvalid||!this._scheme)return"";switch(this._scheme){case"data":case"file":case"javascript":case"mailto":return"null"}return(e=this.host)?this._scheme+"://"+e:""}},(t=e.URL)&&(s.createObjectURL=function(e){return t.createObjectURL.apply(t,arguments)},s.revokeObjectURL=function(e){t.revokeObjectURL(e)}),e.URL=s)}(self),"undefined"==typeof WeakMap&&function(){function e(){this.name="__st"+(1e9*Math.random()>>>0)+t+++"__"}var i=Object.defineProperty,t=Date.now()%1e9;e.prototype={set:function(e,t){var n=e[this.name];return n&&n[0]===e?n[1]=t:i(e,this.name,{value:[e,t],writable:!0}),this},get:function(e){var t;return(t=e[this.name])&&t[0]===e?t[1]:void 0},delete:function(e){var t=e[this.name];return!(!t||t[0]!==e||(t[0]=t[1]=void 0))},has:function(e){var t=e[this.name];return!!t&&t[0]===e}},window.WeakMap=e}(),function(e){var a,t,n,r,o,s,i,l,d;function c(){o=!1;var e=s,i=(s=[],e.sort(function(e,t){return e.uid_-t.uid_}),!1);e.forEach(function(e){var t,n=e.takeRecords();(t=e).nodes_.forEach(function(e){e=a.get(e);e&&e.forEach(function(e){e.observer===t&&e.removeTransientObservers()})}),n.length&&(e.callback_(n,e),i=!0)}),i&&c()}function h(e,t){for(var n=e;n;n=n.parentNode){var i=a.get(n);if(i)for(var r=0;r<i.length;r++){var o=i[r],s=o.options;(n===e||s.subtree)&&(s=t(s))&&o.enqueue(s)}}}function u(e){this.callback_=e,this.nodes_=[],this.records_=[],this.uid_=++i}function p(e,t){this.type=e,this.target=t,this.addedNodes=[],this.removedNodes=[],this.previousSibling=null,this.nextSibling=null,this.attributeName=null,this.attributeNamespace=null,this.oldValue=null}function f(e,t){return l=new p(e,t)}function m(e){var t,n;return d||((n=new p((t=l).type,t.target)).addedNodes=t.addedNodes.slice(),n.removedNodes=t.removedNodes.slice(),n.previousSibling=t.previousSibling,n.nextSibling=t.nextSibling,n.attributeName=t.attributeName,n.attributeNamespace=t.attributeNamespace,n.oldValue=t.oldValue,(d=n).oldValue=e),d}function _(e,t){return e===t?e:!d||(t=e)!==d&&t!==l?null:d}function y(e,t,n){this.observer=e,this.target=t,this.options=n,this.transientObservedNodes=[]}e.JsMutationObserver||(a=new WeakMap,r=/Trident|Edge/.test(navigator.userAgent)?setTimeout:window.setImmediate||(t=[],n=String(Math.random()),window.addEventListener("message",function(e){e.data===n&&(e=t,t=[],e.forEach(function(e){e()}))}),function(e){t.push(e),window.postMessage(n,"*")}),o=!1,s=[],i=0,u.prototype={observe:function(e,t){var n;if(n=e,e=window.ShadowDOMPolyfill&&window.ShadowDOMPolyfill.wrapIfNeeded(n)||n,!t.childList&&!t.attributes&&!t.characterData||t.attributeOldValue&&!t.attributes||t.attributeFilter&&t.attributeFilter.length&&!t.attributes||t.characterDataOldValue&&!t.characterData)throw new SyntaxError;var i,r=a.get(e);r||a.set(e,r=[]);for(var o=0;o<r.length;o++)if(r[o].observer===this){(i=r[o]).removeListeners(),i.options=t;break}i||(i=new y(this,e,t),r.push(i),this.nodes_.push(e)),i.addListeners()},disconnect:function(){this.nodes_.forEach(function(e){for(var t=a.get(e),n=0;n<t.length;n++){var i=t[n];if(i.observer===this){i.removeListeners(),t.splice(n,1);break}}},this),this.records_=[]},takeRecords:function(){var e=this.records_;return this.records_=[],e}},y.prototype={enqueue:function(e){var t=this.observer.records_,n=t.length;if(0<t.length){var i=_(t[n-1],e);if(i)return void(t[n-1]=i)}else i=this.observer,s.push(i),o||(o=!0,r(c));t[n]=e},addListeners:function(){this.addListeners_(this.target)},addListeners_:function(e){var t=this.options;t.attributes&&e.addEventListener("DOMAttrModified",this,!0),t.characterData&&e.addEventListener("DOMCharacterDataModified",this,!0),t.childList&&e.addEventListener("DOMNodeInserted",this,!0),(t.childList||t.subtree)&&e.addEventListener("DOMNodeRemoved",this,!0)},removeListeners:function(){this.removeListeners_(this.target)},removeListeners_:function(e){var t=this.options;t.attributes&&e.removeEventListener("DOMAttrModified",this,!0),t.characterData&&e.removeEventListener("DOMCharacterDataModified",this,!0),t.childList&&e.removeEventListener("DOMNodeInserted",this,!0),(t.childList||t.subtree)&&e.removeEventListener("DOMNodeRemoved",this,!0)},addTransientObserver:function(e){var t;e!==this.target&&(this.addListeners_(e),this.transientObservedNodes.push(e),(t=a.get(e))||a.set(e,t=[]),t.push(this))},removeTransientObservers:function(){var e=this.transientObservedNodes;this.transientObservedNodes=[],e.forEach(function(e){this.removeListeners_(e);for(var t=a.get(e),n=0;n<t.length;n++)if(t[n]===this){t.splice(n,1);break}},this)},handleEvent:function(e){switch(e.stopImmediatePropagation(),e.type){case"DOMAttrModified":var t=e.attrName,n=e.relatedNode.namespaceURI,i=e.target,r=((o=new f("attributes",i)).attributeName=t,o.attributeNamespace=n,e.attrChange===MutationEvent.ADDITION?null:e.prevValue);h(i,function(e){if(e.attributes&&(!e.attributeFilter||!e.attributeFilter.length||-1!==e.attributeFilter.indexOf(t)||-1!==e.attributeFilter.indexOf(n)))return e.attributeOldValue?m(r):o});break;case"DOMCharacterDataModified":var o=f("characterData",i=e.target),r=e.prevValue;h(i,function(e){if(e.characterData)return e.characterDataOldValue?m(r):o});break;case"DOMNodeRemoved":this.addTransientObserver(e.target);case"DOMNodeInserted":var s,i=e.target,a="DOMNodeInserted"===e.type?(s=[i],[]):(s=[],[i]),c=i.previousSibling,i=i.nextSibling;(o=f("childList",e.target.parentNode)).addedNodes=s,o.removedNodes=a,o.previousSibling=c,o.nextSibling=i,h(e.relatedNode,function(e){if(e.childList)return o})}l=d=void 0}},e.JsMutationObserver=u,e.MutationObserver)||((e.MutationObserver=u)._isPolyfilled=!0)}(self),function(){function o(){}var n,i,r,e,t,s,a,c,l,d="undefined"==typeof HTMLTemplateElement,h=(/Trident/.test(navigator.userAgent)&&(n=document.importNode,document.importNode=function(){var e,t=n.apply(document,arguments);return t.nodeType===Node.DOCUMENT_FRAGMENT_NODE?((e=document.createDocumentFragment()).appendChild(t),e):t}),function(){var e,t;if(!d)return e=document.createElement("template"),(t=document.createElement("template")).content.appendChild(document.createElement("div")),e.content.appendChild(t),0===(t=e.cloneNode(!0)).content.childNodes.length||0===t.content.firstChild.content.childNodes.length}()),u="template";function p(e){switch(e){case"&":return"&amp;";case"<":return"&lt;";case">":return"&gt;";case" ":return"&nbsp;"}}d&&(i=document.implementation.createHTMLDocument("template"),r=!0,(e=document.createElement("style")).textContent=u+"{display:none;}",(t=document.head).insertBefore(e,t.firstElementChild),o.prototype=Object.create(HTMLElement.prototype),o.decorate=function(e){if(!e.content){var t;for(e.content=i.createDocumentFragment();t=e.firstChild;)e.content.appendChild(t);if(e.cloneNode=function(e){return o.cloneNode(this,e)},r)try{Object.defineProperty(e,"innerHTML",{get:function(){for(var e="",t=this.content.firstChild;t;t=t.nextSibling)e+=t.outerHTML||t.data.replace(a,p);return e},set:function(e){for(i.body.innerHTML=e,o.bootstrap(i);this.content.firstChild;)this.content.removeChild(this.content.firstChild);for(;i.body.firstChild;)this.content.appendChild(i.body.firstChild)},configurable:!0})}catch(e){r=!1}o.bootstrap(e.content)}},o.bootstrap=function(e){for(var t,n=e.querySelectorAll(u),i=0,r=n.length;i<r&&(t=n[i]);i++)o.decorate(t)},document.addEventListener("DOMContentLoaded",function(){o.bootstrap(document)}),s=document.createElement,document.createElement=function(){"use strict";var e=s.apply(document,arguments);return"template"===e.localName&&o.decorate(e),e},a=/[&\u00A0<>]/g),(d||h)&&(c=Node.prototype.cloneNode,o.cloneNode=function(e,t){var n=c.call(e,!1);return this.decorate&&this.decorate(n),t&&(n.content.appendChild(c.call(e.content,!0)),this.fixClonedDom(n.content,e.content)),n},o.fixClonedDom=function(e,t){if(t.querySelectorAll)for(var n,i,r=t.querySelectorAll(u),o=e.querySelectorAll(u),s=0,a=o.length;s<a;s++)i=r[s],n=o[s],this.decorate&&this.decorate(i),n.parentNode.replaceChild(i.cloneNode(!0),n)},l=document.importNode,Node.prototype.cloneNode=function(e){var t=c.call(this,e);return e&&o.fixClonedDom(t,this),t},document.importNode=function(e,t){var n;return e.localName===u?o.cloneNode(e,t):(n=l.call(document,e,t),t&&o.fixClonedDom(n,e),n)},h)&&(HTMLTemplateElement.prototype.cloneNode=function(e){return o.cloneNode(this,e)}),d&&(window.HTMLTemplateElement=o)}(),function(){"use strict";var e,t;window.performance&&window.performance.now||(e=Date.now(),window.performance={now:function(){return Date.now()-e}}),window.requestAnimationFrame||(window.requestAnimationFrame=(t=window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame)?function(e){return t(function(){e(performance.now())})}:function(e){return window.setTimeout(e,1e3/60)}),window.cancelAnimationFrame||(window.cancelAnimationFrame=window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||function(e){clearTimeout(e)}),(i=document.createEvent("Event")).initEvent("foo",!0,!0),i.preventDefault();i.defaultPrevented||(n=Event.prototype.preventDefault,Event.prototype.preventDefault=function(){this.cancelable&&(n.call(this),Object.defineProperty(this,"defaultPrevented",{get:function(){return!0},configurable:!0}))});var n,i=/Trident/.test(navigator.userAgent);(!window.CustomEvent||i&&"function"!=typeof window.CustomEvent)&&(window.CustomEvent=function(e,t){t=t||{};var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,Boolean(t.bubbles),Boolean(t.cancelable),t.detail),n},window.CustomEvent.prototype=window.Event.prototype),(!window.Event||i&&"function"!=typeof window.Event)&&(i=window.Event,window.Event=function(e,t){t=t||{};var n=document.createEvent("Event");return n.initEvent(e,Boolean(t.bubbles),Boolean(t.cancelable)),n},window.Event.prototype=i.prototype)}(window.WebComponents),window.HTMLImports=window.HTMLImports||{flags:{}},function(e){function t(e){return n?window.ShadowDOMPolyfill.wrapIfNeeded(e):e}var u=Boolean("import"in document.createElement("link")),n=Boolean(window.ShadowDOMPolyfill),i=t(document),r={get:function(){var e=window.HTMLImports.currentScript||document.currentScript||("complete"!==document.readyState?document.scripts[document.scripts.length-1]:null);return t(e)},configurable:!0},r=(Object.defineProperty(document,"_currentScript",r),Object.defineProperty(i,"_currentScript",r),/Trident/.test(navigator.userAgent));function o(e,t){!function e(t,n){{var i;c(n)?t&&t():(i=function(){"complete"!==n.readyState&&n.readyState!==s||(n.removeEventListener(a,i),e(t,n))},n.addEventListener(a,i))}}(function(){!function(e,t){var n=t.querySelectorAll("link[rel=import]"),i=0,r=n.length,o=[],s=[];function a(){i==r&&e&&e({allImports:n,loadedImports:o,errorImports:s})}function c(e){p(e),o.push(this),i++,a()}function l(e){s.push(this),i++,a()}if(r)for(var d,h=0;h<r&&(d=n[h]);h++)!function(e){return u?e.__loaded||e.import&&"loading"!==e.import.readyState:e.__importParsed}(d)?(d.addEventListener("load",c),d.addEventListener("error",l)):(o.push(this),i++,a());else a()}(e,t)},t=t||i)}var s=r?"complete":"interactive",a="readystatechange";function c(e){return"complete"===e.readyState||e.readyState===s}function p(e){e.target.__loaded=!0}if(u){function l(e){e.import?p({target:e}):(e.addEventListener("load",p),e.addEventListener("error",p))}if(new MutationObserver(function(e){for(var t,n=0,i=e.length;n<i&&(t=e[n]);n++)if(t.addedNodes){r=a=s=o=void 0;for(var r,o=t.addedNodes,s=0,a=o.length;s<a&&(r=o[s]);s++)!function(e){return"link"===e.localName&&"import"===e.rel}(r)||l(r)}}).observe(document.head,{childList:!0}),"loading"===document.readyState)for(var d,h=document.querySelectorAll("link[rel=import]"),f=0,m=h.length;f<m&&(d=h[f]);f++)l(d)}o(function(e){window.HTMLImports.ready=!0,window.HTMLImports.readyTime=(new Date).getTime();var t=i.createEvent("CustomEvent");t.initCustomEvent("HTMLImportsLoaded",!0,!0,e),i.dispatchEvent(t)}),e.IMPORT_LINK_TYPE="import",e.useNative=u,e.rootDocument=i,e.whenReady=o,e.isIE=r}(window.HTMLImports),function(t){var n=[];t.addModule=function(e){n.push(e)},t.initializeModules=function(){n.forEach(function(e){e(t)})}}(window.HTMLImports),window.HTMLImports.addModule(function(e){var i=/(url\()([^)]*)(\))/g,r=/(@import[\s]+(?!url\())([^;]*)(;)/g;e.path={resolveUrlsInStyle:function(e,t){var n=e.ownerDocument.createElement("a");return e.textContent=this.resolveUrlsInCssText(e.textContent,t,n),e},resolveUrlsInCssText:function(e,t,n){e=this.replaceUrls(e,n,t,i);return this.replaceUrls(e,n,t,r)},replaceUrls:function(e,r,o,t){return e.replace(t,function(e,t,n,i){n=n.replace(/["']/g,"");return o&&(n=new URL(n,o).href),r.href=n,t+"'"+(n=r.href)+"'"+i})}}}),window.HTMLImports.addModule(function(t){var s={async:!0,ok:function(e){return 200<=e.status&&e.status<300||304===e.status||0===e.status},load:function(e,i,r){var o=new XMLHttpRequest;return(t.flags.debug||t.flags.bust)&&(e+="?"+Math.random()),o.open("GET",e,s.async),o.addEventListener("readystatechange",function(e){if(4===o.readyState){var t=null;try{var n=o.getResponseHeader("Location");n&&(t="/"===n.substr(0,1)?location.origin+n:n)}catch(e){console.error(e.message)}i.call(r,!s.ok(o)&&o,o.response||o.responseText,t)}}),o.send(),o},loadDocument:function(e,t,n){this.load(e,t,n).responseType="document"}};t.xhr=s}),window.HTMLImports.addModule(function(e){function t(e,t){this.cache={},this.onload=e,this.oncomplete=t,this.inflight=0,this.pending={}}var o=e.xhr,s=e.flags;t.prototype={addNodes:function(e){this.inflight+=e.length;for(var t,n=0,i=e.length;n<i&&(t=e[n]);n++)this.require(t);this.checkDone()},addNode:function(e){this.inflight++,this.require(e),this.checkDone()},require:function(e){var t=e.src||e.href;e.__nodeUrl=t,this.dedupe(t,e)||this.fetch(t,e)},dedupe:function(e,t){return this.pending[e]?(this.pending[e].push(t),!0):this.cache[e]?(this.onload(e,t,this.cache[e]),this.tail(),!0):!(this.pending[e]=[t])},fetch:function(i,r){var e,t,n;s.load&&console.log("fetch",i,r),i?i.match(/^data:/)?(e=(n=i.split(","))[0],t=n[1],t=(-1<e.indexOf(";base64")?atob:decodeURIComponent)(t),setTimeout(function(){this.receive(i,r,null,t)}.bind(this),0)):(n=function(e,t,n){this.receive(i,r,e,t,n)}.bind(this),o.load(i,n)):setTimeout(function(){this.receive(i,r,{error:"href must be specified"},null)}.bind(this),0)},receive:function(e,t,n,i,r){this.cache[e]=i;for(var o,s=this.pending[e],a=0,c=s.length;a<c&&(o=s[a]);a++)this.onload(e,o,i,n,r),this.tail();this.pending[e]=null},tail:function(){--this.inflight,this.checkDone()},checkDone:function(){this.inflight||this.oncomplete()}},e.Loader=t}),window.HTMLImports.addModule(function(e){function t(e){this.addCallback=e,this.mo=new MutationObserver(this.handler.bind(this))}t.prototype={handler:function(e){for(var t,n=0,i=e.length;n<i&&(t=e[n]);n++)"childList"===t.type&&t.addedNodes.length&&this.addedNodes(t.addedNodes)},addedNodes:function(e){this.addCallback&&this.addCallback(e);for(var t,n=0,i=e.length;n<i&&(t=e[n]);n++)t.children&&t.children.length&&this.addedNodes(t.children)},observe:function(e){this.mo.observe(e,{childList:!0,subtree:!0})}},e.Observer=t}),window.HTMLImports.addModule(function(n){var r=n.path,t=n.rootDocument,i=n.flags,l=n.isIE,o=n.IMPORT_LINK_TYPE,e="link[rel="+o+"]",s={documentSelectors:e,importsSelectors:[e,"link[rel=stylesheet]:not([type])","style:not([type])","script:not([type])",'script[type="application/javascript"]','script[type="text/javascript"]'].join(","),map:{link:"parseLink",script:"parseScript",style:"parseStyle"},dynamicElements:[],parseNext:function(){var e=this.nextToParse();e&&this.parse(e)},parse:function(e){var t;this.isParsed(e)?i.parse&&console.log("[%s] is already parsed",e.localName):(t=this[this.map[e.localName]])&&(this.markParsing(e),t.call(this,e))},parseDynamic:function(e,t){this.dynamicElements.push(e),t||this.parseNext()},markParsing:function(e){i.parse&&console.log("parsing",e),this.parsingElement=e},markParsingComplete:function(e){e.__importParsed=!0,this.markDynamicParsingComplete(e),e.__importElement&&(e.__importElement.__importParsed=!0,this.markDynamicParsingComplete(e.__importElement)),this.parsingElement=null,i.parse&&console.log("completed",e)},markDynamicParsingComplete:function(e){e=this.dynamicElements.indexOf(e);0<=e&&this.dynamicElements.splice(e,1)},parseImport:function(e){if(e.import=e.__doc,window.HTMLImports.__importsParsingHook&&window.HTMLImports.__importsParsingHook(e),e.import&&(e.import.__importParsed=!0),this.markParsingComplete(e),e.__resource&&!e.__error?e.dispatchEvent(new CustomEvent("load",{bubbles:!1})):e.dispatchEvent(new CustomEvent("error",{bubbles:!1})),e.__pending)for(var t;e.__pending.length;)(t=e.__pending.shift())&&t({target:e});this.parseNext()},parseLink:function(e){a(e)?this.parseImport(e):(e.href=e.href,this.parseGeneric(e))},parseStyle:function(e){var t,n,i=e;(n=(t=e).ownerDocument.createElement("style")).textContent=t.textContent,r.resolveUrlsInStyle(n),e=n,(i.__appliedElement=e).__importElement=i,this.parseGeneric(e)},parseGeneric:function(e){this.trackElement(e),this.addElementToDocument(e)},rootImportForElement:function(e){for(var t=e;t.ownerDocument.__importLink;)t=t.ownerDocument.__importLink;return t},addElementToDocument:function(e){var t=this.rootImportForElement(e.__importElement||e);t.parentNode.insertBefore(e,t)},trackElement:function(t,n){function i(e){t.removeEventListener("load",i),t.removeEventListener("error",i),n&&n(e),r.markParsingComplete(t),r.parseNext()}var r=this;if(t.addEventListener("load",i),t.addEventListener("error",i),l&&"style"===t.localName){var e=!1;if(-1==t.textContent.indexOf("@import"))e=!0;else if(t.sheet)for(var o,e=!0,s=t.sheet.cssRules,a=s?s.length:0,c=0;c<a&&(o=s[c]);c++)o.type===CSSRule.IMPORT_RULE&&(e=e&&Boolean(o.styleSheet));e&&setTimeout(function(){t.dispatchEvent(new CustomEvent("load",{bubbles:!1}))})}},parseScript:function(e){var t=document.createElement("script");t.__importElement=e,t.src=e.src||function(e){e=function(e){return e.textContent+function(e){var t=e.ownerDocument,e=(t.__importedScripts=t.__importedScripts||0,e.ownerDocument.baseURI),n=t.__importedScripts?"-"+t.__importedScripts:"";return t.__importedScripts++,"\n//# sourceURL="+e+n+".js\n"}(e)}(e);return"data:text/javascript;charset=utf-8,"+encodeURIComponent(e)}(e),n.currentScript=e,this.trackElement(t,function(e){t.parentNode&&t.parentNode.removeChild(t),n.currentScript=null}),this.addElementToDocument(t)},nextToParse:function(){return this._mayParse=[],!this.parsingElement&&(this.nextToParseInDoc(t)||this.nextToParseDynamic())},nextToParseInDoc:function(e,t){if(e&&this._mayParse.indexOf(e)<0){this._mayParse.push(e);for(var n,i=e.querySelectorAll(this.parseSelectorsForNode(e)),r=0,o=i.length;r<o&&(n=i[r]);r++)if(!this.isParsed(n))return this.hasResource(n)?a(n)?this.nextToParseInDoc(n.__doc,n):n:void 0}return t},nextToParseDynamic:function(){return this.dynamicElements[0]},parseSelectorsForNode:function(e){return(e.ownerDocument||e)===t?this.documentSelectors:this.importsSelectors},isParsed:function(e){return e.__importParsed},needsDynamicParsing:function(e){return 0<=this.dynamicElements.indexOf(e)},hasResource:function(e){return!a(e)||void 0!==e.__doc}};function a(e){return"link"===e.localName&&e.rel===o}n.parser=s,n.IMPORT_SELECTOR=e}),window.HTMLImports.addModule(function(e){var s=e.flags,a=e.IMPORT_LINK_TYPE,t=e.IMPORT_SELECTOR,n=e.rootDocument,i=e.Loader,r=e.Observer,c=e.parser,t={documents:{},documentPreloadSelectors:t,importsPreloadSelectors:[t].join(","),loadNode:function(e){o.addNode(e)},loadSubtree:function(e){e=this.marshalNodes(e);o.addNodes(e)},marshalNodes:function(e){return e.querySelectorAll(this.loadSelectorsForNode(e))},loadSelectorsForNode:function(e){return(e.ownerDocument||e)===n?this.documentPreloadSelectors:this.importsPreloadSelectors},loaded:function(e,t,n,i,r){var o;s.load&&console.log("loaded",e,t),t.__resource=n,t.__error=i,function(e,t){return"link"===e.localName&&e.getAttribute("rel")===t}(t,a)&&(void 0===(o=this.documents[e])&&((o=i?null:function(e,t){var n=document.implementation.createHTMLDocument(a),i=(n._URL=t,n.createElement("base"));i.setAttribute("href",t),n.baseURI||function(e){return Object.getOwnPropertyDescriptor(e,"baseURI")}(n)||Object.defineProperty(n,"baseURI",{value:t});t=n.createElement("meta");t.setAttribute("charset","utf-8"),n.head.appendChild(t),n.head.appendChild(i),n.body.innerHTML=e,window.HTMLTemplateElement&&HTMLTemplateElement.bootstrap&&HTMLTemplateElement.bootstrap(n);return n}(n,r||e))&&(o.__importLink=t,this.bootDocument(o)),this.documents[e]=o),t.__doc=o),c.parseNext()},bootDocument:function(e){this.loadSubtree(e),this.observer.observe(e),c.parseNext()},loadedAll:function(){c.parseNext()}},o=new i(t.loaded.bind(t),t.loadedAll.bind(t));t.observer=new r,document.baseURI||(i={get:function(){var e=document.querySelector("base");return(e||window.location).href},configurable:!0},Object.defineProperty(document,"baseURI",i),Object.defineProperty(n,"baseURI",i)),e.importer=t,e.importLoader=o}),window.HTMLImports.addModule(function(e){var a=e.parser,c=e.importer,e={added:function(e){for(var t,n,i,r,o=0,s=e.length;o<s&&(r=e[o]);o++)t||(t=r.ownerDocument,n=a.isParsed(t)),(i=this.shouldLoadNode(r))&&c.loadNode(r),this.shouldParseNode(r)&&n&&a.parseDynamic(r,i)},shouldLoadNode:function(e){return 1===e.nodeType&&t.call(e,c.loadSelectorsForNode(e))},shouldParseNode:function(e){return 1===e.nodeType&&t.call(e,a.parseSelectorsForNode(e))}},t=(c.observer.addCallback=e.added.bind(e),HTMLElement.prototype.matches||HTMLElement.prototype.matchesSelector||HTMLElement.prototype.webkitMatchesSelector||HTMLElement.prototype.mozMatchesSelector||HTMLElement.prototype.msMatchesSelector)}),function(e){var t,n=e.initializeModules;e.isIE;function i(){window.HTMLImports.importer.bootDocument(t)}e.useNative||(n(),t=e.rootDocument,"complete"===document.readyState||"interactive"===document.readyState&&!window.attachEvent?i():document.addEventListener("DOMContentLoaded",i))}(window.HTMLImports),window.CustomElements=window.CustomElements||{flags:{}},function(t){var e=t.flags,n=[];t.addModule=function(e){n.push(e)},t.initializeModules=function(){n.forEach(function(e){e(t)})},t.hasNative=Boolean(document.registerElement),t.isIE=/Trident/.test(navigator.userAgent),t.useNative=!e.register&&t.hasNative&&!window.ShadowDOMPolyfill&&(!window.HTMLImports||window.HTMLImports.useNative)}(window.CustomElements),window.CustomElements.addModule(function(e){var c=window.HTMLImports?window.HTMLImports.IMPORT_LINK_TYPE:"none";function i(e,t){!function e(t,n,i){var r=t.firstElementChild;if(!r)for(r=t.firstChild;r&&r.nodeType!==Node.ELEMENT_NODE;)r=r.nextSibling;for(;r;)!0!==n(r,i)&&e(r,n,i),r=r.nextElementSibling;return null}(e,function(e){if(t(e))return!0;n(e,t)}),n(e,t)}function n(e,t){for(var n=e.shadowRoot;n;)i(n,t),n=n.olderShadowRoot}e.forDocumentTree=function(e,t){!function e(t,n,i){t=window.wrap(t);if(0<=i.indexOf(t))return;i.push(t);var r=t.querySelectorAll("link[rel="+c+"]");for(var o,s=0,a=r.length;s<a&&(o=r[s]);s++)o.import&&e(o.import,n,i);n(t)}(e,t,[])},e.forSubtree=i}),window.CustomElements.addModule(function(n){var s=n.flags,a=n.forSubtree,t=n.forDocumentTree;function c(e,t){return i(e,t)||r(e,t)}function i(e,t){if(n.upgrade(e,t))return!0;t&&p(e)}function r(e,t){a(e,function(e){if(i(e,t))return!0})}var o=window.MutationObserver._isPolyfilled&&s["throttle-attached"],l=(n.hasPolyfillMutations=o,n.hasThrottledAttached=o,!1),d=[];function h(e){d.push(e),l||(l=!0,setTimeout(u))}function u(){l=!1;for(var e,t=d,n=0,i=t.length;n<i&&(e=t[n]);n++)e();d=[]}function p(e){o?h(function(){f(e)}):f(e)}function f(e){e.__upgraded__&&!e.__attached&&(e.__attached=!0,e.attachedCallback)&&e.attachedCallback()}function m(e){o?h(function(){_(e)}):_(e)}function _(e){e.__upgraded__&&e.__attached&&(e.__attached=!1,e.detachedCallback)&&e.detachedCallback()}function y(e,t){if(s.dom){var n=t[0];if(n&&"childList"===n.type&&n.addedNodes&&n.addedNodes){for(var i=n.addedNodes[0];i&&i!==document&&!i.host;)i=i.parentNode;var r=(r=i&&(i.URL||i._URL||i.host&&i.host.localName)||"").split("/?").shift().split("/").pop()}console.group("mutations (%d) [%s]",t.length,r||"")}var o=function(e){for(var t=e,n=window.wrap(document);t;){if(t==n)return!0;t=t.parentNode||t.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&t.host}}(e);t.forEach(function(e){"childList"===e.type&&(v(e.addedNodes,function(e){e.localName&&c(e,o)}),v(e.removedNodes,function(e){e.localName&&(m(e=e),a(e,function(e){m(e)}))}))}),s.dom&&console.groupEnd()}var v=Array.prototype.forEach.call.bind(Array.prototype.forEach);function g(e){var t;e.__observer||((t=new MutationObserver(y.bind(this,e))).observe(e,{childList:!0,subtree:!0}),e.__observer=t)}function b(e){e=window.wrap(e),s.dom&&console.group("upgradeDocument: ",e.baseURI.split("/").pop()),c(e,e===window.wrap(document)),g(e),s.dom&&console.groupEnd()}var C=Element.prototype.createShadowRoot;C&&(Element.prototype.createShadowRoot=function(){var e=C.call(this);return window.CustomElements.watchShadow(this),e}),n.watchShadow=function(e){if(e.shadowRoot&&!e.shadowRoot.__watched){s.dom&&console.log("watching shadow-root for: ",e.localName);for(var t=e.shadowRoot;t;)g(t),t=t.olderShadowRoot}},n.upgradeDocumentTree=function(e){t(e,b)},n.upgradeDocument=b,n.upgradeSubtree=r,n.upgradeAll=c,n.attached=p,n.takeRecords=function(e){for(e=(e=window.wrap(e))||window.wrap(document);e.parentNode;)e=e.parentNode;var t=e.__observer;t&&(y(e,t.takeRecords()),u())}}),window.CustomElements.addModule(function(r){var i=r.flags;function o(e,t,n){return i.upgrade&&console.group("upgrade:",e.localName),t.is&&e.setAttribute("is",t.is),s(e,t),e.__upgraded__=!0,(t=e).createdCallback&&t.createdCallback(),n&&r.attached(e),r.upgradeSubtree(e,n),i.upgrade&&console.groupEnd(),e}function s(e,t){if(!Object.__proto__)for(var n=e,i=t.prototype,r=t.native,o={},s=i;s!==r&&s!==HTMLElement.prototype;){for(var a,c=Object.getOwnPropertyNames(s),l=0;a=c[l];l++)o[a]||(Object.defineProperty(n,a,Object.getOwnPropertyDescriptor(s,a)),o[a]=1);s=Object.getPrototypeOf(s)}e.__proto__=t.prototype}r.upgrade=function(e,t){if("template"===e.localName&&window.HTMLTemplateElement&&HTMLTemplateElement.decorate&&HTMLTemplateElement.decorate(e),!e.__upgraded__&&e.nodeType===Node.ELEMENT_NODE){var n=e.getAttribute("is"),i=r.getRegisteredDefinition(e.localName)||r.getRegisteredDefinition(n);if(i&&(n&&i.tag==e.localName||!n&&!i.extends))return o(e,i,t)}},r.upgradeWithDefinition=o,r.implementPrototype=s}),window.CustomElements.addModule(function(f){f.isIE;var m=f.upgradeDocumentTree,i=f.upgradeAll,_=f.upgradeWithDefinition,r=f.implementPrototype,e=f.useNative;function y(e,t,n){e=e.toLowerCase();var i=this.getAttribute(e),r=(n.apply(this,arguments),this.getAttribute(e));this.attributeChangedCallback&&r!==i&&this.attributeChangedCallback(e,i,r)}var v=["annotation-xml","color-profile","font-face","font-face-src","font-face-uri","font-face-format","font-face-name","missing-glyph"];var g={};function b(e){if(e)return g[e.toLowerCase()]}function o(e,t){e=e&&e.toLowerCase();var n,i=b((t=t&&t.toLowerCase())||e);if(i){if(e==i.tag&&t==i.is)return new i.ctor;if(!t&&!i.is)return new i.ctor}return t?(n=o(e)).setAttribute("is",t):(n=C(e),0<=e.indexOf("-")&&r(n,HTMLElement)),n}var C=document.createElement.bind(document),s=document.createElementNS.bind(document);function t(e,t){var n=e[t];e[t]=function(){var e=n.apply(this,arguments);return i(e),e}}e=Object.__proto__||e?function(e,t){return e instanceof t}:function(e,t){if(e instanceof t)return!0;for(var n=e;n;){if(n===t.prototype)return!0;n=n.__proto__}return!1},t(Node.prototype,"cloneNode"),t(document,"importNode"),document.registerElement=function(e,t){var n,i,r,t=t||{};if(!e)throw new Error("document.registerElement: first argument `name` must not be empty");if(e.indexOf("-")<0)throw new Error("document.registerElement: first argument ('name') must contain a dash ('-'). Argument provided was '"+String(e)+"'.");if(function(e){for(var t=0;t<v.length;t++)if(e===v[t])return 1}(e))throw new Error("Failed to execute 'registerElement' on 'Document': Registration failed for type '"+String(e)+"'. The type name is invalid.");if(b(e))throw new Error("DuplicateDefinitionError: a type with name '"+String(e)+"' is already registered");t.prototype||(t.prototype=Object.create(HTMLElement.prototype)),t.__name=e.toLowerCase(),t.extends&&(t.extends=t.extends.toLowerCase()),t.lifecycle=t.lifecycle||{},t.ancestry=function e(t){t=b(t);if(t)return e(t.extends).concat([t]);return[]}(t.extends);for(var o,s=t,a=s.extends,c=0;o=s.ancestry[c];c++)a=o.is&&o.tag;s.tag=a||s.__name,a&&(s.is=s.__name);var e=t;if(!Object.__proto__){for(var l,d,h=HTMLElement.prototype,u=(e.is&&(l=document.createElement(e.tag),h=Object.getPrototypeOf(l)),e.prototype),p=!1;u;)u==h&&(p=!0),(d=Object.getPrototypeOf(u))&&(u.__proto__=d),u=d;p||console.warn(e.tag+" prototype not found in prototype chain for "+e.is),e.native=h}return(l=t.prototype).setAttribute._polyfilled||(n=l.setAttribute,l.setAttribute=function(e,t){y.call(this,e,t,n)},i=l.removeAttribute,l.removeAttribute=function(e){y.call(this,e,null,i)},l.setAttribute._polyfilled=!0),e=t.__name,(g[e]=t).ctor=(r=t,function(){return _(C((e=r).tag),e);var e}),t.ctor.prototype=t.prototype,t.prototype.constructor=t.ctor,f.ready&&m(document),t.ctor},document.createElement=o,document.createElementNS=function(e,t,n){return"http://www.w3.org/1999/xhtml"===e?o(t,n):s(e,t)},f.registry=g,f.instanceof=e,f.reservedTagList=v,f.getRegisteredDefinition=b,document.register=document.registerElement}),function(e){var t=e.useNative,n=e.initializeModules,i=(e.isIE,t?(e.watchShadow=t=function(){},e.upgrade=t,e.upgradeAll=t,e.upgradeDocumentTree=t,e.upgradeSubtree=t,e.takeRecords=t,e.instanceof=function(e,t){return e instanceof t}):n(),e.upgradeDocumentTree),r=e.upgradeDocument;function o(){i(window.wrap(document)),window.CustomElements.ready=!0,(window.requestAnimationFrame||function(e){setTimeout(e,16)})(function(){setTimeout(function(){window.CustomElements.readyTime=Date.now(),window.HTMLImports&&(window.CustomElements.elapsed=window.CustomElements.readyTime-window.HTMLImports.readyTime),document.dispatchEvent(new CustomEvent("WebComponentsReady",{bubbles:!0}))})})}window.wrap||(window.ShadowDOMPolyfill?(window.wrap=window.ShadowDOMPolyfill.wrapIfNeeded,window.unwrap=window.ShadowDOMPolyfill.unwrapIfNeeded):window.wrap=window.unwrap=function(e){return e}),window.HTMLImports&&(window.HTMLImports.__importsParsingHook=function(e){e.import&&r(wrap(e.import))}),"complete"!==document.readyState&&!e.flags.eager&&("interactive"!==document.readyState||window.attachEvent||window.HTMLImports&&!window.HTMLImports.ready)?(t=window.HTMLImports&&!window.HTMLImports.ready?"HTMLImportsLoaded":"DOMContentLoaded",window.addEventListener(t,o)):o()}(window.CustomElements),function(){var e=document.createElement("style"),t=(e.textContent="body {transition: opacity ease-in 0.2s; } \nbody[unresolved] {opacity: 0; display: block; overflow: hidden; position: relative; } \n",document.querySelector("head"));t.insertBefore(e,t.firstChild)}(window.WebComponents),function(){function e(){document.body.removeAttribute("unresolved")}window.WebComponents?addEventListener("WebComponentsReady",e):"interactive"===document.readyState||"complete"===document.readyState?e():addEventListener("DOMContentLoaded",e)}(),window.Polymer={Settings:function(){var e=window.Polymer||{};if(!e.noUrlSettings)for(var t,n=location.search.slice(1).split("&"),i=0;i<n.length&&(t=n[i]);i++)(t=t.split("="))[0]&&(e[t[0]]=t[1]||!0);return e.wantShadow="shadow"===e.dom,e.hasShadow=Boolean(Element.prototype.createShadowRoot),e.nativeShadow=e.hasShadow&&!window.ShadowDOMPolyfill,e.useShadow=e.wantShadow&&e.hasShadow,e.hasNativeImports=Boolean("import"in document.createElement("link")),e.useNativeImports=e.hasNativeImports,e.useNativeCustomElements=!window.CustomElements||window.CustomElements.useNative,e.useNativeShadow=e.useShadow&&e.nativeShadow,e.usePolyfillProto=!e.useNativeCustomElements&&!Object.__proto__,e.hasNativeCSSProperties=!navigator.userAgent.match(/AppleWebKit\/601|Edge\/15/)&&window.CSS&&CSS.supports&&CSS.supports("box-shadow","0 0 0 var(--foo)"),e.useNativeCSSProperties=e.hasNativeCSSProperties&&e.lazyRegister&&e.useNativeCSSProperties,e.isIE=navigator.userAgent.match("Trident"),e.passiveTouchGestures=e.passiveTouchGestures||!1,e}()},function(){var e=window.Polymer,i=(window.Polymer=function(e){"function"==typeof e&&(e=e.prototype);var t=(e=i(e=e||{}))===e.constructor.prototype?e.constructor:null,n={prototype:e},e=(e.extends&&(n.extends=e.extends),Polymer.telemetry._registrate(e),document.registerElement(e.is,n));return t||e},function(e){var t=Polymer.Base;return e.extends&&(t=Polymer.Base._getExtendedPrototype(e.extends)),(e=Polymer.Base.chainObject(e,t)).registerCallback(),e});if(e)for(var t in e)Polymer[t]=e[t];Polymer.Class=function(e){return e.factoryImpl||(e.factoryImpl=function(){}),i(e).constructor}}(),Polymer.telemetry={registrations:[],_regLog:function(e){console.log("["+e.is+"]: registered")},_registrate:function(e){this.registrations.push(e),Polymer.log&&this._regLog(e)},dumpRegistrations:function(){this.registrations.forEach(this._regLog)}},Object.defineProperty(window,"currentImport",{enumerable:!0,configurable:!0,get:function(){return(document._currentScript||document.currentScript||{}).ownerDocument}}),Polymer.RenderStatus={_ready:!1,_callbacks:[],whenReady:function(e){this._ready?e():this._callbacks.push(e)},_makeReady:function(){this._ready=!0;for(var e=0;e<this._callbacks.length;e++)this._callbacks[e]();this._callbacks=[]},_catchFirstRender:function(){requestAnimationFrame(function(){Polymer.RenderStatus._makeReady()})},_afterNextRenderQueue:[],_waitingNextRender:!1,afterNextRender:function(e,t,n){this._watchNextRender(),this._afterNextRenderQueue.push([e,t,n])},hasRendered:function(){return this._ready},_watchNextRender:function(){var e;this._waitingNextRender||(this._waitingNextRender=!0,e=function(){Polymer.RenderStatus._flushNextRender()},this._ready?requestAnimationFrame(e):this.whenReady(e))},_flushNextRender:function(){var e=this;setTimeout(function(){e._flushRenderCallbacks(e._afterNextRenderQueue),e._afterNextRenderQueue=[],e._waitingNextRender=!1})},_flushRenderCallbacks:function(e){for(var t,n=0;n<e.length;n++)(t=e[n])[1].apply(t[0],t[2]||Polymer.nar)}},window.HTMLImports?HTMLImports.whenReady(function(){Polymer.RenderStatus._catchFirstRender()}):Polymer.RenderStatus._catchFirstRender(),Polymer.ImportStatus=Polymer.RenderStatus,Polymer.ImportStatus.whenLoaded=Polymer.ImportStatus.whenReady,function(){"use strict";var e,i,o=Polymer.Settings;Polymer.Base={__isPolymerInstance__:!0,_addFeature:function(e){this.mixin(this,e)},registerCallback:function(){if("max"!==o.lazyRegister){this._desugarBehaviors();for(var e,t=0;t<this.behaviors.length;t++)(e=this.behaviors[t]).beforeRegister&&e.beforeRegister.call(this)}this.beforeRegister&&this.beforeRegister(),this._registerFeatures(),o.lazyRegister||this.ensureRegisterFinished()},createdCallback:function(){if(o.disableUpgradeEnabled){if(this.hasAttribute("disable-upgrade"))return this._propertySetter=e,this._configValue=null,void(this.__data__={});this.__hasInitialized=!0}this.__initialize()},__initialize:function(){this.__hasRegisterFinished||this._ensureRegisterFinished(this.__proto__),Polymer.telemetry.instanceCount++,this.root=this;for(var e,t=0;t<this.behaviors.length;t++)(e=this.behaviors[t]).created&&e.created.call(this);this.created&&this.created(),this._initFeatures()},ensureRegisterFinished:function(){this._ensureRegisterFinished(this)},_ensureRegisterFinished:function(e){if(e.__hasRegisterFinished!==e.is||!e.is){if("max"===o.lazyRegister){e._desugarBehaviors();for(var t,n=0;n<e.behaviors.length;n++)(t=e.behaviors[n]).beforeRegister&&t.beforeRegister.call(e)}e.__hasRegisterFinished=e.is,e._finishRegisterFeatures&&e._finishRegisterFeatures();for(var i,r=0;r<e.behaviors.length;r++)(i=e.behaviors[r]).registered&&i.registered.call(e);e.registered&&e.registered(),o.usePolyfillProto&&e!==this&&e.extend(this,e)}},attachedCallback:function(){var n=this;Polymer.RenderStatus.whenReady(function(){n.isAttached=!0;for(var e,t=0;t<n.behaviors.length;t++)(e=n.behaviors[t]).attached&&e.attached.call(n);n.attached&&n.attached()})},detachedCallback:function(){var n=this;Polymer.RenderStatus.whenReady(function(){n.isAttached=!1;for(var e,t=0;t<n.behaviors.length;t++)(e=n.behaviors[t]).detached&&e.detached.call(n);n.detached&&n.detached()})},attributeChangedCallback:function(e,t,n){this._attributeChangedImpl(e);for(var i,r=0;r<this.behaviors.length;r++)(i=this.behaviors[r]).attributeChanged&&i.attributeChanged.call(this,e,t,n);this.attributeChanged&&this.attributeChanged(e,t,n)},_attributeChangedImpl:function(e){this._setAttributeToProperty(this,e)},extend:function(e,t){if(e&&t)for(var n,i=Object.getOwnPropertyNames(t),r=0;r<i.length&&(n=i[r]);r++)this.copyOwnProperty(n,t,e);return e||t},mixin:function(e,t){for(var n in t)e[n]=t[n];return e},copyOwnProperty:function(e,t,n){t=Object.getOwnPropertyDescriptor(t,e);t&&Object.defineProperty(n,e,t)},_logger:function(e,t){switch(1===t.length&&Array.isArray(t[0])&&(t=t[0]),e){case"log":case"warn":case"error":console[e].apply(console,t)}},_log:function(){var e=Array.prototype.slice.call(arguments,0);this._logger("log",e)},_warn:function(){var e=Array.prototype.slice.call(arguments,0);this._logger("warn",e)},_error:function(){var e=Array.prototype.slice.call(arguments,0);this._logger("error",e)},_logf:function(){return this._logPrefix.concat(this.is).concat(Array.prototype.slice.call(arguments,0))}},Polymer.Base._logPrefix=window.chrome&&!/edge/i.test(navigator.userAgent)||/firefox/i.test(navigator.userAgent)?["%c[%s::%s]:","font-weight: bold; background-color:#EEEE00;"]:["[%s::%s]:"],Polymer.Base.chainObject=function(e,t){return e&&t&&e!==t&&((e=Object.__proto__?e:Polymer.Base.extend(Object.create(t),e)).__proto__=t),e},Polymer.Base=Polymer.Base.chainObject(Polymer.Base,HTMLElement.prototype),Polymer.BaseDescriptors={},o.disableUpgradeEnabled&&(e=function(e,t){this.__data__[e]=t},i=Polymer.Base.attributeChangedCallback,Polymer.Base.attributeChangedCallback=function(e,t,n){this.__hasInitialized||"disable-upgrade"!==e||(this.__hasInitialized=!0,this._propertySetter=Polymer.Bind._modelApi._propertySetter,this._configValue=Polymer.Base._configValue,this.__initialize()),i.call(this,e,t,n)}),window.CustomElements?Polymer.instanceof=CustomElements.instanceof:Polymer.instanceof=function(e,t){return e instanceof t},Polymer.isInstance=function(e){return Boolean(e&&e.__isPolymerInstance__)},Polymer.telemetry.instanceCount=0}(),function(){var n={},i={};function t(e,t){n[e]=i[e.toLowerCase()]=t}function r(e){return n[e]||i[e.toLowerCase()]}function e(){return document.createElement("dom-module")}e.prototype=Object.create(HTMLElement.prototype),Polymer.Base.mixin(e.prototype,{createdCallback:function(){this.register()},register:function(e){if(e=e||this.id||this.getAttribute("name")||this.getAttribute("is")){if(Polymer.Settings.strictTemplatePolicy&&void 0!==r(e))throw t(e,null),new Error("strictTemplatePolicy: dom-module "+e+" re-registered");t(this.id=e,this)}},import:function(e,t){var n;if(e)return(n=r(e))||(function(){if(o)for(var e,t=document._currentScript||document.currentScript,n=(t&&t.ownerDocument||document).querySelectorAll("dom-module"),i=n.length-1;0<=i&&(e=n[i]);i--){if(e.__upgraded__)return;CustomElements.upgrade(e)}}(),n=r(e)),n&&t?n.querySelector(t):n}}),Object.defineProperty(e.prototype,"constructor",{value:e,configurable:!0,writable:!0});var o=window.CustomElements&&!CustomElements.useNative;document.registerElement("dom-module",e)}(),Polymer.Base._addFeature({_prepIs:function(){var e;this.is||"dom-module"===(e=(document._currentScript||document.currentScript).parentNode).localName&&(e=e.id||e.getAttribute("name")||e.getAttribute("is"),this.is=e),this.is&&(this.is=this.is.toLowerCase())}}),Polymer.Base._addFeature({behaviors:[],_desugarBehaviors:function(){this.behaviors.length&&(this.behaviors=this._desugarSomeBehaviors(this.behaviors))},_desugarSomeBehaviors:function(e){for(var t=[],n=(e=this._flattenBehaviorsList(e)).length-1;0<=n;n--){var i=e[n];-1===t.indexOf(i)&&(this._mixinBehavior(i),t.unshift(i))}return t},_flattenBehaviorsList:function(e){for(var t=[],n=0;n<e.length;n++){var i=e[n];i instanceof Array?t=t.concat(this._flattenBehaviorsList(i)):i?t.push(i):this._warn(this._logf("_flattenBehaviorsList","behavior is null, check for missing or 404 import"))}return t},_mixinBehavior:function(e){for(var t,n=Object.getOwnPropertyNames(e),i=e._noAccessors,r=0;r<n.length&&(t=n[r]);r++)Polymer.Base._behaviorProperties[t]||this.hasOwnProperty(t)||(i?this[t]=e[t]:this.copyOwnProperty(t,e,this))},_prepBehaviors:function(){this._prepFlattenedBehaviors(this.behaviors)},_prepFlattenedBehaviors:function(e){for(var t=0,n=e.length;t<n;t++)this._prepBehavior(e[t]);this._prepBehavior(this)},_marshalBehaviors:function(){for(var e=0;e<this.behaviors.length;e++)this._marshalBehavior(this.behaviors[e]);this._marshalBehavior(this)}}),Polymer.Base._behaviorProperties={hostAttributes:!0,beforeRegister:!0,registered:!0,properties:!0,observers:!0,listeners:!0,created:!0,attached:!0,detached:!0,attributeChanged:!0,ready:!0,_noAccessors:!0},Polymer.Base._addFeature({_getExtendedPrototype:function(e){return this._getExtendedNativePrototype(e)},_nativePrototypes:{},_getExtendedNativePrototype:function(e){if(!(n=this._nativePrototypes[e])){for(var t,n=Object.create(this.getNativePrototype(e)),i=Object.getOwnPropertyNames(Polymer.Base),r=0;r<i.length&&(t=i[r]);r++)Polymer.BaseDescriptors[t]||(n[t]=Polymer.Base[t]);Object.defineProperties(n,Polymer.BaseDescriptors),this._nativePrototypes[e]=n}return n},getNativePrototype:function(e){return Object.getPrototypeOf(document.createElement(e))}}),Polymer.Base._addFeature({_prepConstructor:function(){this._factoryArgs=this.extends?[this.extends,this.is]:[this.is];function e(){return this._factory(arguments)}this.hasOwnProperty("extends")&&(e.extends=this.extends),Object.defineProperty(this,"constructor",{value:e,writable:!0,configurable:!0}),e.prototype=this},_factory:function(e){var t=document.createElement.apply(document,this._factoryArgs);return this.factoryImpl&&this.factoryImpl.apply(t,e),t}}),Polymer.nob=Object.create(null),Polymer.Base._addFeature({getPropertyInfo:function(e){var t=this._getPropertyInfo(e,this.properties);if(!t)for(var n=0;n<this.behaviors.length;n++)if(t=this._getPropertyInfo(e,this.behaviors[n].properties))return t;return t||Polymer.nob},_getPropertyInfo:function(e,t){var n=t&&t[e];return(n="function"==typeof n?t[e]={type:n}:n)&&(n.defined=!0),n},_prepPropertyInfo:function(){this._propertyInfo={};for(var e=0;e<this.behaviors.length;e++)this._addPropertyInfo(this._propertyInfo,this.behaviors[e].properties);this._addPropertyInfo(this._propertyInfo,this.properties),this._addPropertyInfo(this._propertyInfo,this._propertyEffects)},_addPropertyInfo:function(e,t){var n,i,r;if(t)for(r in t)n=e[r],i=t[r],"_"===r[0]&&!i.readOnly||(e[r]?(n.type||(n.type=i.type),n.readOnly||(n.readOnly=i.readOnly)):e[r]={type:"function"==typeof i?i:i.type,readOnly:i.readOnly,attribute:Polymer.CaseMap.camelToDashCase(r)})}}),function(){var e={configurable:!0,writable:!0,enumerable:!0,value:{}};Polymer.BaseDescriptors.properties=e,Object.defineProperty(Polymer.Base,"properties",e)}(),Polymer.CaseMap={_caseMap:{},_rx:{dashToCamel:/-[a-z]/g,camelToDash:/([A-Z])/g},dashToCamelCase:function(e){return this._caseMap[e]||(this._caseMap[e]=e.indexOf("-")<0?e:e.replace(this._rx.dashToCamel,function(e){return e[1].toUpperCase()}))},camelToDashCase:function(e){return this._caseMap[e]||(this._caseMap[e]=e.replace(this._rx.camelToDash,"-$1").toLowerCase())}},Polymer.Base._addFeature({_addHostAttributes:function(e){this._aggregatedAttributes||(this._aggregatedAttributes={}),e&&this.mixin(this._aggregatedAttributes,e)},_marshalHostAttributes:function(){this._aggregatedAttributes&&this._applyAttributes(this,this._aggregatedAttributes)},_applyAttributes:function(e,t){for(var n in t){var i;this.hasAttribute(n)||"class"===n||(i=t[n],this.serializeValueToAttribute(i,n,this))}},_marshalAttributes:function(){this._takeAttributesToModel(this)},_takeAttributesToModel:function(e){if(this.hasAttributes())for(var t in this._propertyInfo){var n=this._propertyInfo[t];this.hasAttribute(n.attribute)&&this._setAttributeToProperty(e,n.attribute,t,n)}},_setAttributeToProperty:function(e,t,n,i){this._serializing||(n=n||Polymer.CaseMap.dashToCamelCase(t),(i=i||this._propertyInfo&&this._propertyInfo[n])&&!i.readOnly&&(t=this.getAttribute(t),e[n]=this.deserialize(t,i.type)))},_serializing:!1,reflectPropertyToAttribute:function(e,t,n){this._serializing=!0,n=void 0===n?this[e]:n,this.serializeValueToAttribute(n,t||Polymer.CaseMap.camelToDashCase(e)),this._serializing=!1},serializeValueToAttribute:function(e,t,n){e=this.serialize(e);n=n||this,void 0===e?n.removeAttribute(t):n.setAttribute(t,e)},deserialize:function(t,e){switch(e){case Number:t=Number(t);break;case Boolean:t=null!=t;break;case Object:try{t=JSON.parse(t)}catch(e){}break;case Array:try{t=JSON.parse(t)}catch(e){t=null,console.warn("Polymer::Attributes: couldn`t decode Array as JSON")}break;case Date:t=new Date(t);break;case String:}return t},serialize:function(e){switch(typeof e){case"boolean":return e?"":void 0;case"object":if(e instanceof Date)return e.toString();if(e)try{return JSON.stringify(e)}catch(e){return""}default:return null!=e?e:void 0}}}),Polymer.version="1.12.0",Polymer.Base._addFeature({_registerFeatures:function(){this._prepIs(),this._prepBehaviors(),this._prepConstructor(),this._prepPropertyInfo()},_prepBehavior:function(e){this._addHostAttributes(e.hostAttributes)},_marshalBehavior:function(e){},_initFeatures:function(){this._marshalHostAttributes(),this._marshalBehaviors()}}),function(){function l(e,r){return e.replace(t,function(e,t,n,i){return t+"'"+d(n.replace(/["']/g,""),r)+"'"+i})}function d(e,t){return(!e||!r.test(e))&&((t=(t=t).body.__urlResolver||(t.body.__urlResolver=t.createElement("a"))).href=e,t.href)||e}var n,i;function e(e){return e.substring(0,e.lastIndexOf("/")+1)}var t=/(url\()([^)]*)(\))/g,h={"*":["href","src","style","url"],form:["action"]},r=/(^\/)|(^#)|(^[\w-\d]*:)/,u=/\{\{|\[\[/;Polymer.ResolveUrl={resolveCss:l,resolveAttrs:function(e,t){for(var n in h)for(var i,r,o,s=h[n],a=0,c=s.length;a<c&&(i=s[a]);a++)"*"!==n&&e.localName!==n||(o=(r=e.attributes[i])&&r.value)&&o.search(u)<0&&(r.value=("style"===i?l:d)(o,t))},resolveUrl:function(e,t){return n||(n=document.implementation.createHTMLDocument("temp"),i=n.createElement("base"),n.head.appendChild(i)),i.href=t,d(e,n)},pathFromUrl:e},Polymer.rootPath=Polymer.Settings.rootPath||e(document.baseURI||window.location.href)}(),Polymer.Base._addFeature({_prepTemplate:function(){if(void 0===this._template){var e,t=(e=Polymer.DomModule.import(this.is))&&e.querySelector("template");if(Polymer.Settings.strictTemplatePolicy&&!t)throw new Error("strictTemplatePolicy: expecting dom-module or null _template for "+this.is);this._template=t}e?(t=e.getAttribute("assetpath")||"",t=Polymer.ResolveUrl.resolveUrl(t,e.ownerDocument.baseURI),this._importPath=Polymer.ResolveUrl.pathFromUrl(t)):this._importPath="",this._template&&this._template.hasAttribute("is")&&this._warn(this._logf("_prepTemplate","top-level Polymer template must not be a type-extension, found",this._template,"Move inside simple <template>.")),this._template&&!this._template.content&&window.HTMLTemplateElement&&HTMLTemplateElement.decorate&&HTMLTemplateElement.decorate(this._template)},_stampTemplate:function(){this._template&&(this.root=this.instanceTemplate(this._template))},instanceTemplate:function(e){return document.importNode(e._content||e.content,!0)}}),function(){var e=Polymer.Base.attachedCallback,t=Polymer.Base.detachedCallback;Polymer.Base._addFeature({_hostStack:[],ready:function(){},_registerHost:function(e){this.dataHost=e=e||Polymer.Base._hostStack[Polymer.Base._hostStack.length-1],e&&e._clients&&e._clients.push(this),this._clients=null,this._clientsReadied=!1},_beginHosting:function(){Polymer.Base._hostStack.push(this),this._clients||(this._clients=[])},_endHosting:function(){Polymer.Base._hostStack.pop()},_tryReady:function(){this._readied=!1,this._canReady()&&this._ready()},_canReady:function(){return!this.dataHost||this.dataHost._clientsReadied},_ready:function(){this._beforeClientsReady(),this._template&&(this._setupRoot(),this._readyClients()),this._clientsReadied=!0,this._clients=null,this._afterClientsReady(),this._readySelf()},_readyClients:function(){this._beginDistribute();var e=this._clients;if(e)for(var t,n=0,i=e.length;n<i&&(t=e[n]);n++)t._ready();this._finishDistribute()},_readySelf:function(){for(var e,t=0;t<this.behaviors.length;t++)(e=this.behaviors[t]).ready&&e.ready.call(this);this.ready&&this.ready(),this._readied=!0,this._attachedPending&&(this._attachedPending=!1,this.attachedCallback())},_beforeClientsReady:function(){},_afterClientsReady:function(){},_beforeAttached:function(){},attachedCallback:function(){this._readied?(this._beforeAttached(),e.call(this)):this._attachedPending=!0},detachedCallback:function(){this._readied?t.call(this):this._attachedPending=!1}})}(),Polymer.ArraySplice=function(){function m(e,t,n){return{index:e,removed:t,addedCount:n}}function e(){}return e.prototype={calcEditDistances:function(e,t,n,i,r,o){for(var s=o-r+1,a=n-t+1,c=new Array(s),l=0;l<s;l++)c[l]=new Array(a),c[l][0]=l;for(var d,h,u=0;u<a;u++)c[0][u]=u;for(l=1;l<s;l++)for(u=1;u<a;u++)this.equals(e[t+u-1],i[r+l-1])?c[l][u]=c[l-1][u-1]:(d=c[l-1][u]+1,h=c[l][u-1]+1,c[l][u]=d<h?d:h);return c},spliceOperationsFromEditDistances:function(e){for(var t,n,i,r,o=e.length-1,s=e[0].length-1,a=e[o][s],c=[];0<o||0<s;)0==o?(c.push(2),s--):0==s?(c.push(3),o--):(t=e[o-1][s-1],(r=(n=e[o-1][s])<(i=e[o][s-1])?n<t?n:t:i<t?i:t)==t?(t==a?c.push(0):(c.push(1),a=t),o--,s--):a=r==n?(c.push(3),o--,n):(c.push(2),s--,i));return c.reverse(),c},calcSplices:function(e,t,n,i,r,o){var s=0,a=0,c=Math.min(n-t,o-r);if(r+=s=0==t&&0==r?this.sharedPrefix(e,i,c):s,o-=a=n==e.length&&o==i.length?this.sharedSuffix(e,i,c-s):a,(n-=a)-(t+=s)==0&&o-r==0)return[];if(t==n){for(var l=m(t,[],0);r<o;)l.removed.push(i[r++]);return[l]}if(r==o)return[m(t,[],n-t)];for(var d=this.spliceOperationsFromEditDistances(this.calcEditDistances(e,t,n,i,r,o)),l=void 0,h=[],u=t,p=r,f=0;f<d.length;f++)switch(d[f]){case 0:l&&(h.push(l),l=void 0),u++,p++;break;case 1:(l=l||m(u,[],0)).addedCount++,u++,l.removed.push(i[p]),p++;break;case 2:(l=l||m(u,[],0)).addedCount++,u++;break;case 3:(l=l||m(u,[],0)).removed.push(i[p]),p++}return l&&h.push(l),h},sharedPrefix:function(e,t,n){for(var i=0;i<n;i++)if(!this.equals(e[i],t[i]))return i;return n},sharedSuffix:function(e,t,n){for(var i=e.length,r=t.length,o=0;o<n&&this.equals(e[--i],t[--r]);)o++;return o},calculateSplices:function(e,t){return this.calcSplices(e,0,e.length,t,0,t.length)},equals:function(e,t){return e===t}},new e}(),Polymer.domInnerHTML=function(){var c=/[&\u00A0"]/g,l=/[&\u00A0<>]/g;function d(e){switch(e){case"&":return"&amp;";case"<":return"&lt;";case">":return"&gt;";case'"':return"&quot;";case" ":return"&nbsp;"}}function e(e){for(var t={},n=0;n<e.length;n++)t[e[n]]=!0;return t}var h=e(["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"]),u=e(["style","script","xmp","iframe","noembed","noframes","plaintext","noscript"]);function a(e,t,n){switch(e.nodeType){case Node.ELEMENT_NODE:for(var i,r=e.localName,o="<"+r,s=e.attributes,a=0;i=s[a];a++)o+=" "+i.name+'="'+i.value.replace(c,d)+'"';return o+=">",h[r]?o:o+p(e,n)+"</"+r+">";case Node.TEXT_NODE:r=e.data;return t&&u[t.localName]?r:r.replace(l,d);case Node.COMMENT_NODE:return"\x3c!--"+e.data+"--\x3e";default:throw console.error(e),new Error("not implemented")}}function p(e,t){e instanceof HTMLTemplateElement&&(e=e.content);for(var n,i="",r=Polymer.dom(e).childNodes,o=0,s=r.length;o<s&&(n=r[o]);o++)i+=a(n,e,t);return i}return{getInnerHTML:p}}(),function(){"use strict";var i=Element.prototype.insertBefore,n=Element.prototype.appendChild,r=Element.prototype.removeChild;Polymer.TreeApi={arrayCopyChildNodes:function(e){for(var t=[],n=0,i=e.firstChild;i;i=i.nextSibling)t[n++]=i;return t},arrayCopyChildren:function(e){for(var t=[],n=0,i=e.firstElementChild;i;i=i.nextElementSibling)t[n++]=i;return t},arrayCopy:function(e){for(var t=e.length,n=new Array(t),i=0;i<t;i++)n[i]=e[i];return n}},Polymer.TreeApi.Logical={hasParentNode:function(e){return Boolean(e.__dom&&e.__dom.parentNode)},hasChildNodes:function(e){return Boolean(e.__dom&&void 0!==e.__dom.childNodes)},getChildNodes:function(e){return this.hasChildNodes(e)?this._getChildNodes(e):e.childNodes},_getChildNodes:function(e){if(!e.__dom.childNodes){e.__dom.childNodes=[];for(var t=e.__dom.firstChild;t;t=t.__dom.nextSibling)e.__dom.childNodes.push(t)}return e.__dom.childNodes},getParentNode:function(e){return(e.__dom&&void 0!==e.__dom.parentNode?e.__dom:e).parentNode},getFirstChild:function(e){return(e.__dom&&void 0!==e.__dom.firstChild?e.__dom:e).firstChild},getLastChild:function(e){return(e.__dom&&void 0!==e.__dom.lastChild?e.__dom:e).lastChild},getNextSibling:function(e){return(e.__dom&&void 0!==e.__dom.nextSibling?e.__dom:e).nextSibling},getPreviousSibling:function(e){return(e.__dom&&void 0!==e.__dom.previousSibling?e.__dom:e).previousSibling},getFirstElementChild:function(e){return e.__dom&&void 0!==e.__dom.firstChild?this._getFirstElementChild(e):e.firstElementChild},_getFirstElementChild:function(e){for(var t=e.__dom.firstChild;t&&t.nodeType!==Node.ELEMENT_NODE;)t=t.__dom.nextSibling;return t},getLastElementChild:function(e){return e.__dom&&void 0!==e.__dom.lastChild?this._getLastElementChild(e):e.lastElementChild},_getLastElementChild:function(e){for(var t=e.__dom.lastChild;t&&t.nodeType!==Node.ELEMENT_NODE;)t=t.__dom.previousSibling;return t},getNextElementSibling:function(e){return e.__dom&&void 0!==e.__dom.nextSibling?this._getNextElementSibling(e):e.nextElementSibling},_getNextElementSibling:function(e){for(var t=e.__dom.nextSibling;t&&t.nodeType!==Node.ELEMENT_NODE;)t=t.__dom.nextSibling;return t},getPreviousElementSibling:function(e){return e.__dom&&void 0!==e.__dom.previousSibling?this._getPreviousElementSibling(e):e.previousElementSibling},_getPreviousElementSibling:function(e){for(var t=e.__dom.previousSibling;t&&t.nodeType!==Node.ELEMENT_NODE;)t=t.__dom.previousSibling;return t},saveChildNodes:function(e){if(!this.hasChildNodes(e)){e.__dom=e.__dom||{},e.__dom.firstChild=e.firstChild,e.__dom.lastChild=e.lastChild,e.__dom.childNodes=[];for(var t=e.firstChild;t;t=t.nextSibling)t.__dom=t.__dom||{},(t.__dom.parentNode=e).__dom.childNodes.push(t),t.__dom.nextSibling=t.nextSibling,t.__dom.previousSibling=t.previousSibling}},recordInsertBefore:function(e,t,n){if(t.__dom.childNodes=null,e.nodeType===Node.DOCUMENT_FRAGMENT_NODE)for(var i=e.firstChild;i;i=i.nextSibling)this._linkNode(i,t,n);else this._linkNode(e,t,n)},_linkNode:function(e,t,n){e.__dom=e.__dom||{},t.__dom=t.__dom||{},n&&(n.__dom=n.__dom||{}),e.__dom.previousSibling=n?n.__dom.previousSibling:t.__dom.lastChild,e.__dom.previousSibling&&(e.__dom.previousSibling.__dom.nextSibling=e),e.__dom.nextSibling=n||null,e.__dom.nextSibling&&(e.__dom.nextSibling.__dom.previousSibling=e),e.__dom.parentNode=t,n?n===t.__dom.firstChild&&(t.__dom.firstChild=e):(t.__dom.lastChild=e,t.__dom.firstChild||(t.__dom.firstChild=e)),t.__dom.childNodes=null},recordRemoveChild:function(e,t){e.__dom=e.__dom||{},t.__dom=t.__dom||{},e===t.__dom.firstChild&&(t.__dom.firstChild=e.__dom.nextSibling),e===t.__dom.lastChild&&(t.__dom.lastChild=e.__dom.previousSibling);var n=e.__dom.previousSibling,i=e.__dom.nextSibling;n&&(n.__dom.nextSibling=i),i&&(i.__dom.previousSibling=n),e.__dom.parentNode=e.__dom.previousSibling=e.__dom.nextSibling=void 0,t.__dom.childNodes=null}},Polymer.TreeApi.Composed={getChildNodes:function(e){return Polymer.TreeApi.arrayCopyChildNodes(e)},getParentNode:function(e){return e.parentNode},clearChildNodes:function(e){e.textContent=""},insertBefore:function(e,t,n){return i.call(e,t,n||null)},appendChild:function(e,t){return n.call(e,t)},removeChild:function(e,t){return r.call(e,t)}}}(),Polymer.DomApi=function(){"use strict";function s(e){this.node=t?s.wrap(e):e}var e=Polymer.Settings,o=Polymer.TreeApi,t=e.hasShadow&&!e.nativeShadow,a=(s.wrap=window.wrap||function(e){return e},s.prototype={flush:function(){Polymer.dom.flush()},deepContains:function(e){if(this.node.contains(e))return!0;for(var t=e,n=e.ownerDocument;t&&t!==n&&t!==this.node;)t=Polymer.dom(t).parentNode||t.host;return t===this.node},queryDistributedElements:function(e){for(var t,n=this.getEffectiveChildNodes(),i=[],r=0,o=n.length;r<o&&(t=n[r]);r++)t.nodeType===Node.ELEMENT_NODE&&s.matchesSelector.call(t,e)&&i.push(t);return i},getEffectiveChildNodes:function(){for(var e,t=[],n=this.childNodes,i=0,r=n.length;i<r&&(e=n[i]);i++)if(e.localName===a)for(var o=c(e).getDistributedNodes(),s=0;s<o.length;s++)t.push(o[s]);else t.push(e);return t},observeNodes:function(e){if(e)return this.observer||(this.observer=new(this.node.localName===a?s.DistributedNodesObserver:s.EffectiveNodesObserver)(this)),this.observer.addListener(e)},unobserveNodes:function(e){this.observer&&this.observer.removeListener(e)},notifyObserver:function(){this.observer&&this.observer.notify()},_query:function(e,t,n){t=t||this.node;var i=[];return this._queryElements(o.Logical.getChildNodes(t),e,n,i),i},_queryElements:function(e,t,n,i){for(var r,o=0,s=e.length;o<s&&(r=e[o]);o++)if(r.nodeType===Node.ELEMENT_NODE&&this._queryElement(r,t,n,i))return!0},_queryElement:function(e,t,n,i){var r=t(e);if(r&&i.push(e),n&&n(r))return r;this._queryElements(o.Logical.getChildNodes(e),t,n,i)}},s.CONTENT="content"),c=s.factory=function(e){return(e=e||document).__domApi||(e.__domApi=new s.ctor(e)),e.__domApi},e=(s.hasApi=function(e){return Boolean(e.__domApi)},s.ctor=s,Polymer.dom=function(e,t){return e instanceof Event?Polymer.EventApi.factory(e):s.factory(e,t)},Element.prototype);return s.matchesSelector=e.matches||e.matchesSelector||e.mozMatchesSelector||e.msMatchesSelector||e.oMatchesSelector||e.webkitMatchesSelector,s}(),function(){"use strict";var s,c,e=Polymer.Settings,i=Polymer.DomApi,d=i.factory,h=Polymer.TreeApi,t=Polymer.domInnerHTML.getInnerHTML,a=i.CONTENT;e.useShadow||(s=Element.prototype.cloneNode,c=Document.prototype.importNode,Polymer.Base.mixin(i.prototype,{_lazyDistribute:function(e){e.shadyRoot&&e.shadyRoot._distributionClean&&(e.shadyRoot._distributionClean=!1,Polymer.dom.addDebouncer(e.debounce("_distribute",e._distributeContent)))},appendChild:function(e){return this.insertBefore(e)},insertBefore:function(e,t){if(t&&h.Logical.getParentNode(t)!==this.node)throw Error("The ref_node to be inserted before is not a child of this node");var n;return e.nodeType!==Node.DOCUMENT_FRAGMENT_NODE&&((n=h.Logical.getParentNode(e))?(i.hasApi(n)&&d(n).notifyObserver(),this._removeNode(e)):this._removeOwnerShadyRoot(e)),this._addNode(e,t)||(t=t&&(t.localName===a?this._firstComposedNode(t):t),n=this.node._isShadyRoot?this.node.host:this.node,t?h.Composed.insertBefore(n,e,t):h.Composed.appendChild(n,e)),this.notifyObserver(),e},_addNode:function(e,t){var n=this.getOwnerRoot(),i=(n&&(i=this._maybeAddInsertionPoint(e,this.node),n._invalidInsertionPoints||(n._invalidInsertionPoints=i),this._addNodeToHost(n.host,e)),h.Logical.hasChildNodes(this.node)&&h.Logical.recordInsertBefore(e,this.node,t),this._maybeDistribute(e)||this.node.shadyRoot);if(i)if(e.nodeType===Node.DOCUMENT_FRAGMENT_NODE)for(;e.firstChild;)h.Composed.removeChild(e,e.firstChild);else{n=h.Composed.getParentNode(e);n&&h.Composed.removeChild(n,e)}return i},removeChild:function(e){if(h.Logical.getParentNode(e)!==this.node)throw Error("The node to be removed is not a child of this node: "+e);var t;return this._removeNode(e)||(t=this.node._isShadyRoot?this.node.host:this.node)===h.Composed.getParentNode(e)&&h.Composed.removeChild(t,e),this.notifyObserver(),e},_removeNode:function(e){var t,n=h.Logical.hasParentNode(e)&&h.Logical.getParentNode(e),i=this._ownerShadyRootForNode(e);return n&&(t=d(e)._maybeDistributeParent(),h.Logical.recordRemoveChild(e,n),i)&&this._removeDistributedChildren(i,e)&&(i._invalidInsertionPoints=!0,this._lazyDistribute(i.host)),this._removeOwnerShadyRoot(e),i&&this._removeNodeFromHost(i.host,e),t},replaceChild:function(e,t){return this.insertBefore(e,t),this.removeChild(t),e},_hasCachedOwnerRoot:function(e){return Boolean(void 0!==e._ownerShadyRoot)},getOwnerRoot:function(){return this._ownerShadyRootForNode(this.node)},_ownerShadyRootForNode:function(e){var t,n;if(e)return void 0===(n=e._ownerShadyRoot)&&((n=e._isShadyRoot?e:(t=h.Logical.getParentNode(e))?t._isShadyRoot?t:this._ownerShadyRootForNode(t):null)||document.documentElement.contains(e))&&(e._ownerShadyRoot=n),n},_maybeDistribute:function(e){var t=e.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&!e.__noContent&&d(e).querySelector(a),n=t&&h.Logical.getParentNode(t).nodeType!==Node.DOCUMENT_FRAGMENT_NODE,t=t||e.localName===a,e=(t&&(e=this.getOwnerRoot())&&this._lazyDistribute(e.host),this._nodeNeedsDistribution(this.node));return e&&this._lazyDistribute(this.node),e||t&&!n},_maybeAddInsertionPoint:function(e,t){var n;if(e.nodeType!==Node.DOCUMENT_FRAGMENT_NODE||e.__noContent)e.localName===a&&(h.Logical.saveChildNodes(t),h.Logical.saveChildNodes(e),n=!0);else for(var i,r,o=d(e).querySelectorAll(a),s=0;s<o.length&&(i=o[s]);s++)(r=h.Logical.getParentNode(i))===e&&(r=t),r=this._maybeAddInsertionPoint(i,r),n=n||r;return n},_updateInsertionPoints:function(e){for(var t,n=e.shadyRoot._insertionPoints=d(e.shadyRoot).querySelectorAll(a),i=0;i<n.length;i++)t=n[i],h.Logical.saveChildNodes(t),h.Logical.saveChildNodes(h.Logical.getParentNode(t))},_nodeNeedsDistribution:function(e){return e&&e.shadyRoot&&i.hasInsertionPoint(e.shadyRoot)},_addNodeToHost:function(e,t){e._elementAdd&&e._elementAdd(t)},_removeNodeFromHost:function(e,t){e._elementRemove&&e._elementRemove(t)},_removeDistributedChildren:function(e,t){for(var n=e._insertionPoints,i=0;i<n.length;i++){var r=n[i];if(this._contains(t,r))for(var o=d(r).getDistributedNodes(),s=0;s<o.length;s++){var a=!0,c=o[s],l=h.Composed.getParentNode(c);l&&h.Composed.removeChild(l,c)}}return a},_contains:function(e,t){for(;t;){if(t==e)return!0;t=h.Logical.getParentNode(t)}},_removeOwnerShadyRoot:function(e){if(this._hasCachedOwnerRoot(e))for(var t,n=h.Logical.getChildNodes(e),i=0,r=n.length;i<r&&(t=n[i]);i++)this._removeOwnerShadyRoot(t);e._ownerShadyRoot=void 0},_firstComposedNode:function(e){for(var t,n,i=d(e).getDistributedNodes(),r=0,o=i.length;r<o&&(t=i[r]);r++)if((n=d(t).getDestinationInsertionPoints())[n.length-1]===e)return t},querySelector:function(t){return this._query(function(e){return i.matchesSelector.call(e,t)},this.node,function(e){return Boolean(e)})[0]||null},querySelectorAll:function(t){return this._query(function(e){return i.matchesSelector.call(e,t)},this.node)},getDestinationInsertionPoints:function(){return this.node._destinationInsertionPoints||[]},getDistributedNodes:function(){return this.node._distributedNodes||[]},_clear:function(){for(;this.childNodes.length;)this.removeChild(this.childNodes[0])},setAttribute:function(e,t){this.node.setAttribute(e,t),this._maybeDistributeForAttributeChange(this.node,e)},removeAttribute:function(e){this.node.removeAttribute(e),this._maybeDistributeForAttributeChange(this.node,e)},_maybeDistributeForAttributeChange:function(e,t){if("select"===t&&"content"===e.localName){t=this.getOwnerRoot();if(t&&this._nodeNeedsDistribution(t.host))return void this._lazyDistribute(t.host)}this._maybeDistributeParent()},_maybeDistributeParent:function(){if(this._nodeNeedsDistribution(this.parentNode))return this._lazyDistribute(this.parentNode),!0},cloneNode:function(e){var t=s.call(this.node,!1);if(e)for(var n,i=this.childNodes,r=d(t),o=0;o<i.length;o++)n=d(i[o]).cloneNode(!0),r.appendChild(n);return t},importNode:function(e,t){var n=this.node instanceof Document?this.node:this.node.ownerDocument,i=c.call(n,e,!1);if(t)for(var r,o=h.Logical.getChildNodes(e),s=d(i),a=0;a<o.length;a++)r=d(n).importNode(o[a],!0),s.appendChild(r);return i},_getComposedInnerHTML:function(){return t(this.node,!0)}}),Object.defineProperties(i.prototype,{activeElement:{get:function(){var e=document.activeElement;if(!e)return null;var t=!!this.node._isShadyRoot;if(this.node!==document){if(!t)return null;if(this.node.host===e||!this.node.host.contains(e))return null}for(var n=d(e).getOwnerRoot();n&&n!==this.node;)e=n.host,n=d(e).getOwnerRoot();return this.node===document?n?null:e:n===this.node?e:null},configurable:!0},childNodes:{get:function(){var e=h.Logical.getChildNodes(this.node);return Array.isArray(e)?e:h.arrayCopyChildNodes(this.node)},configurable:!0},children:{get:function(){return h.Logical.hasChildNodes(this.node)?Array.prototype.filter.call(this.childNodes,function(e){return e.nodeType===Node.ELEMENT_NODE}):h.arrayCopyChildren(this.node)},configurable:!0},parentNode:{get:function(){return h.Logical.getParentNode(this.node)},configurable:!0},firstChild:{get:function(){return h.Logical.getFirstChild(this.node)},configurable:!0},lastChild:{get:function(){return h.Logical.getLastChild(this.node)},configurable:!0},nextSibling:{get:function(){return h.Logical.getNextSibling(this.node)},configurable:!0},previousSibling:{get:function(){return h.Logical.getPreviousSibling(this.node)},configurable:!0},firstElementChild:{get:function(){return h.Logical.getFirstElementChild(this.node)},configurable:!0},lastElementChild:{get:function(){return h.Logical.getLastElementChild(this.node)},configurable:!0},nextElementSibling:{get:function(){return h.Logical.getNextElementSibling(this.node)},configurable:!0},previousElementSibling:{get:function(){return h.Logical.getPreviousElementSibling(this.node)},configurable:!0},textContent:{get:function(){var e=this.node.nodeType;if(e===Node.TEXT_NODE||e===Node.COMMENT_NODE)return this.node.textContent;for(var t,n=[],i=0,r=this.childNodes;t=r[i];i++)t.nodeType!==Node.COMMENT_NODE&&n.push(t.textContent);return n.join("")},set:function(e){var t=this.node.nodeType;t===Node.TEXT_NODE||t===Node.COMMENT_NODE?this.node.textContent=e:(this._clear(),e&&this.appendChild(document.createTextNode(e)))},configurable:!0},innerHTML:{get:function(){var e=this.node.nodeType;return e===Node.TEXT_NODE||e===Node.COMMENT_NODE?null:t(this.node)},set:function(e){var t=this.node.nodeType;if(t!==Node.TEXT_NODE||t!==Node.COMMENT_NODE){this._clear();for(var t=document.createElement("div"),n=(t.innerHTML=e,h.arrayCopyChildNodes(t)),i=0;i<n.length;i++)this.appendChild(n[i])}},configurable:!0}}),i.hasInsertionPoint=function(e){return Boolean(e&&e._insertionPoints.length)})}(),function(){"use strict";var e=Polymer.Settings,t=Polymer.TreeApi,n=Polymer.DomApi;if(e.useShadow){Polymer.Base.mixin(n.prototype,{querySelectorAll:function(e){return t.arrayCopy(this.node.querySelectorAll(e))},getOwnerRoot:function(){for(var e=this.node;e;){if(e.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&e.host)return e;e=e.parentNode}},importNode:function(e,t){return(this.node instanceof Document?this.node:this.node.ownerDocument).importNode(e,t)},getDestinationInsertionPoints:function(){var e=this.node.getDestinationInsertionPoints&&this.node.getDestinationInsertionPoints();return e?t.arrayCopy(e):[]},getDistributedNodes:function(){var e=this.node.getDistributedNodes&&this.node.getDistributedNodes();return e?t.arrayCopy(e):[]}}),Object.defineProperties(n.prototype,{activeElement:{get:function(){var e=n.wrap(this.node),t=e.activeElement;return e.contains(t)?t:null},configurable:!0},childNodes:{get:function(){return t.arrayCopyChildNodes(this.node)},configurable:!0},children:{get:function(){return t.arrayCopyChildren(this.node)},configurable:!0},textContent:{get:function(){return this.node.textContent},set:function(e){return this.node.textContent=e},configurable:!0},innerHTML:{get:function(){return this.node.innerHTML},set:function(e){return this.node.innerHTML=e},configurable:!0}});for(var i=["cloneNode","appendChild","insertBefore","removeChild","replaceChild","setAttribute","removeAttribute","querySelector"],r=0;r<i.length;r++)!function(e){n.prototype[e]=function(){return this.node[e].apply(this.node,arguments)}}(i[r]);for(var o=["parentNode","firstChild","lastChild","nextSibling","previousSibling","firstElementChild","lastElementChild","nextElementSibling","previousElementSibling"],s=0;s<o.length;s++)!function(e){Object.defineProperty(n.prototype,e,{get:function(){return this.node[e]},configurable:true})}(o[s])}}(),Polymer.Base.mixin(Polymer.dom,{_flushGuard:0,_FLUSH_MAX:100,_needsTakeRecords:!Polymer.Settings.useNativeCustomElements,_debouncers:[],_staticFlushList:[],_finishDebouncer:null,flush:function(){for(this._flushGuard=0,this._prepareFlush();this._debouncers.length&&this._flushGuard<this._FLUSH_MAX;){for(;this._debouncers.length;)this._debouncers.shift().complete();this._finishDebouncer&&this._finishDebouncer.complete(),this._prepareFlush(),this._flushGuard++}this._flushGuard>=this._FLUSH_MAX&&console.warn("Polymer.dom.flush aborted. Flush may not be complete.")},_prepareFlush:function(){this._needsTakeRecords&&CustomElements.takeRecords();for(var e=0;e<this._staticFlushList.length;e++)this._staticFlushList[e]()},addStaticFlush:function(e){this._staticFlushList.push(e)},removeStaticFlush:function(e){e=this._staticFlushList.indexOf(e);0<=e&&this._staticFlushList.splice(e,1)},addDebouncer:function(e){this._debouncers.push(e),this._finishDebouncer=Polymer.Debounce(this._finishDebouncer,this._finishFlush)},_finishFlush:function(){Polymer.dom._debouncers=[]}}),Polymer.EventApi=function(){"use strict";var t=Polymer.DomApi.ctor,e=Polymer.Settings;t.Event=function(e){this.event=e},e.useShadow?t.Event.prototype={get rootTarget(){return this.event.path[0]},get localTarget(){return this.event.target},get path(){var e=this.event.path;return e=Array.isArray(e)?e:Array.prototype.slice.call(e)}}:t.Event.prototype={get rootTarget(){return this.event.target},get localTarget(){for(var e=this.event.currentTarget,t=e&&Polymer.dom(e).getOwnerRoot(),n=this.path,i=0;i<n.length;i++)if(Polymer.dom(n[i]).getOwnerRoot()===t)return n[i]},get path(){if(!this.event._path){for(var e=[],t=this.rootTarget;t;){e.push(t);var n=Polymer.dom(t).getDestinationInsertionPoints();if(n.length){for(var i=0;i<n.length-1;i++)e.push(n[i]);t=n[n.length-1]}else t=Polymer.dom(t).parentNode||t.host}e.push(window),this.event._path=e}return this.event._path}};return{factory:function(e){return e.__eventApi||(e.__eventApi=new t.Event(e)),e.__eventApi}}}(),function(){"use strict";var e=Polymer.DomApi.ctor,t=Polymer.Settings.useShadow;Object.defineProperty(e.prototype,"classList",{get:function(){return this._classList||(this._classList=new e.ClassList(this)),this._classList},configurable:!0}),e.ClassList=function(e){this.domApi=e,this.node=e.node},e.ClassList.prototype={add:function(){this.node.classList.add.apply(this.node.classList,arguments),this._distributeParent()},remove:function(){this.node.classList.remove.apply(this.node.classList,arguments),this._distributeParent()},toggle:function(){this.node.classList.toggle.apply(this.node.classList,arguments),this._distributeParent()},_distributeParent:function(){t||this.domApi._maybeDistributeParent()},contains:function(){return this.node.classList.contains.apply(this.node.classList,arguments)}}}(),function(){"use strict";var e,t,n=Polymer.DomApi.ctor,i=Polymer.Settings;n.EffectiveNodesObserver=function(e){this.domApi=e,this.node=this.domApi.node,this._listeners=[]},n.EffectiveNodesObserver.prototype={addListener:function(e){this._isSetup||(this._setup(),this._isSetup=!0);e={fn:e,_nodes:[]};return this._listeners.push(e),this._scheduleNotify(),e},removeListener:function(e){var t=this._listeners.indexOf(e);0<=t&&(this._listeners.splice(t,1),e._nodes=[]),this._hasListeners()||(this._cleanup(),this._isSetup=!1)},_setup:function(){this._observeContentElements(this.domApi.childNodes)},_cleanup:function(){this._unobserveContentElements(this.domApi.childNodes)},_hasListeners:function(){return Boolean(this._listeners.length)},_scheduleNotify:function(){this._debouncer&&this._debouncer.stop(),this._debouncer=Polymer.Debounce(this._debouncer,this._notify),this._debouncer.context=this,Polymer.dom.addDebouncer(this._debouncer)},notify:function(){this._hasListeners()&&this._scheduleNotify()},_notify:function(){this._beforeCallListeners(),this._callListeners()},_beforeCallListeners:function(){this._updateContentElements()},_updateContentElements:function(){this._observeContentElements(this.domApi.childNodes)},_observeContentElements:function(e){for(var t,n=0;n<e.length&&(t=e[n]);n++)this._isContent(t)&&(t.__observeNodesMap=t.__observeNodesMap||new WeakMap,t.__observeNodesMap.has(this)||t.__observeNodesMap.set(this,this._observeContent(t)))},_observeContent:function(e){var t=this,e=Polymer.dom(e).observeNodes(function(){t._scheduleNotify()});return e._avoidChangeCalculation=!0,e},_unobserveContentElements:function(e){for(var t,n,i=0;i<e.length&&(t=e[i]);i++)this._isContent(t)&&(n=t.__observeNodesMap&&t.__observeNodesMap.get(this))&&(Polymer.dom(t).unobserveNodes(n),t.__observeNodesMap.delete(this))},_isContent:function(e){return"content"===e.localName},_callListeners:function(){for(var e,t=this._listeners,n=this._getEffectiveNodes(),i=0;i<t.length&&(e=t[i]);i++){var r=this._generateListenerInfo(e,n);(r||e._alwaysNotify)&&this._callListener(e,r)}},_getEffectiveNodes:function(){return this.domApi.getEffectiveChildNodes()},_generateListenerInfo:function(e,t){if(e._avoidChangeCalculation)return!0;for(var n,i=e._nodes,r={target:this.node,addedNodes:[],removedNodes:[]},o=Polymer.ArraySplice.calculateSplices(t,i),s=0;s<o.length&&(n=o[s]);s++)for(var a,c=0;c<n.removed.length&&(a=n.removed[c]);c++)r.removedNodes.push(a);for(s=0;s<o.length&&(n=o[s]);s++)for(c=n.index;c<n.index+n.addedCount;c++)r.addedNodes.push(t[c]);return e._nodes=t,r.addedNodes.length||r.removedNodes.length?r:void 0},_callListener:function(e,t){return e.fn.call(this.node,t)},enableShadowAttributeTracking:function(){}},i.useShadow&&(e=n.EffectiveNodesObserver.prototype._setup,t=n.EffectiveNodesObserver.prototype._cleanup,Polymer.Base.mixin(n.EffectiveNodesObserver.prototype,{_setup:function(){var t;this._observer||((t=this)._mutationHandler=function(e){e&&e.length&&t._scheduleNotify()},this._observer=new MutationObserver(this._mutationHandler),this._boundFlush=function(){t._flush()},Polymer.dom.addStaticFlush(this._boundFlush),this._observer.observe(this.node,{childList:!0})),e.call(this)},_cleanup:function(){this._observer.disconnect(),this._observer=null,this._mutationHandler=null,Polymer.dom.removeStaticFlush(this._boundFlush),t.call(this)},_flush:function(){this._observer&&this._mutationHandler(this._observer.takeRecords())},enableShadowAttributeTracking:function(){var e;this._observer&&(this._makeContentListenersAlwaysNotify(),this._observer.disconnect(),this._observer.observe(this.node,{childList:!0,attributes:!0,subtree:!0}),e=(e=this.domApi.getOwnerRoot())&&e.host)&&Polymer.dom(e).observer&&Polymer.dom(e).observer.enableShadowAttributeTracking()},_makeContentListenersAlwaysNotify:function(){for(var e,t=0;t<this._listeners.length;t++)(e=this._listeners[t])._alwaysNotify=e._isContentListener}}))}(),function(){"use strict";var t=Polymer.DomApi.ctor,e=Polymer.Settings;t.DistributedNodesObserver=function(e){t.EffectiveNodesObserver.call(this,e)},t.DistributedNodesObserver.prototype=Object.create(t.EffectiveNodesObserver.prototype),Polymer.Base.mixin(t.DistributedNodesObserver.prototype,{_setup:function(){},_cleanup:function(){},_beforeCallListeners:function(){},_getEffectiveNodes:function(){return this.domApi.getDistributedNodes()}}),e.useShadow&&Polymer.Base.mixin(t.DistributedNodesObserver.prototype,{_setup:function(){var e,t;this._observer||(e=(e=this.domApi.getOwnerRoot())&&e.host)&&((t=this)._observer=Polymer.dom(e).observeNodes(function(){t._scheduleNotify()}),this._observer._isContentListener=!0,this._hasAttrSelect())&&Polymer.dom(e).observer.enableShadowAttributeTracking()},_hasAttrSelect:function(){var e=this.node.getAttribute("select");return e&&e.match(/[[.]+/)},_cleanup:function(){var e=this.domApi.getOwnerRoot(),e=e&&e.host;e&&Polymer.dom(e).unobserveNodes(this._observer),this._observer=null}})}(),function(){var c=Polymer.DomApi,d=Polymer.TreeApi,e=(Polymer.Base._addFeature({_prepShady:function(){this._useContent=this._useContent||Boolean(this._template)},_setupShady:function(){this.shadyRoot=null,this.__domApi||(this.__domApi=null),this.__dom||(this.__dom=null),this._ownerShadyRoot||(this._ownerShadyRoot=void 0)},_poolContent:function(){this._useContent&&d.Logical.saveChildNodes(this)},_setupRoot:function(){if(this._useContent&&(this._createLocalRoot(),!this.dataHost)){var e=d.Logical.getChildNodes(this);if(n&&e)for(var t=0;t<e.length;t++)CustomElements.upgrade(e[t])}},_createLocalRoot:function(){this.shadyRoot=this.root,this.shadyRoot._distributionClean=!1,this.shadyRoot._hasDistributed=!1,this.shadyRoot._isShadyRoot=!0,this.shadyRoot._dirtyRoots=[];var e=this.shadyRoot._insertionPoints=!this._notes||this._notes._hasContent?this.shadyRoot.querySelectorAll("content"):[];d.Logical.saveChildNodes(this.shadyRoot);for(var t,n=0;n<e.length;n++)t=e[n],d.Logical.saveChildNodes(t),d.Logical.saveChildNodes(t.parentNode);this.shadyRoot.host=this},distributeContent:function(e){this.shadyRoot&&(this.shadyRoot._invalidInsertionPoints=this.shadyRoot._invalidInsertionPoints||e,e=function(e){for(;e&&function(e){for(var t,n=d.Logical.getChildNodes(e),i=0;i<n.length;i++)if((t=n[i]).localName&&"content"===t.localName)return e.domHost}(e);)e=e.domHost;return e}(this),Polymer.dom(this)._lazyDistribute(e))},_distributeContent:function(){this._useContent&&!this.shadyRoot._distributionClean&&(this.shadyRoot._invalidInsertionPoints&&(Polymer.dom(this)._updateInsertionPoints(this),this.shadyRoot._invalidInsertionPoints=!1),this._beginDistribute(),this._distributeDirtyRoots(),this._finishDistribute())},_beginDistribute:function(){this._useContent&&c.hasInsertionPoint(this.shadyRoot)&&(this._resetDistribution(),this._distributePool(this.shadyRoot,this._collectPool()))},_distributeDirtyRoots:function(){for(var e,t=this.shadyRoot._dirtyRoots,n=0,i=t.length;n<i&&(e=t[n]);n++)e._distributeContent();this.shadyRoot._dirtyRoots=[]},_finishDistribute:function(){if(this._useContent){if(this.shadyRoot._distributionClean=!0,c.hasInsertionPoint(this.shadyRoot)){this._composeTree();for(var e,t=this.shadyRoot,n=0;n<t._insertionPoints.length;n++)e=t._insertionPoints[n],c.hasApi(e)&&Polymer.dom(e).notifyObserver()}else this.shadyRoot._hasDistributed?(i=this._composeNode(this),this._updateChildNodes(this,i)):(d.Composed.clearChildNodes(this),this.appendChild(this.shadyRoot));this.shadyRoot._hasDistributed||(i=this,c.hasApi(i)&&Polymer.dom(i).notifyObserver()),this.shadyRoot._hasDistributed=!0}var i},elementMatches:function(e,t){return c.matchesSelector.call(t=t||this,e)},_resetDistribution:function(){for(var e=d.Logical.getChildNodes(this),t=0;t<e.length;t++){var n=e[t];if(n._destinationInsertionPoints&&(n._destinationInsertionPoints=void 0),h(n)){s=o=r=i=void 0;var i=n,r=i._distributedNodes;if(r)for(var o=0;o<r.length;o++){var s=r[o]._destinationInsertionPoints;s&&s.splice(s.indexOf(i)+1,s.length)}}}for(var a=this.shadyRoot._insertionPoints,c=0;c<a.length;c++)a[c]._distributedNodes=[]},_collectPool:function(){for(var e=[],t=d.Logical.getChildNodes(this),n=0;n<t.length;n++){var i=t[n];h(i)?e.push.apply(e,i._distributedNodes):e.push(i)}return e},_distributePool:function(e,t){for(var n,i=e._insertionPoints,r=0,o=i.length;r<o&&(n=i[r]);r++){this._distributeInsertionPoint(n,t),a=s=void 0;var s=n,a=this;(s=d.Logical.getParentNode(s))&&s.shadyRoot&&c.hasInsertionPoint(s.shadyRoot)&&s.shadyRoot._distributionClean&&(s.shadyRoot._distributionClean=!1,a.shadyRoot._dirtyRoots.push(s))}},_distributeInsertionPoint:function(e,t){for(var n,i=!1,r=0,o=t.length;r<o;r++)(n=t[r])&&this._matchesContentSelect(n,e)&&(l(n,e),i=!(t[r]=void 0));if(!i)for(var s=d.Logical.getChildNodes(e),a=0;a<s.length;a++)l(s[a],e)},_composeTree:function(){this._updateChildNodes(this,this._composeNode(this));for(var e,t,n=this.shadyRoot._insertionPoints,i=0,r=n.length;i<r&&(e=n[i]);i++)(t=d.Logical.getParentNode(e))._useContent||t===this||t===this.shadyRoot||this._updateChildNodes(t,this._composeNode(t))},_composeNode:function(e){for(var t=[],n=d.Logical.getChildNodes(e.shadyRoot||e),i=0;i<n.length;i++){var r=n[i];if(h(r))for(var o=r._distributedNodes,s=0;s<o.length;s++){var a=o[s];!function(e,t){t=t._destinationInsertionPoints;return t&&t[t.length-1]===e}(r,a)||t.push(a)}else t.push(r)}return t},_updateChildNodes:function(e,t){for(var n=d.Composed.getChildNodes(e),i=Polymer.ArraySplice.calculateSplices(t,n),r=0,o=0;r<i.length&&(c=i[r]);r++){for(var s,a=0;a<c.removed.length&&(s=c.removed[a]);a++)d.Composed.getParentNode(s)===e&&d.Composed.removeChild(e,s),n.splice(c.index+o,1);o-=c.addedCount}for(var c,l,r=0;r<i.length&&(c=i[r]);r++)for(l=n[c.index],a=c.index;a<c.index+c.addedCount;a++)s=t[a],d.Composed.insertBefore(e,s,l),n.splice(a,0,s)},_matchesContentSelect:function(e,t){t=t.getAttribute("select");return!t||!(t=t.trim())||e instanceof Element&&!!/^(:not\()?[*.#[a-zA-Z_|]/.test(t)&&this.elementMatches(t,e)},_elementAdd:function(){},_elementRemove:function(){}}),{get:function(){var e=Polymer.dom(this).getOwnerRoot();return e&&e.host},configurable:!0});function l(e,t){t._distributedNodes.push(e);var n=e._destinationInsertionPoints;n?n.push(t):e._destinationInsertionPoints=[t]}function h(e){return"content"==e.localName}Object.defineProperty(Polymer.Base,"domHost",e),Polymer.BaseDescriptors.domHost=e;var n=window.CustomElements&&!CustomElements.useNative}(),Polymer.Settings.useShadow&&Polymer.Base._addFeature({_poolContent:function(){},_beginDistribute:function(){},distributeContent:function(){},_distributeContent:function(){},_finishDistribute:function(){},_createLocalRoot:function(){this.createShadowRoot(),this.shadowRoot.appendChild(this.root),this.root=this.shadowRoot}}),Polymer.Async={_currVal:0,_lastVal:0,_callbacks:[],_twiddleContent:0,_twiddle:document.createTextNode(""),run:function(e,t){return 0<t?~setTimeout(e,t):(this._twiddle.textContent=this._twiddleContent++,this._callbacks.push(e),this._currVal++)},cancel:function(e){if(e<0)clearTimeout(~e);else{var t=e-this._lastVal;if(0<=t){if(!this._callbacks[t])throw"invalid async handle: "+e;this._callbacks[t]=null}}},_atEndOfMicrotask:function(){for(var e=this._callbacks.length,t=0;t<e;t++){var n=this._callbacks[t];if(n)try{n()}catch(e){throw t++,this._callbacks.splice(0,t),this._lastVal+=t,this._twiddle.textContent=this._twiddleContent++,e}}this._callbacks.splice(0,e),this._lastVal+=e}},new window.MutationObserver(function(){Polymer.Async._atEndOfMicrotask()}).observe(Polymer.Async._twiddle,{characterData:!0}),Polymer.Debounce=function(){function i(e){this.context=e;var t=this;this.boundComplete=function(){t.complete()}}var r=Polymer.Async;return i.prototype={go:function(e,t){var n;this.finish=function(){r.cancel(n)},n=r.run(this.boundComplete,t),this.callback=e},stop:function(){this.finish&&(this.finish(),this.finish=null,this.callback=null)},complete:function(){var e;this.finish&&(e=this.callback,this.stop(),e.call(this.context))}},function(e,t,n){return e?e.stop():e=new i(this),e.go(t,n),e}}(),Polymer.Base._addFeature({_setupDebouncers:function(){this._debouncers={}},debounce:function(e,t,n){return this._debouncers[e]=Polymer.Debounce.call(this,this._debouncers[e],t,n)},isDebouncerActive:function(e){e=this._debouncers[e];return!(!e||!e.finish)},flushDebouncer:function(e){e=this._debouncers[e];e&&e.complete()},cancelDebouncer:function(e){e=this._debouncers[e];e&&e.stop()}}),Polymer.DomModule=document.createElement("dom-module"),Polymer.Base._addFeature({_registerFeatures:function(){this._prepIs(),this._prepBehaviors(),this._prepConstructor(),this._prepTemplate(),this._prepShady(),this._prepPropertyInfo()},_prepBehavior:function(e){this._addHostAttributes(e.hostAttributes)},_initFeatures:function(){this._registerHost(),this._template&&(this._poolContent(),this._beginHosting(),this._stampTemplate(),this._endHosting()),this._marshalHostAttributes(),this._setupDebouncers(),this._marshalBehaviors(),this._tryReady()},_marshalBehavior:function(e){}}),function(){Polymer.nar=[];var e,s=Polymer.Settings.disableUpgradeEnabled;Polymer.Annotations={parseAnnotations:function(e,t){var n=[],i=e._content||e.content;return this._parseNodeAnnotations(i,n,t||e.hasAttribute("strip-whitespace")),n},_parseNodeAnnotations:function(e,t,n){return e.nodeType===Node.TEXT_NODE?this._parseTextNodeAnnotation(e,t):this._parseElementAnnotations(e,t,n)},_bindingRegex:new RegExp("(\\[\\[|{{)\\s*(?:(!)\\s*)?((?:[a-zA-Z_$][\\w.:$\\-*]*)\\s*(?:\\(\\s*(?:(?:(?:(?:[a-zA-Z_$][\\w.:$\\-*]*)|(?:[-+]?[0-9]*\\.?[0-9]+(?:[eE][-+]?[0-9]+)?)|(?:(?:'(?:[^'\\\\]|\\\\.)*')|(?:\"(?:[^\"\\\\]|\\\\.)*\"))\\s*)(?:,\\s*(?:(?:[a-zA-Z_$][\\w.:$\\-*]*)|(?:[-+]?[0-9]*\\.?[0-9]+(?:[eE][-+]?[0-9]+)?)|(?:(?:'(?:[^'\\\\]|\\\\.)*')|(?:\"(?:[^\"\\\\]|\\\\.)*\"))\\s*))*)?)\\)\\s*)?)(?:]]|}})","g"),_parseBindings:function(e){for(var t,n=this._bindingRegex,i=[],r=0;null!==(d=n.exec(e));){d.index>r&&i.push({literal:e.slice(r,d.index)});var o,s,a,c=d[1][0],l=Boolean(d[2]),d=d[3].trim();"{"==c&&0<(a=d.indexOf("::"))&&(s=d.substring(a+2),d=d.substring(0,a),o=!0),i.push({compoundIndex:i.length,value:d,mode:c,negate:l,event:s,customEvent:o}),r=n.lastIndex}if(r&&r<e.length&&(t=e.substring(r))&&i.push({literal:t}),i.length)return i},_literalFromParts:function(e){for(var t="",n=0;n<e.length;n++)t+=e[n].literal||"";return t},_parseTextNodeAnnotation:function(e,t){var n=this._parseBindings(e.textContent);if(n)return e.textContent=this._literalFromParts(n)||" ",e={bindings:[{kind:"text",name:"textContent",parts:n,isCompound:1!==n.length}]},t.push(e),e},_parseElementAnnotations:function(e,t,n){var i={bindings:[],events:[]};return"content"===e.localName&&(t._hasContent=!0),this._parseChildNodesAnnotations(e,i,t,n),e.attributes&&(this._parseNodeAttributeAnnotations(e,i,t),this.prepElement)&&this.prepElement(e),(i.bindings.length||i.events.length||i.id)&&t.push(i),i},_parseChildNodesAnnotations:function(e,t,n,i){if(e.firstChild)for(var r=e.firstChild,o=0;r;){var s,a=r.nextSibling;if("template"!==r.localName||r.hasAttribute("preserve-content")||this._parseTemplate(r,o,n,t,i),(r="slot"==r.localName?this._replaceSlotWithContent(r):r).nodeType===Node.TEXT_NODE){for(var c=a;c&&c.nodeType===Node.TEXT_NODE;)r.textContent+=c.textContent,a=c.nextSibling,e.removeChild(c),c=a;i&&!r.textContent.trim()&&(e.removeChild(r),o--)}r.parentNode&&(s=this._parseNodeAnnotations(r,n,i))&&(s.parent=t,s.index=o),r=a,o++}},_select$Attr:((e=document.createElement("div")).innerHTML="<div select$>",e.childNodes[0].attributes.getNamedItem("select$")),_replaceSlotWithContent:function(e){for(var t=e.ownerDocument.createElement("content");e.firstChild;)t.appendChild(e.firstChild);for(var n=e.attributes,i=0;i<n.length;i++)t.attributes.setNamedItem(n[i].cloneNode());var r,o=e.getAttribute("name"),o=(o&&t.setAttribute("select","[slot='"+o+"']"),e.getAttribute("name$"));return o&&((r=this._select$Attr.cloneNode()).value="[slot='"+o+"']",t.attributes.setNamedItem(r)),e.parentNode.replaceChild(t,e),t},_parseTemplate:function(e,t,n,i,r){var o=document.createDocumentFragment();o._notes=this.parseAnnotations(e,r),o.appendChild(e.content),n.push({bindings:Polymer.nar,events:Polymer.nar,templateContent:o,parent:i,index:t})},_parseNodeAttributeAnnotations:function(e,t){for(var n=Array.prototype.slice.call(e.attributes),i=n.length-1;s=n[i];i--){var r,o=s.name,s=s.value;"on-"===o.slice(0,3)?(e.removeAttribute(o),t.events.push({name:o.slice(3),value:s})):(r=this._parseNodeAttributeAnnotation(e,o,s))?t.bindings.push(r):"id"===o&&(t.id=s)}},_parseNodeAttributeAnnotation:function(e,t,n){var i,r,o,n=this._parseBindings(n);if(n)return r="property","$"==(i=t)[t.length-1]&&(t=t.slice(0,-1),r="attribute"),(o=this._literalFromParts(n))&&"attribute"==r&&e.setAttribute(t,o),"input"===e.localName&&"value"===i&&e.setAttribute(i,""),s&&"disable-upgrade$"===i&&e.setAttribute(t,""),e.removeAttribute(i),e=Polymer.CaseMap.dashToCamelCase(t),{kind:r,name:t="property"===r?e:t,propertyName:e,parts:n,literal:o,isCompound:1!==n.length}},findAnnotatedNode:function(e,t){var n=t.parent&&Polymer.Annotations.findAnnotatedNode(e,t.parent);if(!n)return e;for(var i=n.firstChild,r=0;i;i=i.nextSibling)if(t.index===r++)return i}}}(),Polymer.Path={root:function(e){var t=e.indexOf(".");return-1===t?e:e.slice(0,t)},isDeep:function(e){return-1!==e.indexOf(".")},isAncestor:function(e,t){return 0===e.indexOf(t+".")},isDescendant:function(e,t){return 0===t.indexOf(e+".")},translate:function(e,t,n){return t+n.slice(e.length)},matches:function(e,t,n){return e===n||this.isAncestor(e,n)||Boolean(t)&&this.isDescendant(e,n)}},Polymer.Base._addFeature({_prepAnnotations:function(){var t;this._template?(t=this,Polymer.Annotations.prepElement=function(e){t._prepElement(e)},this._template._content&&this._template._content._notes?this._notes=this._template._content._notes:(this._notes=Polymer.Annotations.parseAnnotations(this._template),this._processAnnotations(this._notes)),Polymer.Annotations.prepElement=null):this._notes=[]},_processAnnotations:function(e){for(var t=0;t<e.length;t++){for(var n=e[t],i=0;i<n.bindings.length;i++)for(var r=n.bindings[i],o=0;o<r.parts.length;o++){var s,a=r.parts[o];a.literal||((s=this._parseMethod(a.value))?a.signature=s:a.model=Polymer.Path.root(a.value))}if(n.templateContent){this._processAnnotations(n.templateContent._notes);var c,l=[];for(c in n.templateContent._parentProps=this._discoverTemplateParentProps(n.templateContent._notes)){var d="_parent_"+c;l.push({index:n.index,kind:"property",name:d,propertyName:d,parts:[{mode:"{",model:c,value:c}]})}n.bindings=n.bindings.concat(l)}}},_discoverTemplateParentProps:function(e){for(var t,n={},i=0;i<e.length&&(t=e[i]);i++){for(var r,o,s=0,a=t.bindings;s<a.length&&(r=a[s]);s++)for(var c,l=0,d=r.parts;l<d.length&&(c=d[l]);l++)if(c.signature){for(var h=c.signature.args,u=0;u<h.length;u++){var p=h[u].model;p&&(n[p]=!0)}c.signature.dynamicFn&&(n[c.signature.method]=!0)}else c.model&&(n[c.model]=!0);t.templateContent&&(o=t.templateContent._parentProps,Polymer.Base.mixin(n,o))}return n},_prepElement:function(e){Polymer.ResolveUrl.resolveAttrs(e,this._template.ownerDocument)},_findAnnotatedNode:Polymer.Annotations.findAnnotatedNode,_marshalAnnotationReferences:function(){this._template&&(this._marshalIdNodes(),this._marshalAnnotatedNodes(),this._marshalAnnotatedListeners())},_configureAnnotationReferences:function(){for(var e=this._notes||[],t=this._nodes,n=0;n<e.length;n++){var i=e[n],r=t[n];this._configureTemplateContent(i,r),this._configureCompoundBindings(i,r)}},_configureTemplateContent:function(e,t){e.templateContent&&(t._content=e.templateContent)},_configureCompoundBindings:function(e,t){for(var n=e.bindings,i=0;i<n.length;i++){var r=n[i];if(r.isCompound){for(var o=t.__compoundStorage__||(t.__compoundStorage__={}),s=r.parts,a=new Array(s.length),c=0;c<s.length;c++)a[c]=s[c].literal;var l=r.name;o[l]=a,r.literal&&"property"==r.kind&&(t._configValue?t._configValue(l,r.literal):t[l]=r.literal)}}},_marshalIdNodes:function(){this.$={};for(var e,t=0,n=this._notes.length;t<n&&(e=this._notes[t]);t++)e.id&&(this.$[e.id]=this._findAnnotatedNode(this.root,e))},_marshalAnnotatedNodes:function(){if(this._notes&&this._notes.length){for(var e=new Array(this._notes.length),t=0;t<this._notes.length;t++)e[t]=this._findAnnotatedNode(this.root,this._notes[t]);this._nodes=e}},_marshalAnnotatedListeners:function(){for(var e,t=0,n=this._notes.length;t<n&&(e=this._notes[t]);t++)if(e.events&&e.events.length)for(var i,r=this._findAnnotatedNode(this.root,e),o=0,s=e.events;o<s.length&&(i=s[o]);o++)this.listen(r,i.name,i.value)}}),Polymer.Base._addFeature({listeners:{},_listenListeners:function(e){var t,n,i;for(i in e)n=i.indexOf(".")<0?(t=this,i):(n=i.split("."),t=this.$[n[0]],n[1]),this.listen(t,n,e[i])},listen:function(e,t,n){var i=this._recallEventHandler(this,t,e,n);(i=i||this._createEventHandler(e,t,n))._listening||(this._listen(e,t,i),i._listening=!0)},_boundListenerKey:function(e,t){return e+":"+t},_recordEventHandler:function(e,t,n,i,r){var o=e.__boundListeners,e=(o=o||(e.__boundListeners=new WeakMap)).get(n),o=(e||(e={},Polymer.Settings.isIE&&n==window)||o.set(n,e),this._boundListenerKey(t,i));e[o]=r},_recallEventHandler:function(e,t,n,i){e=e.__boundListeners;if(e){e=e.get(n);if(e)return e[this._boundListenerKey(t,i)]}},_createEventHandler:function(e,t,n){function i(e){r[n]?r[n](e,e.detail):r._warn(r._logf("_createEventHandler","listener method `"+n+"` not defined"))}var r=this;return i._listening=!1,this._recordEventHandler(r,t,e,n,i),i},unlisten:function(e,t,n){n=this._recallEventHandler(this,t,e,n);n&&(this._unlisten(e,t,n),n._listening=!1)},_listen:function(e,t,n){e.addEventListener(t,n)},_unlisten:function(e,t,n){e.removeEventListener(t,n)}}),function(){"use strict";var d=Polymer.DomApi.wrap,c="string"==typeof document.head.style.touchAction,h="__polymerGestures",l="__polymerGesturesHandled",o="__polymerGesturesTouchAction",r=["mousedown","mousemove","mouseup","click"],n=[0,1,4,2],i=function(){try{return 1===new MouseEvent("test",{buttons:1}).buttons}catch(e){return!1}}();function u(e){return-1<r.indexOf(e)}var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("test",null,e),window.removeEventListener("test",null,e)}catch(e){}function p(e){return!u(e)&&"touchend"!==e&&c&&t&&Polymer.Settings.passiveTouchGestures?{passive:!0}:void 0}var f=navigator.userAgent.match(/iP(?:[oa]d|hone)|Android/),s=function(e){var t=e.sourceCapabilities;if((!t||t.firesTouchEvents)&&(e[l]={skip:!0},"click"===e.type)){var n=Polymer.dom(e).path;if(n)for(var i=0;i<n.length;i++)if(n[i]===_.mouse.target)return;e.preventDefault(),e.stopPropagation()}};function a(e){for(var t,n=f?["click"]:r,i=0;i<n.length;i++)t=n[i],e?document.addEventListener(t,s,!0):document.removeEventListener(t,s,!0)}function m(e){var t=e.type;return u(t)&&("mousemove"===t?(t=void 0===e.buttons?1:e.buttons,e instanceof window.MouseEvent&&!i&&(t=n[e.which]||0),Boolean(1&t)):0===(void 0===e.button?0:e.button))}var _={mouse:{target:null,mouseIgnoreJob:null},touch:{x:0,y:0,id:-1,scrollDecided:!1}};function y(e,t,n){e.movefn=t,e.upfn=n,document.addEventListener("mousemove",t),document.addEventListener("mouseup",n)}function v(e){document.removeEventListener("mousemove",e.movefn),document.removeEventListener("mouseup",e.upfn),e.movefn=null,e.upfn=null}document.addEventListener("touchend",function(e){_.mouse.mouseIgnoreJob||a(!0),_.mouse.target=Polymer.dom(e).rootTarget,_.mouse.mouseIgnoreJob=Polymer.Debounce(_.mouse.mouseIgnoreJob,function(){a(),_.mouse.target=null,_.mouse.mouseIgnoreJob=null},2500)},!!t&&{passive:!0});var g={gestures:{},recognizers:[],deepTargetFind:function(e,t){for(var n=document.elementFromPoint(e,t),i=n;i&&i.shadowRoot&&i!==(i=i.shadowRoot.elementFromPoint(e,t));)i&&(n=i);return n},findOriginalTarget:function(e){return e.path?e.path[0]:e.target},handleNative:function(e){var t,n=e.type,i=d(e.currentTarget)[h];if(i){var r=i[n];if(r){if(!e[l]&&(e[l]={},"touch"===n.slice(0,5))){i=e.changedTouches[0];if("touchstart"===n&&1===e.touches.length&&(_.touch.id=i.identifier),_.touch.id!==i.identifier)return;c||"touchstart"!==n&&"touchmove"!==n||g.handleTouchAction(e)}if(!(t=e[l]).skip){for(var o,s=g.recognizers,a=0;a<s.length;a++)r[(o=s[a]).name]&&!t[o.name]&&o.flow&&-1<o.flow.start.indexOf(e.type)&&o.reset&&o.reset();for(a=0;a<s.length;a++)r[(o=s[a]).name]&&!t[o.name]&&(t[o.name]=!0,o[n](e))}}}},handleTouchAction:function(e){var t,n,i=e.changedTouches[0],r=e.type;"touchstart"===r?(_.touch.x=i.clientX,_.touch.y=i.clientY,_.touch.scrollDecided=!1):"touchmove"!==r||_.touch.scrollDecided||(_.touch.scrollDecided=!0,r=function(e){for(var t,n=Polymer.dom(e).path,i="auto",r=0;r<n.length;r++)if((t=n[r])[o]){i=t[o];break}return i}(e),t=!1,n=Math.abs(_.touch.x-i.clientX),i=Math.abs(_.touch.y-i.clientY),e.cancelable&&("none"===r?t=!0:"pan-x"===r?t=n<i:"pan-y"===r&&(t=i<n)),t?e.preventDefault():g.prevent("track"))},add:function(e,t,n){e=d(e);var i=this.gestures[t],r=i.deps,o=i.name,s=e[h];s||(e[h]=s={});for(var a,c,l=0;l<r.length;l++)a=r[l],f&&u(a)&&"click"!==a||((c=s[a])||(s[a]=c={_count:0}),0===c._count&&e.addEventListener(a,this.handleNative,p(a)),c[o]=(c[o]||0)+1,c._count=(c._count||0)+1);e.addEventListener(t,n),i.touchAction&&this.setTouchAction(e,i.touchAction)},remove:function(e,t,n){e=d(e);var i=this.gestures[t],r=i.deps,o=i.name,s=e[h];if(s)for(var a,c,l=0;l<r.length;l++)(c=s[a=r[l]])&&c[o]&&(c[o]=(c[o]||1)-1,c._count=(c._count||1)-1,0===c._count)&&e.removeEventListener(a,this.handleNative,p(a));e.removeEventListener(t,n)},register:function(e){this.recognizers.push(e);for(var t=0;t<e.emits.length;t++)this.gestures[e.emits[t]]=e},findRecognizerByEvent:function(e){for(var t=0;t<this.recognizers.length;t++)for(var n=this.recognizers[t],i=0;i<n.emits.length;i++)if(n.emits[i]===e)return n;return null},setTouchAction:function(e,t){c&&(e.style.touchAction=t),e[o]=t},fire:function(e,t,n){Polymer.Base.fire(t,n,{node:e,bubbles:!0,cancelable:!0}).defaultPrevented&&(t=n.preventer||n.sourceEvent)&&t.preventDefault&&t.preventDefault()},prevent:function(e){e=this.findRecognizerByEvent(e);e.info&&(e.info.prevent=!0)},resetMouseCanceller:function(){_.mouse.mouseIgnoreJob&&_.mouse.mouseIgnoreJob.complete()}},b=(g.register({name:"downup",deps:["mousedown","touchstart","touchend"],flow:{start:["mousedown","touchstart"],end:["mouseup","touchend"]},emits:["down","up"],info:{movefn:null,upfn:null},reset:function(){v(this.info)},mousedown:function(e){var t,n;m(e)&&(t=g.findOriginalTarget(e),y((n=this).info,function(e){m(e)||(n.fire("up",t,e),v(n.info))},function(e){m(e)&&n.fire("up",t,e),v(n.info)}),this.fire("down",t,e))},touchstart:function(e){this.fire("down",g.findOriginalTarget(e),e.changedTouches[0],e)},touchend:function(e){this.fire("up",g.findOriginalTarget(e),e.changedTouches[0],e)},fire:function(e,t,n,i){g.fire(t,e,{x:n.clientX,y:n.clientY,sourceEvent:n,preventer:i,prevent:function(e){return g.prevent(e)}})}}),g.register({name:"track",touchAction:"none",deps:["mousedown","touchstart","touchmove","touchend"],flow:{start:["mousedown","touchstart"],end:["mouseup","touchend"]},emits:["track"],info:{x:0,y:0,state:"start",started:!1,moves:[],addMove:function(e){2<this.moves.length&&this.moves.shift(),this.moves.push(e)},movefn:null,upfn:null,prevent:!1},reset:function(){this.info.state="start",this.info.started=!1,this.info.moves=[],this.info.x=0,this.info.y=0,this.info.prevent=!1,v(this.info)},hasMovedEnough:function(e,t){return!this.info.prevent&&(!!this.info.started||(e=Math.abs(this.info.x-e),t=Math.abs(this.info.y-t),5<=e)||5<=t)},mousedown:function(e){var i,r,t;m(e)&&(i=g.findOriginalTarget(e),t=function(e){var t=e.clientX,n=e.clientY;r.hasMovedEnough(t,n)&&(r.info.state=r.info.started?"mouseup"===e.type?"end":"track":"start","start"===r.info.state&&g.prevent("tap"),r.info.addMove({x:t,y:n}),m(e)||(r.info.state="end",v(r.info)),r.fire(i,e),r.info.started=!0)},y((r=this).info,t,function(e){r.info.started&&t(e),v(r.info)}),this.info.x=e.clientX,this.info.y=e.clientY)},touchstart:function(e){e=e.changedTouches[0];this.info.x=e.clientX,this.info.y=e.clientY},touchmove:function(e){var t=g.findOriginalTarget(e),e=e.changedTouches[0],n=e.clientX,i=e.clientY;this.hasMovedEnough(n,i)&&("start"===this.info.state&&g.prevent("tap"),this.info.addMove({x:n,y:i}),this.fire(t,e),this.info.state="track",this.info.started=!0)},touchend:function(e){var t=g.findOriginalTarget(e),n=e.changedTouches[0];this.info.started&&(this.info.state="end",this.info.addMove({x:n.clientX,y:n.clientY}),this.fire(t,n,e))},fire:function(e,t,n){var i,r=this.info.moves[this.info.moves.length-2],o=this.info.moves[this.info.moves.length-1],s=o.x-this.info.x,a=o.y-this.info.y,c=0;return r&&(i=o.x-r.x,c=o.y-r.y),g.fire(e,"track",{state:this.info.state,x:t.clientX,y:t.clientY,dx:s,dy:a,ddx:i,ddy:c,sourceEvent:t,preventer:n,hover:function(){return g.deepTargetFind(t.clientX,t.clientY)}})}}),g.register({name:"tap",deps:["mousedown","click","touchstart","touchend"],flow:{start:["mousedown","touchstart"],end:["click","touchend"]},emits:["tap"],info:{x:NaN,y:NaN,prevent:!1},reset:function(){this.info.x=NaN,this.info.y=NaN,this.info.prevent=!1},save:function(e){this.info.x=e.clientX,this.info.y=e.clientY},mousedown:function(e){m(e)&&this.save(e)},click:function(e){m(e)&&this.forward(e)},touchstart:function(e){this.save(e.changedTouches[0],e)},touchend:function(e){this.forward(e.changedTouches[0],e)},forward:function(e,t){var n,i=Math.abs(e.clientX-this.info.x),r=Math.abs(e.clientY-this.info.y),o=g.findOriginalTarget(e);!(isNaN(i)||isNaN(r)||i<=25&&r<=25)&&("click"!==(i=e).type||0!==i.detail&&(r=g.findOriginalTarget(i).getBoundingClientRect(),n=i.pageX,i=i.pageY,n>=r.left)&&n<=r.right&&i>=r.top&&i<=r.bottom)||this.info.prevent||g.fire(o,"tap",{x:e.clientX,y:e.clientY,sourceEvent:e,preventer:t})}}),{x:"pan-x",y:"pan-y",none:"none",all:"auto"});Polymer.Base._addFeature({_setupGestures:function(){this.__polymerGestures=null},_listen:function(e,t,n){g.gestures[t]?g.add(e,t,n):e.addEventListener(t,n)},_unlisten:function(e,t,n){g.gestures[t]?g.remove(e,t,n):e.removeEventListener(t,n)},setScrollDirection:function(e,t){g.setTouchAction(t=t||this,b[e]||"auto")}}),Polymer.Gestures=g}(),function(){"use strict";var r;Polymer.Base._addFeature({$$:function(e){return Polymer.dom(this.root).querySelector(e)},toggleClass:function(e,t,n){n=n||this,(t=1==arguments.length?!n.classList.contains(e):t)?Polymer.dom(n).classList.add(e):Polymer.dom(n).classList.remove(e)},toggleAttribute:function(e,t,n){n=n||this,(t=1==arguments.length?!n.hasAttribute(e):t)?Polymer.dom(n).setAttribute(e,""):Polymer.dom(n).removeAttribute(e)},classFollows:function(e,t,n){n&&Polymer.dom(n).classList.remove(e),t&&Polymer.dom(t).classList.add(e)},attributeFollows:function(e,t,n){n&&Polymer.dom(n).removeAttribute(e),t&&Polymer.dom(t).setAttribute(e,"")},getEffectiveChildNodes:function(){return Polymer.dom(this).getEffectiveChildNodes()},getEffectiveChildren:function(){return Polymer.dom(this).getEffectiveChildNodes().filter(function(e){return e.nodeType===Node.ELEMENT_NODE})},getEffectiveTextContent:function(){for(var e,t=this.getEffectiveChildNodes(),n=[],i=0;e=t[i];i++)e.nodeType!==Node.COMMENT_NODE&&n.push(Polymer.dom(e).textContent);return n.join("")},queryEffectiveChildren:function(e){e=Polymer.dom(this).queryDistributedElements(e);return e&&e[0]},queryAllEffectiveChildren:function(e){return Polymer.dom(this).queryDistributedElements(e)},getContentChildNodes:function(e){e=Polymer.dom(this.root).querySelector(e||"content");return e?Polymer.dom(e).getDistributedNodes():[]},getContentChildren:function(e){return this.getContentChildNodes(e).filter(function(e){return e.nodeType===Node.ELEMENT_NODE})},fire:function(e,t,n){var i=(n=n||Polymer.nob).node||this,r=(t=null==t?{}:t,void 0===n.bubbles||n.bubbles),o=Boolean(n.cancelable),n=n._useCache,r=this._getEvent(e,r,o,n);return r.detail=t,n&&(this.__eventCache[e]=null),i.dispatchEvent(r),n&&(this.__eventCache[e]=r),r},__eventCache:{},_getEvent:function(e,t,n,i){i=i&&this.__eventCache[e];return i=i&&i.bubbles==t&&i.cancelable==n?i:new Event(e,{bubbles:Boolean(t),cancelable:n})},async:function(e,t){var n=this;return Polymer.Async.run(function(){e.call(n)},t)},cancelAsync:function(e){Polymer.Async.cancel(e)},arrayDelete:function(e,t){var n;if(Array.isArray(e)){if(0<=(n=e.indexOf(t)))return e.splice(n,1)}else if(0<=(n=this._get(e).indexOf(t)))return this.splice(e,n,1)},transform:function(e,t){(t=t||this).style.webkitTransform=e,t.style.transform=e},translate3d:function(e,t,n,i){this.transform("translate3d("+e+","+t+","+n+")",i=i||this)},importHref:function(e,t,n,i){var r=document.createElement("link"),e=(r.rel="import",r.href=e,Polymer.Base.importHref.imported=Polymer.Base.importHref.imported||{}),o=e[r.href],s=o||r,a=this,c=function(e){return e.target.__firedLoad=!0,e.target.removeEventListener("load",c),e.target.removeEventListener("error",l),t.call(a,e)},l=function(e){return e.target.__firedError=!0,e.target.removeEventListener("load",c),e.target.removeEventListener("error",l),n.call(a,e)};return t&&s.addEventListener("load",c),n&&s.addEventListener("error",l),o?(o.__firedLoad&&o.dispatchEvent(new Event("load")),o.__firedError&&o.dispatchEvent(new Event("error"))):(e[r.href]=r,(i=Boolean(i))&&r.setAttribute("async",""),document.head.appendChild(r)),s},create:function(e,t){var n=document.createElement(e);if(t)for(var i in t)n[i]=t[i];return n},isLightDescendant:function(e){return this!==e&&this.contains(e)&&Polymer.dom(this).getOwnerRoot()===Polymer.dom(e).getOwnerRoot()},isLocalDescendant:function(e){return this.root===Polymer.dom(e).getOwnerRoot()}}),Polymer.Settings.useNativeCustomElements||(r=Polymer.Base.importHref,Polymer.Base.importHref=function(e,t,n,i){CustomElements.ready=!1;return r.call(this,e,function(e){if(CustomElements.upgradeDocumentTree(document),CustomElements.ready=!0,t)return t.call(this,e)},n,i)})}(),Polymer.Bind={prepareModel:function(e){Polymer.Base.mixin(e,this._modelApi)},_modelApi:{_notifyChange:function(e,t,n){n=void 0===n?this[e]:n,t=t||Polymer.CaseMap.camelToDashCase(e)+"-changed",this.fire(t,{value:n},{bubbles:!1,cancelable:!1,_useCache:Polymer.Settings.eventDataCache||!Polymer.Settings.isIE})},_propertySetter:function(e,t,n,i){var r=this.__data__[e];return r===t||r!=r&&t!=t||("object"==typeof(this.__data__[e]=t)&&this._clearPath(e),this._propertyChanged&&this._propertyChanged(e,t,r),n&&this._effectEffects(e,t,n,r,i)),r},__setProperty:function(e,t,n,i){var r=(i=i||this)._propertyEffects&&i._propertyEffects[e];r?i._propertySetter(e,t,r,n):i[e]!==t&&(i[e]=t)},_effectEffects:function(e,t,n,i,r){for(var o,s=0,a=n.length;s<a&&(o=n[s]);s++)o.fn.call(this,e,this[e],o.effect,i,r)},_clearPath:function(e){for(var t in this.__data__)Polymer.Path.isDescendant(e,t)&&(this.__data__[t]=void 0)}},ensurePropertyEffects:function(e,t){return e._propertyEffects||(e._propertyEffects={}),e._propertyEffects[t]||(e._propertyEffects[t]=[])},addPropertyEffect:function(e,t,n,i){e=this.ensurePropertyEffects(e,t),t={kind:n,effect:i,fn:Polymer.Bind["_"+n+"Effect"]};return e.push(t),t},createBindings:function(e){var t=e._propertyEffects;if(t)for(var n in t){var i=t[n];i.sort(this._sortPropertyEffects),this._createAccessors(e,n,i)}},_sortPropertyEffects:function(){var n={compute:0,annotation:1,annotatedComputation:2,reflect:3,notify:4,observer:5,complexObserver:6,function:7};return function(e,t){return n[e.kind]-n[t.kind]}}(),_createAccessors:function(e,t,n){function i(e){this._propertySetter(t,e,n)}var r={get:function(){return this.__data__[t]}},o=e.getPropertyInfo&&e.getPropertyInfo(t);o&&o.readOnly?o.computed||(e["_set"+this.upper(t)]=i):r.set=i,Object.defineProperty(e,t,r)},upper:function(e){return e[0].toUpperCase()+e.substring(1)},_addAnnotatedListener:function(e,t,n,i,r,o){e._bindListeners||(e._bindListeners=[]);o=this._notedListenerFactory(n,i,Polymer.Path.isDeep(i),o),r=r||Polymer.CaseMap.camelToDashCase(n)+"-changed";e._bindListeners.push({index:t,property:n,path:i,changedFn:o,event:r})},_isEventBogus:function(e,t){return e.path&&e.path[0]!==t},_notedListenerFactory:function(i,r,o,s){return function(e,t,n){n?(n=Polymer.Path.translate(i,r,n),this._notifyPath(n,t)):(t=e[i],s&&(t=!t),o?this.__data__[r]!=t&&this.set(r,t):this[r]=t)}},prepareInstance:function(e){e.__data__=Object.create(null)},setupBindListeners:function(e){for(var t,n=e._bindListeners,i=0,r=n.length;i<r&&(t=n[i]);i++){var o=e._nodes[t.index];this._addNotifyListener(o,e,t.event,t.changedFn)}},_addNotifyListener:function(e,t,n,i){e.addEventListener(n,function(e){return t._notifyListener(i,e)})}},Polymer.Base.mixin(Polymer.Bind,{_shouldAddListener:function(e){return e.name&&"attribute"!=e.kind&&"text"!=e.kind&&!e.isCompound&&"{"===e.parts[0].mode},_annotationEffect:function(e,t,n){e!=n.value&&(t=this._get(n.value),this.__data__[n.value]=t),this._applyEffectValue(n,t)},_reflectEffect:function(e,t,n){this.reflectPropertyToAttribute(e,n.attribute,t)},_notifyEffect:function(e,t,n,i,r){r||this._notifyChange(e,n.event,t)},_functionEffect:function(e,t,n,i,r){n.call(this,e,t,i,r)},_observerEffect:function(e,t,n,i){var r=this[n.method];r?r.call(this,t,i):this._warn(this._logf("_observerEffect","observer method `"+n.method+"` not defined"))},_complexObserverEffect:function(e,t,n){var i=this[n.method];i?(e=Polymer.Bind._marshalArgs(this.__data__,n,e,t))&&i.apply(this,e):n.dynamicFn||this._warn(this._logf("_complexObserverEffect","observer method `"+n.method+"` not defined"))},_computeEffect:function(e,t,n){var i=this[n.method];i?(e=Polymer.Bind._marshalArgs(this.__data__,n,e,t))&&(t=i.apply(this,e),this.__setProperty(n.name,t)):n.dynamicFn||this._warn(this._logf("_computeEffect","compute method `"+n.method+"` not defined"))},_annotatedComputationEffect:function(e,t,n){var i=this._rootDataHost||this,r=i[n.method];r?(e=Polymer.Bind._marshalArgs(this.__data__,n,e,t))&&(t=r.apply(i,e),this._applyEffectValue(n,t)):n.dynamicFn||i._warn(i._logf("_annotatedComputationEffect","compute method `"+n.method+"` not defined"))},_marshalArgs:function(e,t,n,i){for(var r=[],o=t.args,s=1<o.length||t.dynamicFn,a=0,c=o.length;a<c;a++){var l,d=o[a],h=d.name;if(d.literal?l=d.value:n===h?l=i:void 0===(l=e[h])&&d.structured&&(l=Polymer.Base._get(h,e)),s&&void 0===l)return;d.wildcard?(d=Polymer.Path.isAncestor(n,h),r[a]={path:d?n:h,value:d?i:l,base:l}):r[a]=l}return r}}),Polymer.Base._addFeature({_addPropertyEffect:function(e,t,n){e=Polymer.Bind.addPropertyEffect(this,e,t,n);e.pathFn=this["_"+e.kind+"PathEffect"]},_prepEffects:function(){Polymer.Bind.prepareModel(this),this._addAnnotationEffects(this._notes)},_prepBindings:function(){Polymer.Bind.createBindings(this)},_addPropertyEffects:function(e){if(e)for(var t in e){var n,i=e[t];i.observer&&this._addObserverEffect(t,i.observer),i.computed&&(i.readOnly=!0,this._addComputedEffect(t,i.computed)),i.notify&&this._addPropertyEffect(t,"notify",{event:Polymer.CaseMap.camelToDashCase(t)+"-changed"}),i.reflectToAttribute&&("-"===(n=Polymer.CaseMap.camelToDashCase(t))[0]?this._warn(this._logf("_addPropertyEffects","Property "+t+" cannot be reflected to attribute "+n+' because "-" is not a valid starting attribute name. Use a lowercase first letter for the property instead.')):this._addPropertyEffect(t,"reflect",{attribute:n})),i.readOnly&&Polymer.Bind.ensurePropertyEffects(this,t)}},_addComputedEffect:function(e,t){for(var n,i=this._parseMethod(t),r=i.dynamicFn,o=0;o<i.args.length&&(n=i.args[o]);o++)this._addPropertyEffect(n.model,"compute",{method:i.method,args:i.args,trigger:n,name:e,dynamicFn:r});r&&this._addPropertyEffect(i.method,"compute",{method:i.method,args:i.args,trigger:null,name:e,dynamicFn:r})},_addObserverEffect:function(e,t){this._addPropertyEffect(e,"observer",{method:t,property:e})},_addComplexObserverEffects:function(e){if(e)for(var t,n=0;n<e.length&&(t=e[n]);n++)this._addComplexObserverEffect(t)},_addComplexObserverEffect:function(e){var t=this._parseMethod(e);if(!t)throw new Error("Malformed observer expression '"+e+"'");for(var n,i=t.dynamicFn,r=0;r<t.args.length&&(n=t.args[r]);r++)this._addPropertyEffect(n.model,"complexObserver",{method:t.method,args:t.args,trigger:n,dynamicFn:i});i&&this._addPropertyEffect(t.method,"complexObserver",{method:t.method,args:t.args,trigger:null,dynamicFn:i})},_addAnnotationEffects:function(e){for(var t,n=0;n<e.length&&(t=e[n]);n++)for(var i,r=t.bindings,o=0;o<r.length&&(i=r[o]);o++)this._addAnnotationEffect(i,n)},_addAnnotationEffect:function(e,t){Polymer.Bind._shouldAddListener(e)&&Polymer.Bind._addAnnotatedListener(this,t,e.name,e.parts[0].value,e.parts[0].event,e.parts[0].negate);for(var n=0;n<e.parts.length;n++){var i=e.parts[n];i.signature?this._addAnnotatedComputationEffect(e,i,t):i.literal||("attribute"===e.kind&&"-"===e.name[0]?this._warn(this._logf("_addAnnotationEffect","Cannot set attribute "+e.name+' because "-" is not a valid attribute starting character')):this._addPropertyEffect(i.model,"annotation",{kind:e.kind,index:t,name:e.name,propertyName:e.propertyName,value:i.value,isCompound:e.isCompound,compoundIndex:i.compoundIndex,event:i.event,customEvent:i.customEvent,negate:i.negate}))}},_addAnnotatedComputationEffect:function(e,t,n){var i=t.signature;if(i.static)this.__addAnnotatedComputationEffect("__static__",n,e,t,null);else{for(var r,o=0;o<i.args.length&&(r=i.args[o]);o++)r.literal||this.__addAnnotatedComputationEffect(r.model,n,e,t,r);i.dynamicFn&&this.__addAnnotatedComputationEffect(i.method,n,e,t,null)}},__addAnnotatedComputationEffect:function(e,t,n,i,r){this._addPropertyEffect(e,"annotatedComputation",{index:t,isCompound:n.isCompound,compoundIndex:i.compoundIndex,kind:n.kind,name:n.name,negate:i.negate,method:i.signature.method,args:i.signature.args,trigger:r,dynamicFn:i.signature.dynamicFn})},_parseMethod:function(e){var t,e=e.match(/([^\s]+?)\(([\s\S]*)\)/);if(e)return t={method:e[1],static:!0},this.getPropertyInfo(t.method)!==Polymer.nob&&(t.static=!1,t.dynamicFn=!0),e[2].trim()?(e=e[2].replace(/\\,/g,"&comma;").split(","),this._parseArgs(e,t)):(t.args=Polymer.nar,t)},_parseArgs:function(e,t){return t.args=e.map(function(e){e=this._parseArg(e);return e.literal||(t.static=!1),e},this),t},_parseArg:function(e){var t=e.trim().replace(/&comma;/g,",").replace(/\\(.)/g,"$1"),n={name:t},e=t[0];switch(e="0"<=(e="-"===e?t[1]:e)&&e<="9"?"#":e){case"'":case'"':n.value=t.slice(1,-1),n.literal=!0;break;case"#":n.value=Number(t),n.literal=!0}return n.literal||(n.model=Polymer.Path.root(t),n.structured=Polymer.Path.isDeep(t),n.structured&&(n.wildcard=".*"==t.slice(-2),n.wildcard)&&(n.name=t.slice(0,-2))),n},_marshalInstanceEffects:function(){Polymer.Bind.prepareInstance(this),this._bindListeners&&Polymer.Bind.setupBindListeners(this)},_applyEffectValue:function(e,t){var n=this._nodes[e.index],i=e.name;t=this._computeFinalAnnotationValue(n,i,t,e),"attribute"==e.kind?this.serializeValueToAttribute(t,i,n):(e=n._propertyInfo&&n._propertyInfo[i])&&e.readOnly||this.__setProperty(i,t,Polymer.Settings.suppressBindingNotifications,n)},_computeFinalAnnotationValue:function(e,t,n,i){var r;return i.negate&&(n=!n),i.isCompound&&((r=e.__compoundStorage__[t])[i.compoundIndex]=n,n=r.join("")),n="attribute"!==i.kind&&("className"===t&&(n=this._scopeElementClass(e,n)),"textContent"===t||"input"==e.localName&&"value"==t)?null==n?"":n:n},_executeStaticEffects:function(){this._propertyEffects&&this._propertyEffects.__static__&&this._effectEffects("__static__",null,this._propertyEffects.__static__)}}),function(){var t=Polymer.Settings.usePolyfillProto,n=Boolean(Object.getOwnPropertyDescriptor(document.documentElement,"properties"));Polymer.Base._addFeature({_setupConfigure:function(e){if(this._config={},this._handlers=[],this._aboveConfig=null,e)for(var t in e)void 0!==e[t]&&(this._config[t]=e[t])},_marshalAttributes:function(){this._takeAttributesToModel(this._config)},_attributeChangedImpl:function(e){var t=this._clientsReadied?this:this._config;this._setAttributeToProperty(t,e)},_configValue:function(e,t){var n=this._propertyInfo[e];n&&n.readOnly||(this._config[e]=t)},_beforeClientsReady:function(){this._configure()},_configure:function(){this._configureAnnotationReferences(),this._configureInstanceProperties(),this._aboveConfig=this.mixin({},this._config);for(var e={},t=0;t<this.behaviors.length;t++)this._configureProperties(this.behaviors[t].properties,e);this._configureProperties((n?this.__proto__:this).properties,e),this.mixin(e,this._aboveConfig),this._config=e,this._clients&&this._clients.length&&this._distributeConfig(this._config)},_configureInstanceProperties:function(){for(var e in this._propertyEffects)!t&&this.hasOwnProperty(e)&&(this._configValue(e,this[e]),delete this[e])},_configureProperties:function(e,t){for(var n in e){var i=e[n];void 0!==i.value&&("function"==typeof(i=i.value)&&(i=i.call(this,this._config)),t[n]=i)}},_distributeConfig:function(e){var t=this._propertyEffects;if(t)for(var n in e){var i=t[n];if(i)for(var r,o,s,a,c,l=0,d=i.length;l<d&&(r=i[l]);l++)"annotation"===r.kind&&(o=this._nodes[r.effect.index],s=r.effect.propertyName,a="attribute"==r.effect.kind,c=o._propertyEffects&&o._propertyEffects[s],!o._configValue||!c&&a||(c=n===r.effect.value?e[n]:this._get(r.effect.value,e),c=this._computeFinalAnnotationValue(o,s,c,r.effect),a&&(c=o.deserialize(this.serialize(c),o._propertyInfo[s].type)),o._configValue(s,c)))}},_afterClientsReady:function(){this.importPath=this._importPath,this.rootPath=Polymer.rootPath,this._executeStaticEffects(),this._applyConfig(this._config,this._aboveConfig),this._flushHandlers()},_applyConfig:function(e,t){for(var n in e)void 0===this[n]&&this.__setProperty(n,e[n],n in t)},_notifyListener:function(e,t){if(!Polymer.Bind._isEventBogus(t,t.target)){var n,i;if(t.detail&&(n=t.detail.value,i=t.detail.path),this._clientsReadied)return e.call(this,t.target,n,i);this._queueHandler([e,t.target,n,i])}},_queueHandler:function(e){this._handlers.push(e)},_flushHandlers:function(){for(var e,t=this._handlers,n=0,i=t.length;n<i&&(e=t[n]);n++)e[0].call(this,e[1],e[2],e[3]);this._handlers=[]}})}(),function(){"use strict";var a=Polymer.Path;Polymer.Base._addFeature({notifyPath:function(e,t,n){var i={},e=this._get(e,this,i);1===arguments.length&&(t=e),i.path&&this._notifyPath(i.path,t,n)},_notifyPath:function(e,t,n){var i=this._propertySetter(e,t);if(i!==t&&(i==i||t==t))return this._pathEffector(e,t),n||this._notifyPathUp(e,t),!0},_getPathParts:function(e){if(Array.isArray(e)){for(var t=[],n=0;n<e.length;n++)for(var i=e[n].toString().split("."),r=0;r<i.length;r++)t.push(i[r]);return t}return e.toString().split(".")},set:function(e,t,n){var i,r=n||this,o=this._getPathParts(e),s=o[o.length-1];if(1<o.length){for(var a,c,l,d=0;d<o.length-1;d++){var h=o[d];if(i&&"#"==h[0]?r=Polymer.Collection.get(i).getItem(h):(r=r[h],i&&parseInt(h,10)==h&&(o[d]=Polymer.Collection.get(i).getKey(r))),!r)return;i=Array.isArray(r)?r:null}i&&(a=Polymer.Collection.get(i),"#"==s[0]?(l=s,c=a.getItem(l),s=i.indexOf(c),a.setItem(l,t)):parseInt(s,10)==s&&(c=r[s],l=a.getKey(c),o[d]=l,a.setItem(l,t))),r[s]=t,n||this._notifyPath(o.join("."),t)}else r[e]=t},get:function(e,t){return this._get(e,t)},_get:function(e,t,n){for(var i,r=t||this,o=this._getPathParts(e),s=0;s<o.length;s++){if(!r)return;var a=o[s];i&&"#"==a[0]?r=Polymer.Collection.get(i).getItem(a):(r=r[a],n&&i&&parseInt(a,10)==a&&(o[s]=Polymer.Collection.get(i).getKey(r))),i=Array.isArray(r)?r:null}return n&&(n.path=o.join(".")),r},_pathEffector:function(e,t){var n=a.root(e),i=this._propertyEffects&&this._propertyEffects[n];if(i)for(var r,o=0;o<i.length&&(r=i[o]);o++){var s=r.pathFn;s&&s.call(this,e,t,r.effect)}this._boundPaths&&this._notifyBoundPaths(e,t)},_annotationPathEffect:function(e,t,n){var i;a.matches(n.value,!1,e)?Polymer.Bind._annotationEffect.call(this,e,t,n):!n.negate&&a.isDescendant(n.value,e)&&(i=this._nodes[n.index])&&i._notifyPath&&(n=a.translate(n.value,n.name,e),i._notifyPath(n,t,!0))},_complexObserverPathEffect:function(e,t,n){a.matches(n.trigger.name,n.trigger.wildcard,e)&&Polymer.Bind._complexObserverEffect.call(this,e,t,n)},_computePathEffect:function(e,t,n){a.matches(n.trigger.name,n.trigger.wildcard,e)&&Polymer.Bind._computeEffect.call(this,e,t,n)},_annotatedComputationPathEffect:function(e,t,n){a.matches(n.trigger.name,n.trigger.wildcard,e)&&Polymer.Bind._annotatedComputationEffect.call(this,e,t,n)},linkPaths:function(e,t){this._boundPaths=this._boundPaths||{},t?this._boundPaths[e]=t:this.unlinkPaths(e)},unlinkPaths:function(e){this._boundPaths&&delete this._boundPaths[e]},_notifyBoundPaths:function(e,t){for(var n in this._boundPaths){var i=this._boundPaths[n];a.isDescendant(n,e)?this._notifyPath(a.translate(n,i,e),t):a.isDescendant(i,e)&&this._notifyPath(a.translate(i,n,e),t)}},_notifyPathUp:function(e,t){var n=a.root(e),n=Polymer.CaseMap.camelToDashCase(n)+this._EVENT_CHANGED;this.fire(n,{path:e,value:t},{bubbles:!1,_useCache:Polymer.Settings.eventDataCache||!Polymer.Settings.isIE})},_EVENT_CHANGED:"-changed",notifySplices:function(e,t){var n={},e=this._get(e,this,n);this._notifySplices(e,n.path,t)},_notifySplices:function(e,t,n){var n={keySplices:Polymer.Collection.applySplices(e,n),indexSplices:n},i=t+".splices";this._notifyPath(i,n),this._notifyPath(t+".length",e.length),this.__data__[i]={keySplices:null,indexSplices:null}},_notifySplice:function(e,t,n,i,r){this._notifySplices(e,t,[{index:n,addedCount:i,removed:r,object:e,type:"splice"}])},push:function(e){var t={},e=this._get(e,this,t),n=Array.prototype.slice.call(arguments,1),i=e.length,r=e.push.apply(e,n);return n.length&&this._notifySplice(e,t.path,i,n.length,[]),r},pop:function(e){var t={},e=this._get(e,this,t),n=Boolean(e.length),i=Array.prototype.slice.call(arguments,1),i=e.pop.apply(e,i);return n&&this._notifySplice(e,t.path,e.length,0,[i]),i},splice:function(e,t){var n={},e=this._get(e,this,n),i=(t=(t=t<0?e.length-Math.floor(-t):Math.floor(t))||0,Array.prototype.slice.call(arguments,1)),r=e.splice.apply(e,i),i=Math.max(i.length-2,0);return(i||r.length)&&this._notifySplice(e,n.path,t,i,r),r},shift:function(e){var t={},e=this._get(e,this,t),n=Boolean(e.length),i=Array.prototype.slice.call(arguments,1),i=e.shift.apply(e,i);return n&&this._notifySplice(e,t.path,0,0,[i]),i},unshift:function(e){var t={},e=this._get(e,this,t),n=Array.prototype.slice.call(arguments,1),i=e.unshift.apply(e,n);return n.length&&this._notifySplice(e,t.path,0,n.length,[]),i},prepareModelNotifyPath:function(e){this.mixin(e,{fire:Polymer.Base.fire,_getEvent:Polymer.Base._getEvent,__eventCache:Polymer.Base.__eventCache,notifyPath:Polymer.Base.notifyPath,_get:Polymer.Base._get,_EVENT_CHANGED:Polymer.Base._EVENT_CHANGED,_notifyPath:Polymer.Base._notifyPath,_notifyPathUp:Polymer.Base._notifyPathUp,_pathEffector:Polymer.Base._pathEffector,_annotationPathEffect:Polymer.Base._annotationPathEffect,_complexObserverPathEffect:Polymer.Base._complexObserverPathEffect,_annotatedComputationPathEffect:Polymer.Base._annotatedComputationPathEffect,_computePathEffect:Polymer.Base._computePathEffect,_notifyBoundPaths:Polymer.Base._notifyBoundPaths,_getPathParts:Polymer.Base._getPathParts})}})}(),Polymer.Base._addFeature({resolveUrl:function(e){return Polymer.ResolveUrl.resolveUrl(e,this._importPath)}}),Polymer.CssParse={parse:function(e){return e=this._clean(e),this._parseCss(this._lex(e),e)},_clean:function(e){return e.replace(this._rx.comments,"").replace(this._rx.port,"")},_lex:function(e){for(var t={start:0,end:e.length},n=t,i=0,r=e.length;i<r;i++)switch(e[i]){case this.OPEN_BRACE:n.rules||(n.rules=[]);var o=n,n={start:i+1,parent:o,previous:o.rules[o.rules.length-1]};o.rules.push(n);break;case this.CLOSE_BRACE:n.end=i+1,n=n.parent||t}return t},_parseCss:function(e,t){var n,i=t.substring(e.start,e.end-1),r=(e.parsedCssText=e.cssText=i.trim(),e.parent&&(n=e.previous?e.previous.end:e.parent.start,i=t.substring(n,e.start-1),i=(i=(i=this._expandUnicodeEscapes(i)).replace(this._rx.multipleSpaces," ")).substring(i.lastIndexOf(";")+1),n=e.parsedSelector=e.selector=i.trim(),e.atRule=0===n.indexOf(this.AT_START),e.atRule?0===n.indexOf(this.MEDIA_START)?e.type=this.types.MEDIA_RULE:n.match(this._rx.keyframesRule)&&(e.type=this.types.KEYFRAMES_RULE,e.keyframesName=e.selector.split(this._rx.multipleSpaces).pop()):0===n.indexOf(this.VAR_START)?e.type=this.types.MIXIN_RULE:e.type=this.types.STYLE_RULE),e.rules);if(r)for(var o,s=0,a=r.length;s<a&&(o=r[s]);s++)this._parseCss(o,t);return e},_expandUnicodeEscapes:function(e){return e.replace(/\\([0-9a-f]{1,6})\s/gi,function(){for(var e=arguments[1],t=6-e.length;t--;)e="0"+e;return"\\"+e})},stringify:function(e,t,n){n=n||"";var i="";if(e.cssText||e.rules){var r=e.rules;if(r&&!this._hasMixinRules(r))for(var o,s=0,a=r.length;s<a&&(o=r[s]);s++)i=this.stringify(o,t,i);else i=(i=(i=t?e.cssText:this.removeCustomProps(e.cssText)).trim())&&"  "+i+"\n"}return i&&(e.selector&&(n+=e.selector+" "+this.OPEN_BRACE+"\n"),n+=i,e.selector)&&(n+=this.CLOSE_BRACE+"\n\n"),n},_hasMixinRules:function(e){return 0===e[0].selector.indexOf(this.VAR_START)},removeCustomProps:function(e){return e=this.removeCustomPropAssignment(e),this.removeCustomPropApply(e)},removeCustomPropAssignment:function(e){return e.replace(this._rx.customProp,"").replace(this._rx.mixinProp,"")},removeCustomPropApply:function(e){return e.replace(this._rx.mixinApply,"").replace(this._rx.varApply,"")},types:{STYLE_RULE:1,KEYFRAMES_RULE:7,MEDIA_RULE:4,MIXIN_RULE:1e3},OPEN_BRACE:"{",CLOSE_BRACE:"}",_rx:{comments:/\/\*[^*]*\*+([^\/*][^*]*\*+)*\//gim,port:/@import[^;]*;/gim,customProp:/(?:^[^;\-\s}]+)?--[^;{}]*?:[^{};]*?(?:[;\n]|$)/gim,mixinProp:/(?:^[^;\-\s}]+)?--[^;{}]*?:[^{};]*?{[^}]*?}(?:[;\n]|$)?/gim,mixinApply:/@apply\s*\(?[^);]*\)?\s*(?:[;\n]|$)?/gim,varApply:/[^;:]*?:[^;]*?var\([^;]*\)(?:[;\n]|$)?/gim,keyframesRule:/^@[^\s]*keyframes/,multipleSpaces:/\s+/g},VAR_START:"--",MEDIA_START:"@media",AT_START:"@"},Polymer.StyleUtil=function(){var a=Polymer.Settings;return{unscopedStyleImports:new WeakMap,SHADY_UNSCOPED_ATTR:"shady-unscoped",NATIVE_VARIABLES:Polymer.Settings.useNativeCSSProperties,MODULE_STYLES_SELECTOR:"style, link[rel=import][type~=css], template",INCLUDE_ATTR:"include",toCssText:function(e,t){return"string"==typeof e&&(e=this.parser.parse(e)),t&&this.forEachRule(e,t),this.parser.stringify(e,this.NATIVE_VARIABLES)},forRulesInStyles:function(e,t,n){if(e)for(var i,r=0,o=e.length;r<o&&(i=e[r]);r++)this.forEachRuleInStyle(i,t,n)},forActiveRulesInStyles:function(e,t,n){if(e)for(var i,r=0,o=e.length;r<o&&(i=e[r]);r++)this.forEachRuleInStyle(i,t,n,!0)},rulesForStyle:function(e){return!e.__cssRules&&e.textContent&&(e.__cssRules=this.parser.parse(e.textContent)),e.__cssRules},isKeyframesSelector:function(e){return e.parent&&e.parent.type===this.ruleTypes.KEYFRAMES_RULE},forEachRuleInStyle:function(t,n,i,e){var r,o,s=this.rulesForStyle(t);this.forEachRule(s,r=n?function(e){n(e,t)}:r,o=i?function(e){i(e,t)}:o,e)},forEachRule:function(e,t,n,i){if(e){var r,o=!1,s=(i&&e.type===this.ruleTypes.MEDIA_RULE&&(r=e.selector.match(this.rx.MEDIA_MATCH))&&!window.matchMedia(r[1]).matches&&(o=!0),e.type===this.ruleTypes.STYLE_RULE?t(e):n&&e.type===this.ruleTypes.KEYFRAMES_RULE?n(e):e.type===this.ruleTypes.MIXIN_RULE&&(o=!0),e.rules);if(s&&!o)for(var a,c=0,l=s.length;c<l&&(a=s[c]);c++)this.forEachRule(a,t,n,i)}},applyCss:function(e,t,n,i){e=this.createScopeStyle(e,t);return this.applyStyle(e,n,i)},applyStyle:function(e,t,n){t=t||document.head;n=n&&n.nextSibling||t.firstChild;return this.__lastHeadApplyNode=e,t.insertBefore(e,n)},createScopeStyle:function(e,t){var n=document.createElement("style");return t&&n.setAttribute("scope",t),n.textContent=e,n},__lastHeadApplyNode:null,applyStylePlaceHolder:function(e){var e=document.createComment(" Shady DOM styles for "+e+" "),t=this.__lastHeadApplyNode?this.__lastHeadApplyNode.nextSibling:null,n=document.head;return n.insertBefore(e,t||n.firstChild),this.__lastHeadApplyNode=e},cssFromModules:function(e,t){for(var n=e.trim().split(/\s+/),i="",r=0;r<n.length;r++)i+=this.cssFromModule(n[r],t);return i},cssFromModule:function(e,t){var n=Polymer.DomModule.import(e);return n&&!n._cssText&&(n._cssText=this.cssFromElement(n)),!n&&t&&console.warn("Could not find style data in module named",e),n&&n._cssText||""},cssFromElement:function(e){for(var t,n,i="",r=e.content||e,o=Polymer.TreeApi.arrayCopy(r.querySelectorAll(this.MODULE_STYLES_SELECTOR)),s=0;s<o.length;s++)"template"===(n=o[s]).localName?n.hasAttribute("preserve-content")||(i+=this.cssFromElement(n)):"style"===n.localName?((t=n.getAttribute(this.INCLUDE_ATTR))&&(i+=this.cssFromModules(t,!0)),(n=n.__appliedElement||n).parentNode.removeChild(n),t=this.resolveCss(n.textContent,e.ownerDocument),!a.useNativeShadow&&n.hasAttribute(this.SHADY_UNSCOPED_ATTR)?(n.textContent=t,document.head.insertBefore(n,document.head.firstChild)):i+=t):n.import&&n.import.body&&(t=this.resolveCss(n.import.body.textContent,n.import),!a.useNativeShadow&&n.hasAttribute(this.SHADY_UNSCOPED_ATTR)?this.unscopedStyleImports.has(n.import)||(this.unscopedStyleImports.set(n.import,!0),(n=document.createElement("style")).setAttribute(this.SHADY_UNSCOPED_ATTR,""),n.textContent=t,document.head.insertBefore(n,document.head.firstChild)):i+=t);return i},styleIncludesToTemplate:function(e){for(var t,n=e.content.querySelectorAll("style[include]"),i=0;i<n.length;i++)(t=n[i]).parentNode.insertBefore(this._includesToFragment(t.getAttribute("include")),t)},_includesToFragment:function(e){for(var t=e.trim().split(" "),n=document.createDocumentFragment(),i=0;i<t.length;i++){var r=Polymer.DomModule.import(t[i],"template");r&&this._addStylesToFragment(n,r.content)}return n},_addStylesToFragment:function(e,t){for(var n=t.querySelectorAll("style"),i=0;i<n.length;i++){var r,o=(r=n[i]).getAttribute("include");o&&e.appendChild(this._includesToFragment(o)),r.textContent&&e.appendChild(r.cloneNode(!0))}},isTargetedBuild:function(e){return a.useNativeShadow?"shadow"===e:"shady"===e},cssBuildTypeForModule:function(e){e=Polymer.DomModule.import(e);if(e)return this.getCssBuildType(e)},getCssBuildType:function(e){return e.getAttribute("css-build")},_findMatchingParen:function(e,t){for(var n=0,i=t,r=e.length;i<r;i++)switch(e[i]){case"(":n++;break;case")":if(0==--n)return i}return-1},processVariableAndFallback:function(e,t){var n,i,r=e.indexOf("var(");return-1===r?t(e,"","",""):(i=this._findMatchingParen(e,r+3),n=e.substring(r+4,i),r=e.substring(0,r),e=this.processVariableAndFallback(e.substring(i+1),t),-1===(i=n.indexOf(","))?t(r,n.trim(),"",e):t(r,n.substring(0,i).trim(),n.substring(i+1).trim(),e))},rx:{VAR_ASSIGN:/(?:^|[;\s{]\s*)(--[\w-]*?)\s*:\s*(?:([^;{]*)|{([^}]*)})(?:(?=[;\s}])|$)/gi,MIXIN_MATCH:/(?:^|\W+)@apply\s*\(?([^);\n]*)\)?/gi,VAR_CONSUMED:/(--[\w-]+)\s*([:,;)]|$)/gi,ANIMATION_MATCH:/(animation\s*:)|(animation-name\s*:)/,MEDIA_MATCH:/@media[^(]*(\([^)]*\))/,IS_VAR:/^--/,BRACKETED:/\{[^}]*\}/g,HOST_PREFIX:"(?:^|[^.#[:])",HOST_SUFFIX:"($|[.:[\\s>+~])"},resolveCss:Polymer.ResolveUrl.resolveCss,parser:Polymer.CssParse,ruleTypes:Polymer.CssParse.types}}(),Polymer.StyleTransformer=function(){var u=Polymer.StyleUtil,p=Polymer.Settings,e={dom:function(e,t,n,i){this._transformDom(e,t||"",n,i)},_transformDom:function(e,t,n,i){e.setAttribute&&this.element(e,t,n,i);for(var r=Polymer.dom(e).childNodes,o=0;o<r.length;o++)this._transformDom(r[o],t,n,i)},element:function(e,t,n,i){n?i?e.removeAttribute(r):e.setAttribute(r,t):t&&(e.classList?i?(e.classList.remove(r),e.classList.remove(t)):(e.classList.add(r),e.classList.add(t)):e.getAttribute&&(n=e.getAttribute(g),i?n&&e.setAttribute(g,n.replace(r,"").replace(t,"")):e.setAttribute(g,(n?n+" ":"")+r+" "+t)))},elementStyles:function(e,t){var n,i,r=e._styles,o="",s=e.__cssBuild,a=p.useNativeShadow||"shady"===s;a&&(n=this,i=function(e){e.selector=n._slottedToContent(e.selector),e.selector=e.selector.replace(f,":host > *"),e.selector=n._dirShadowTransform(e.selector),t&&t(e)});for(var c,l=0,d=r.length;l<d&&(c=r[l]);l++){var h=u.rulesForStyle(c);o+=a?u.toCssText(h,i):this.css(h,e.is,e.extends,t,e._scopeCssViaAttr)+"\n\n"}return o.trim()},css:function(e,t,n,i,r){var o=this._calcHostScope(t,n),s=(t=this._calcElementScope(t,r),this);return u.toCssText(e,function(e){e.isScoped||(s.rule(e,t,o),e.isScoped=!0),i&&i(e,t,o)})},_calcElementScope:function(e,t){return e?t?_+e+y:a+e:""},_calcHostScope:function(e,t){return t?"[is="+e+"]":e},rule:function(e,t,n){this._transformRule(e,this._transformComplexSelector,t,n)},_transformRule:function(e,t,n,i){e.selector=e.transformedSelector=this._transformRuleCss(e,t,n,i)},_splitSelectorList:function(e){for(var t,n=[],i="",r=0;0<=r&&r<e.length;r++)"("===e[r]?(t=u._findMatchingParen(e,r),i+=e.slice(r,t+1),r=t):e[r]===d?(n.push(i),i=""):i+=e[r];return i&&n.push(i),0===n.length&&n.push(e),n},_transformRuleCss:function(e,t,n,i){var r=this._splitSelectorList(e.selector);if(!u.isKeyframesSelector(e))for(var o,s=0,a=r.length;s<a&&(o=r[s]);s++)r[s]=t.call(this,o,n,i);return r.join(d)},_ensureScopedDir:function(e){var t=e.match(E);return e=t&&""===t[1]&&t[0].length===e.length?"*"+e:e},_additionalDirSelectors:function(e,t,n){return e&&t?d+(n=n||"")+" "+e+" "+t:""},_transformComplexSelector:function(e,r,o){var s=!1,a=!1,c=!1,l=this;return e=e.trim(),e=(e=(e=this._slottedToContent(e)).replace(f,":host > *")).replace(b,h+" $1"),e=(e=this._ensureScopedDir(e)).replace(n,function(e,t,n){var i;return n=s?n.replace(m," "):(i=l._transformCompoundSelector(n,t,r,o),s=s||i.stop,a=a||i.hostContext,c=c||i.dir,t=i.combinator,i.value),t+n}),e=a?e.replace(i,function(e,t,n,i){t=t+n+" "+o+i+d+" "+t+o+n+i;return c&&(t+=l._additionalDirSelectors(n,i,o)),t}):e},_transformDir:function(e){return e=(e=e.replace(w,R)).replace(E,T)},_transformCompoundSelector:function(e,t,n,i){var r,o=e.search(m),s=!1,a=!1;return e.match(E)&&(e=this._transformDir(e),a=!0),0<=e.indexOf(c)?s=!0:0<=e.indexOf(h)?e=this._transformHostSelector(e,i):0!==o&&(e=n?this._transformSimpleSelector(e,n):e),0<=e.indexOf(l)&&(t=""),0<=o&&(e=e.replace(m," "),r=!0),{value:e,combinator:t,stop:r,hostContext:s,dir:a}},_transformSimpleSelector:function(e,t){e=e.split(v);return e[0]+=t,e.join(v)},_transformHostSelector:function(e,i){var t=e.match(s),t=t&&t[2].trim()||"";return t?t[0].match(o)?e.replace(s,function(e,t,n){return i+n}):t.split(o)[0]===i?t:C:e.replace(h,i)},documentRule:function(e){e.selector=e.parsedSelector,this.normalizeRootSelector(e),p.useNativeShadow||this._transformRule(e,this._transformDocumentSelector)},normalizeRootSelector:function(e){e.selector=e.selector.replace(f,"html");var t=(t=this._splitSelectorList(e.selector)).filter(function(e){return!e.match(S)});e.selector=t.join(d)},_transformDocumentSelector:function(e){return this._transformComplexSelector(e,t)},_slottedToContent:function(e){return e.replace(P,l+"> $1")},_dirShadowTransform:function(e){return e.match(/:dir\(/)?this._splitSelectorList(e).map(function(e){e=this._ensureScopedDir(e),e=this._transformDir(e);var t=i.exec(e);return t&&(e+=this._additionalDirSelectors(t[2],t[3],"")),e},this).join(d):e},SCOPE_NAME:"style-scope"},r=e.SCOPE_NAME,t=":not(["+r+"]):not(."+r+")",d=",",n=/(^|[\s>+~]+)((?:\[.+?\]|[^\s>+~=\[])+)/g,o=/[[.:#*]/,h=":host",f=":root",s=/(:host)(?:\(((?:\([^)(]*\)|[^)(]*)+?)\))/,c=":host-context",i=/(.*)(?::host-context)(?:\(((?:\([^)(]*\)|[^)(]*)+?)\))(.*)/,l="::content",m=/::content|::shadow|\/deep\//,a=".",_="["+r+"~=",y="]",v=":",g="class",b=new RegExp("^("+l+")"),C="should_not_match",P=/(?:::slotted)(?:\(((?:\([^)(]*\)|[^)(]*)+?)\))/g,S=/:host(?:\s*>\s*\*)?/,E=/(.*):dir\((ltr|rtl)\)/,T=':host-context([dir="$2"]) $1',w=/:host\(:dir\((rtl|ltr)\)\)/g,R=':host-context([dir="$1"])';return e}(),Polymer.StyleExtends=function(){var t=Polymer.StyleUtil;return{hasExtends:function(e){return Boolean(e.match(this.rx.EXTEND))},transform:function(e){var e=t.rulesForStyle(e),n=this;return t.forEachRule(e,function(e){if(n._mapRuleOntoParent(e),e.parent)for(;t=n.rx.EXTEND.exec(e.cssText);){var t=t[1],t=n._findExtendor(t,e);t&&n._extendRule(e,t)}e.cssText=e.cssText.replace(n.rx.EXTEND,"")}),t.toCssText(e,function(e){e.selector.match(n.rx.STRIP)&&(e.cssText="")},!0)},_mapRuleOntoParent:function(e){if(e.parent){for(var t=e.parent.map||(e.parent.map={}),n=e.selector.split(","),i=0;i<n.length;i++)t[n[i].trim()]=e;return t}},_findExtendor:function(e,t){return t.parent&&t.parent.map&&t.parent.map[e]||this._findExtendor(e,t.parent)},_extendRule:function(t,e){t.parent!==e.parent&&this._cloneAndAddRuleToParent(e,t.parent),t.extends=t.extends||[],t.extends.push(e),e.selector=e.selector.replace(this.rx.STRIP,""),e.selector=(e.selector&&e.selector+",\n")+t.selector,e.extends&&e.extends.forEach(function(e){this._extendRule(t,e)},this)},_cloneAndAddRuleToParent:function(e,t){(e=Object.create(e)).parent=t,e.extends&&(e.extends=e.extends.slice()),t.rules.push(e)},rx:{EXTEND:/@extends\(([^)]*)\)\s*?;/gim,STRIP:/%[^,]*$/}}}(),Polymer.ApplyShim=function(){"use strict";var y=Polymer.StyleUtil,o=y.rx.MIXIN_MATCH,n=y.rx.VAR_ASSIGN,i=/var\(\s*(--[^,]*),\s*(--[^)]*)\)/g,c=/;\s*/m,l=/^\s*(initial)|(inherit)\s*$/,v="_-_",r={};function g(e,t){e=e.trim(),r[e]={properties:t,dependants:{}}}function b(e){return e=e.trim(),r[e]}function C(e){for(var t,n,i,r,o=e.split(";"),s={},a=0;a<o.length;a++)(i=o[a])&&1<(i=i.split(":")).length&&(t=i[0].trim(),n=t,i=i.slice(1).join(":"),r=void 0,r=l.exec(i),r=i=r?r[1]?S._getInitialValueForProperty(n):"apply-shim-inherit":i,s[t]=r);return s}function s(e,t,n,i){if(n&&y.processVariableAndFallback(n,function(e,t){t&&b(t)&&(i="@apply "+t+";")}),!i)return e;var r,o,s=P(i),a=e.slice(0,e.indexOf("--")),c=C(s),s=c,l=b(t),d=l&&l.properties,h=(d?(s=Object.create(d),s=Polymer.Base.mixin(s,c)):g(t,s),[]),u=!1;for(r in s)void 0===(o=c[r])&&(o="initial"),!d||r in d||(u=!0),h.push(t+v+r+": "+o);if(u){var p,f=l,m=S.__currentElementProto,_=m&&m.is;for(p in f.dependants)p!==_&&(f.dependants[p].__applyShimInvalid=!0)}return l&&(l.properties=s),(a=n?e+";"+a:a)+h.join("; ")+";"}function a(e,t,n){return"var("+t+",var("+n+"))"}function P(e){for(;i=o.exec(e);){var t=i[0],n=i[1],i=i.index,r=i+t.indexOf("@apply"),t=i+t.length,r=e.slice(0,r),t=e.slice(t),n=function(e,t){var n=[],i=b(e=e.replace(c,""));if(i||(g(e,{}),i=b(e)),i){var r,o,s,a=S.__currentElementProto;for(r in a&&(i.dependants[a.is]=a),i.properties)s=t&&t[r],o=[r,": var(",e,v,r],s&&o.push(",",s),o.push(")"),n.push(o.join(""))}return n.join("; ")}(n,C(r));e=[r,n,t].join(""),o.lastIndex=i+n.length}return e}var S={_measureElement:null,_map:r,_separator:v,transform:function(e,t){this.__currentElementProto=t,y.forRulesInStyles(e,this._boundFindDefinitions),y.forRulesInStyles(e,this._boundFindApplications),t&&(t.__applyShimInvalid=!1),this.__currentElementProto=null},_findDefinitions:function(e){var t=e.parsedCssText;t=(t=t.replace(i,a)).replace(n,s),e.cssText=t,":root"===e.selector&&(e.selector=":host > *")},_findApplications:function(e){e.cssText=P(e.cssText)},transformRule:function(e){this._findDefinitions(e),this._findApplications(e)},_getInitialValueForProperty:function(e){return this._measureElement||(this._measureElement=document.createElement("meta"),this._measureElement.style.all="initial",document.head.appendChild(this._measureElement)),window.getComputedStyle(this._measureElement).getPropertyValue(e)}};return S._boundTransformRule=S.transformRule.bind(S),S._boundFindDefinitions=S._findDefinitions.bind(S),S._boundFindApplications=S._findApplications.bind(S),S}(),function(){var t=Polymer.Base._prepElement,n=Polymer.Settings.useNativeShadow,a=Polymer.StyleUtil,i=Polymer.StyleTransformer,c=Polymer.StyleExtends,r=Polymer.ApplyShim,o=Polymer.Settings;Polymer.Base._addFeature({_prepElement:function(e){this._encapsulateStyle&&"shady"!==this.__cssBuild&&i.element(e,this.is,this._scopeCssViaAttr),t.call(this,e)},_prepStyles:function(){void 0===this._encapsulateStyle&&(this._encapsulateStyle=!n),n||(this._scopeStyle=a.applyStylePlaceHolder(this.is)),this.__cssBuild=a.cssBuildTypeForModule(this.is)},_prepShimStyles:function(){var e;this._template?(e=a.isTargetedBuild(this.__cssBuild),o.useNativeCSSProperties&&"shadow"===this.__cssBuild&&e?o.preserveStyleIncludes&&a.styleIncludesToTemplate(this._template):(this._styles=this._styles||this._collectStyles(),o.useNativeCSSProperties&&!this.__cssBuild&&r.transform(this._styles,this),e=o.useNativeCSSProperties&&e?this._styles.length&&this._styles[0].textContent.trim():i.elementStyles(this),this._prepStyleProperties(),!this._needsStyleProperties()&&e&&a.applyCss(e,this.is,n?this._template.content:null,this._scopeStyle))):this._styles=[]},_collectStyles:function(){var e=[],t="",n=this.styleModules;if(n)for(var i,r=0,o=n.length;r<o&&(i=n[r]);r++)t+=a.cssFromModule(i);t+=a.cssFromModule(this.is);var s=this._template&&this._template.parentNode;return!this._template||s&&s.id.toLowerCase()===this.is||(t+=a.cssFromElement(this._template)),t&&((s=document.createElement("style")).textContent=t,c.hasExtends(s.textContent)&&(t=c.transform(s)),e.push(s)),e},_elementAdd:function(e){this._encapsulateStyle&&(e.__styleScoped?e.__styleScoped=!1:i.dom(e,this.is,this._scopeCssViaAttr))},_elementRemove:function(e){this._encapsulateStyle&&i.dom(e,this.is,this._scopeCssViaAttr,!0)},scopeSubtree:function(e,t){var o,r;if(!n)return o=this,(r=function(e){if(e.nodeType===Node.ELEMENT_NODE)for(var t,n=e.getAttribute("class"),i=(e.setAttribute("class",o._scopeElementClass(e,n)),e.querySelectorAll("*")),r=0;r<i.length&&(t=i[r]);r++)n=t.getAttribute("class"),t.setAttribute("class",o._scopeElementClass(t,n))})(e),t?((t=new MutationObserver(function(e){for(var t,n=0;n<e.length&&(t=e[n]);n++)if(t.addedNodes)for(var i=0;i<t.addedNodes.length;i++)r(t.addedNodes[i])})).observe(e,{childList:!0,subtree:!0}),t):void 0}})}(),Polymer.StyleProperties=function(){"use strict";var a=Polymer.DomApi.matchesSelector,l=Polymer.StyleUtil,p=Polymer.StyleTransformer,o=navigator.userAgent.match("Trident"),c=Polymer.Settings;return{decorateStyles:function(e,n){var t,i=this,r={},o=[],s=0,a=p._calcHostScope(n.is,n.extends),c=(l.forRulesInStyles(e,function(t,e){i.decorateRule(t),t.index=s++,i.whenHostOrRootRule(n,t,e,function(e){t.parent.type===l.ruleTypes.MEDIA_RULE&&(n.__notStyleScopeCacheable=!0),e.isHost&&(e=e.selector.split(" ").some(function(e){return 0===e.indexOf(a)&&e.length!==a.length}),n.__notStyleScopeCacheable=n.__notStyleScopeCacheable||e)}),i.collectPropertiesInCssText(t.propertyInfo.cssText,r)},function(e){o.push(e)}),e._keyframes=o,[]);for(t in r)c.push(t);return c},decorateRule:function(e){var t,n;return e.propertyInfo||(t={},this.collectProperties(e,n={})&&(t.properties=n,e.rules=null),t.cssText=this.collectCssText(e),e.propertyInfo=t)},collectProperties:function(e,t){var n=e.propertyInfo;if(!n){for(var i,r,o,s=this.rx.VAR_ASSIGN,a=e.parsedCssText;i=s.exec(a);)"inherit"!==(r=(i[2]||i[3]).trim())&&(t[i[1].trim()]=r),o=!0;return o}if(n.properties)return Polymer.Base.mixin(t,n.properties),!0},collectCssText:function(e){return this.collectConsumingCssText(e.parsedCssText)},collectConsumingCssText:function(e){return e.replace(this.rx.BRACKETED,"").replace(this.rx.VAR_ASSIGN,"")},collectPropertiesInCssText:function(e,t){for(var n;n=this.rx.VAR_CONSUMED.exec(e);){var i=n[1];":"!==n[2]&&(t[i]=!0)}},reify:function(e){for(var t,n=Object.getOwnPropertyNames(e),i=0;i<n.length;i++)e[t=n[i]]=this.valueForProperty(e[t],e)},valueForProperty:function(e,r){var o;return(e=e&&(0<=e.indexOf(";")?this.valueForProperties(e,r):(o=this,l.processVariableAndFallback(e,function(e,t,n,i){t=o.valueForProperty(r[t],r);return t&&"initial"!==t?"apply-shim-inherit"===t&&(t="inherit"):t=o.valueForProperty(r[n]||n,r)||n,e+(t||"")+i}))))&&e.trim()||""},valueForProperties:function(e,t){for(var n,i,r,o=e.split(";"),s=0;s<o.length;s++)(n=o[s])&&(this.rx.MIXIN_MATCH.lastIndex=0,(i=this.rx.MIXIN_MATCH.exec(n))?n=this.valueForProperty(t[i[1]],t):-1!==(i=n.indexOf(":"))&&(r=(r=n.substring(i)).trim(),r=this.valueForProperty(r,t)||r,n=n.substring(0,i)+r),o[s]=n&&n.lastIndexOf(";")===n.length-1?n.slice(0,-1):n||"");return o.join(";")},applyProperties:function(e,t){var n="";e.propertyInfo||this.decorateRule(e),e.propertyInfo.cssText&&(n=this.valueForProperties(e.propertyInfo.cssText,t)),e.cssText=n},applyKeyframeTransforms:function(e,t){var n=e.cssText,i=e.cssText;if(null==e.hasAnimations&&(e.hasAnimations=this.rx.ANIMATION_MATCH.test(n)),e.hasAnimations)if(null==e.keyframeNamesToTransform)for(var r in e.keyframeNamesToTransform=[],t)n!==(i=(0,t[r])(n))&&(n=i,e.keyframeNamesToTransform.push(r));else{for(var o=0;o<e.keyframeNamesToTransform.length;++o)n=(0,t[e.keyframeNamesToTransform[o]])(n);i=n}e.cssText=i},propertyDataFromStyles:function(e,i){var r={},o=this,s=[];return l.forActiveRulesInStyles(e,function(e){e.propertyInfo||o.decorateRule(e);var t,n=e.transformedSelector||e.parsedSelector;i&&e.propertyInfo.properties&&n&&a.call(i,n)&&(o.collectProperties(e,r),n=e.index,e=s,t=parseInt(n/32),n=1<<n%32,e[t]=(e[t]||0)|n)}),{properties:r,key:s}},_rootSelector:/:root|:host\s*>\s*\*/,_checkRoot:function(e,t){return Boolean(t.match(this._rootSelector))||"html"===e&&-1<t.indexOf("html")},whenHostOrRootRule:function(e,t,n,i){var r,o,s,a;t.propertyInfo||self.decorateRule(t),t.propertyInfo.properties&&(r=e.is?p._calcHostScope(e.is,e.extends):"html",o=t.parsedSelector,a=!(s=this._checkRoot(r,o))&&0===o.indexOf(":host"),"shady"===(e.__cssBuild||n.__cssBuild)&&(a=!(s=o===r+" > *."+r||-1<o.indexOf("html"))&&0===o.indexOf(r)),s||a)&&(n=r,a&&(c.useNativeShadow&&!t.transformedSelector&&(t.transformedSelector=p._transformRuleCss(t,p._transformComplexSelector,e.is,r)),n=t.transformedSelector||t.parsedSelector),i({selector:n=s&&"html"===r?t.transformedSelector||t.parsedSelector:n,isHost:a,isRoot:s}))},hostAndRootPropertiesForScope:function(i){var r={},o={},s=this;return l.forActiveRulesInStyles(i._styles,function(n,e){s.whenHostOrRootRule(i,n,e,function(e){var t=i._element||i;a.call(t,e.selector)&&(e.isHost?s.collectProperties(n,r):s.collectProperties(n,o))})}),{rootProps:o,hostProps:r}},transformStyles:function(t,n,i){var r=this,o=p._calcHostScope(t.is,t.extends),e=t.extends?"\\"+o.slice(0,-1)+"\\]":o,s=new RegExp(this.rx.HOST_PREFIX+e+this.rx.HOST_SUFFIX),a=this._elementKeyframeTransforms(t,i);return p.elementStyles(t,function(e){r.applyProperties(e,n),c.useNativeShadow||Polymer.StyleUtil.isKeyframesSelector(e)||!e.cssText||(r.applyKeyframeTransforms(e,a),r._scopeSelector(e,s,o,t._scopeCssViaAttr,i))})},_elementKeyframeTransforms:function(e,t){var n=e._styles._keyframes,i={};if(!c.useNativeShadow&&n)for(var r=0,o=n[r];r<n.length;o=n[++r])this._scopeKeyframes(o,t),i[o.keyframesName]=this._keyframesRuleTransformer(o);return i},_keyframesRuleTransformer:function(t){return function(e){return e.replace(t.keyframesNameRx,t.transformedKeyframesName)}},_scopeKeyframes:function(e,t){e.keyframesNameRx=new RegExp("\\b"+e.keyframesName+"(?!\\B|-)","g"),e.transformedKeyframesName=e.keyframesName+"-"+t,e.transformedSelector=e.transformedSelector||e.selector,e.selector=e.transformedSelector.replace(e.keyframesName,e.transformedKeyframesName)},_hasDirOrHostContext:function(e){return/:host-context|:dir/.test(e)},_scopeSelector:function(e,t,n,i,r){e.transformedSelector=e.transformedSelector||e.selector;for(var o,s=e.transformedSelector,a=p._calcElementScope(r,i),c=p._calcElementScope(n,i),l=s.split(","),d=this._hasDirOrHostContext(e.parsedSelector),h=0,u=l.length;h<u&&(o=l[h]);h++)l[h]=o.match(t)?o.replace(n,a):d?o.replace(c,a+" "+c):a+" "+o;e.selector=l.join(",")},applyElementScopeSelector:function(e,t,n,i){var r=i?e.getAttribute(p.SCOPE_NAME):e.getAttribute("class")||"",n=n?r.replace(n,t):(r?r+" ":"")+this.XSCOPE_NAME+" "+t;r!==n&&(i?e.setAttribute(p.SCOPE_NAME,n):e.setAttribute("class",n))},applyElementStyle:function(e,t,n,i){var t=i?i.textContent||"":this.transformStyles(e,t,n),r=e._customStyle;return r&&!c.useNativeShadow&&r!==i&&(r._useCount--,r._useCount<=0)&&r.parentNode&&r.parentNode.removeChild(r),c.useNativeShadow?e._customStyle?(e._customStyle.textContent=t,i=e._customStyle):t&&(i=l.applyCss(t,n,e.root,e._scopeStyle)):i?i.parentNode||(o&&-1<t.indexOf("@media")&&(i.textContent=t),l.applyStyle(i,null,e._scopeStyle)):t&&(i=l.applyCss(t,n,null,e._scopeStyle)),i&&(i._useCount=i._useCount||0,e._customStyle!=i&&i._useCount++,e._customStyle=i),i},mixinCustomStyle:function(e,t){var n,i;for(i in t)!(n=t[i])&&0!==n||(e[i]=n)},updateNativeStyleProperties:function(e,t){var n=e.__customStyleProperties;if(n)for(var i=0;i<n.length;i++)e.style.removeProperty(n[i]);var r,o=[];for(r in t)null!==t[r]&&(e.style.setProperty(r,t[r]),o.push(r));e.__customStyleProperties=o},rx:l.rx,XSCOPE_NAME:"x-scope"}}(),Polymer.StyleCache=function(){this.cache={}},Polymer.StyleCache.prototype={MAX:100,store:function(e,t,n,i){t.keyValues=n,t.styles=i;n=this.cache[e]=this.cache[e]||[];n.push(t),n.length>this.MAX&&n.shift()},retrieve:function(e,t,n){var i=this.cache[e];if(i)for(var r,o=i.length-1;0<=o;o--)if(n===(r=i[o]).styles&&this._objectsEqual(t,r.keyValues))return r},clear:function(){this.cache={}},_objectsEqual:function(e,t){var n,i,r;for(r in e)if(n=e[r],i=t[r],!("object"==typeof n&&n?this._objectsStrictlyEqual(n,i):n===i))return!1;return!Array.isArray(e)||e.length===t.length},_objectsStrictlyEqual:function(e,t){return this._objectsEqual(e,t)&&this._objectsEqual(t,e)}},Polymer.StyleDefaults=function(){var i=Polymer.StyleProperties,e=Polymer.StyleCache,r=Polymer.Settings.useNativeCSSProperties;return{_styles:[],_properties:null,customStyle:{},_styleCache:new e,_element:Polymer.DomApi.wrap(document.documentElement),addStyle:function(e){this._styles.push(e),this._properties=null},get _styleProperties(){return this._properties||(i.decorateStyles(this._styles,this),this._styles._scopeStyleProperties=null,this._properties=i.hostAndRootPropertiesForScope(this).rootProps,i.mixinCustomStyle(this._properties,this.customStyle),i.reify(this._properties)),this._properties},hasStyleProperties:function(){return Boolean(this._properties)},_needsStyleProperties:function(){},_computeStyleProperties:function(){return this._styleProperties},updateStyles:function(e){this._properties=null,e&&Polymer.Base.mixin(this.customStyle,e),this._styleCache.clear();for(var t,n=0;n<this._styles.length;n++)(t=(t=this._styles[n]).__importElement||t)._apply();r&&i.updateNativeStyleProperties(document.documentElement,this.customStyle)}}}(),function(){"use strict";var r=Polymer.Base.serializeValueToAttribute,a=Polymer.StyleProperties,n=Polymer.StyleTransformer,i=Polymer.StyleDefaults,c=Polymer.Settings.useNativeShadow,t=Polymer.Settings.useNativeCSSProperties,l=(Polymer.Base._addFeature({_prepStyleProperties:function(){t||(this._ownStylePropertyNames=this._styles&&this._styles.length?a.decorateStyles(this._styles,this):null)},customStyle:null,getComputedStyleValue:function(e){return t||this._styleProperties||this._computeStyleProperties(),!t&&this._styleProperties&&this._styleProperties[e]||getComputedStyle(this).getPropertyValue(e)},_setupStyleProperties:function(){this.customStyle={},this._styleCache=null,this._styleProperties=null,this._scopeSelector=null,this._ownStyleProperties=null,this._customStyle=null},_needsStyleProperties:function(){return Boolean(!t&&this._ownStylePropertyNames&&this._ownStylePropertyNames.length)},_validateApplyShim:function(){var e,t;this.__applyShimInvalid&&(Polymer.ApplyShim.transform(this._styles,this.__proto__),e=n.elementStyles(this),c?(t=this._template.content.querySelector("style"))&&(t.textContent=e):(t=this._scopeStyle&&this._scopeStyle.nextSibling)&&(t.textContent=e))},_beforeAttached:function(){this._scopeSelector&&!this.__stylePropertiesInvalid||!this._needsStyleProperties()||(this.__stylePropertiesInvalid=!1,this._updateStyleProperties())},_findStyleHost:function(){for(var e,t=this;e=Polymer.dom(t).getOwnerRoot();){if(Polymer.isInstance(e.host))return e.host;t=e.host}return i},_updateStyleProperties:function(){var e,t=this._findStyleHost(),n=(t._styleProperties||t._computeStyleProperties(),t._styleCache||(t._styleCache=new Polymer.StyleCache),a.propertyDataFromStyles(t._styles,this)),i=!this.__notStyleScopeCacheable,r=(i&&(n.key.customStyle=this.customStyle,e=t._styleCache.retrieve(this.is,n.key,this._styles)),Boolean(e)),o=(r?this._styleProperties=e._styleProperties:this._computeStyleProperties(n.properties),this._computeOwnStyleProperties(),r||(e=l.retrieve(this.is,this._ownStyleProperties,this._styles)),Boolean(e)&&!r),s=this._applyStyleProperties(e);r||(e={style:s=s&&c?s.cloneNode(!0):s,_scopeSelector:this._scopeSelector,_styleProperties:this._styleProperties},i&&(n.key.customStyle={},this.mixin(n.key.customStyle,this.customStyle),t._styleCache.store(this.is,e,n.key,this._styles)),o)||l.store(this.is,Object.create(e),this._ownStyleProperties,this._styles)},_computeStyleProperties:function(e){var t=this._findStyleHost(),n=(t._styleProperties||t._computeStyleProperties(),Object.create(t._styleProperties)),i=a.hostAndRootPropertiesForScope(this);this.mixin(n,i.hostProps),e=e||a.propertyDataFromStyles(t._styles,this).properties,this.mixin(n,e),this.mixin(n,i.rootProps),a.mixinCustomStyle(n,this.customStyle),a.reify(n),this._styleProperties=n},_computeOwnStyleProperties:function(){for(var e,t={},n=0;n<this._ownStylePropertyNames.length;n++)t[e=this._ownStylePropertyNames[n]]=this._styleProperties[e];this._ownStyleProperties=t},_scopeCount:0,_applyStyleProperties:function(e){var t=this._scopeSelector,e=(this._scopeSelector=e?e._scopeSelector:this.is+"-"+this.__proto__._scopeCount++,a.applyElementStyle(this,this._styleProperties,this._scopeSelector,e&&e.style));return c||a.applyElementScopeSelector(this,this._scopeSelector,t,this._scopeCssViaAttr),e},serializeValueToAttribute:function(e,t,n){var i;n=n||this,"class"!==t||c||(i=n===this?this.domHost||this.dataHost:this)&&(e=i._scopeElementClass(n,e)),n=this.shadyRoot&&this.shadyRoot._hasDistributed?Polymer.dom(n):n,r.call(this,e,t,n)},_scopeElementClass:function(e,t){return t=c||this._scopeCssViaAttr?t:(t?t+" ":"")+o+" "+this.is+(e._scopeSelector?" "+s+" "+e._scopeSelector:"")},updateStyles:function(e){e&&this.mixin(this.customStyle,e),t?a.updateNativeStyleProperties(this,this.customStyle):(this.isAttached?this._needsStyleProperties()?this._updateStyleProperties():this._styleProperties=null:this.__stylePropertiesInvalid=!0,this._styleCache&&this._styleCache.clear(),this._updateRootStyles())},_updateRootStyles:function(e){e=e||this.root;for(var t,n=Polymer.dom(e)._query(function(e){return e.shadyRoot||e.shadowRoot}),i=0,r=n.length;i<r&&(t=n[i]);i++)t.updateStyles&&t.updateStyles()}}),Polymer.updateStyles=function(e){i.updateStyles(e),Polymer.Base._updateRootStyles(document)},new Polymer.StyleCache),o=(Polymer.customStyleCache=l,n.SCOPE_NAME),s=a.XSCOPE_NAME}(),Polymer.Base._addFeature({_registerFeatures:function(){this._prepIs(),this.factoryImpl&&this._prepConstructor(),this._prepStyles()},_finishRegisterFeatures:function(){this._prepTemplate(),this._prepShimStyles(),this._prepAnnotations(),this._prepEffects(),this._prepBehaviors(),this._prepPropertyInfo(),this._prepBindings(),this._prepShady()},_prepBehavior:function(e){this._addPropertyEffects(e.properties),this._addComplexObserverEffects(e.observers),this._addHostAttributes(e.hostAttributes)},_initFeatures:function(){this._setupGestures(),this._setupConfigure(this.__data__),this._setupStyleProperties(),this._setupDebouncers(),this._setupShady(),this._registerHost(),this._template&&(this._validateApplyShim(),this._poolContent(),this._beginHosting(),this._stampTemplate(),this._endHosting(),this._marshalAnnotationReferences()),this._marshalInstanceEffects(),this._marshalBehaviors(),this._marshalHostAttributes(),this._marshalAttributes(),this._tryReady()},_marshalBehavior:function(e){e.listeners&&this._listenListeners(e.listeners)}}),function(){var e,i=Polymer.StyleProperties,s=Polymer.StyleUtil,r=Polymer.CssParse,o=Polymer.StyleDefaults,a=Polymer.StyleTransformer,c=Polymer.ApplyShim,t=Polymer.Debounce,l=Polymer.Settings;Polymer({is:"custom-style",extends:"style",_template:null,properties:{include:String},ready:function(){this.__appliedElement=this.__appliedElement||this,this.__cssBuild=s.getCssBuildType(this),this.__appliedElement!==this&&(this.__appliedElement.__cssBuild=this.__cssBuild),this.ownerDocument!==window.document&&this.__appliedElement===this&&document.head.appendChild(this),this._tryApply()},attached:function(){this._tryApply()},_tryApply:function(){var e,t,n;this._appliesToDocument||this.parentNode&&"dom-module"!==this.parentNode.localName&&(this._appliesToDocument=!0,e=this.__appliedElement,l.useNativeCSSProperties||(this.__needsUpdateStyles=o.hasStyleProperties(),o.addStyle(e)),e.textContent||this.include?this._apply(!0):(t=this,(n=new MutationObserver(function(){n.disconnect(),t._apply(!0)})).observe(e,{childList:!0})))},_updateStyles:function(){Polymer.updateStyles()},_apply:function(e){var t,n,i,r,o=this.__appliedElement;this.include&&(o.textContent=s.cssFromModules(this.include,!0)+o.textContent),o.textContent&&(t=this.__cssBuild,r=s.isTargetedBuild(t),l.useNativeCSSProperties&&r||(n=s.rulesForStyle(o),r||(s.forEachRule(n,function(e){a.documentRule(e)}),l.useNativeCSSProperties&&!t&&c.transform([o])),l.useNativeCSSProperties?o.textContent=s.toCssText(n):(i=this,r=function(){i._flushCustomProperties()},e?Polymer.RenderStatus.whenReady(r):r())))},_flushCustomProperties:function(){this.__needsUpdateStyles?(this.__needsUpdateStyles=!1,e=t(e,this._updateStyles)):this._applyCustomProperties()},_applyCustomProperties:function(){var e=this.__appliedElement,n=(this._computeStyleProperties(),this._styleProperties),t=s.rulesForStyle(e);t&&(e.textContent=s.toCssText(t,function(e){var t=e.cssText=e.parsedCssText;e.propertyInfo&&e.propertyInfo.cssText&&(t=r.removeCustomPropAssignment(t),e.cssText=i.valueForProperties(t,n))}))}})}(),Polymer.Templatizer={properties:{__hideTemplateChildren__:{observer:"_showHideChildren"}},_instanceProps:Polymer.nob,_parentPropPrefix:"_parent_",templatize:function(e){if(Polymer.Settings.strictTemplatePolicy&&!this._getRootDataHost())throw new Error("strictTemplatePolicy: template owner not trusted");var t,n,i;(this._templatized=e)._content||(e._content=e.content),e._content._ctor?(this.ctor=e._content._ctor,this._prepParentProperties(this.ctor.prototype,e)):(t=Object.create(Polymer.Base),this._customPrepAnnotations(t,e),this._prepParentProperties(t,e),t._prepEffects(),this._customPrepEffects(t),t._prepBehaviors(),t._prepPropertyInfo(),t._prepBindings(),t._notifyPathUp=this._notifyPathUpImpl,t._scopeElementClass=this._scopeElementClassImpl,t.listen=this._listenImpl,t._showHideChildren=this._showHideChildrenImpl,t.__setPropertyOrig=this.__setProperty,t.__setProperty=this.__setPropertyImpl,n=this._constructorImpl,((i=function(e,t){n.call(this,e,t)}).prototype=t).constructor=i,e._content._ctor=i,this.ctor=i)},_getRootDataHost:function(){return this.dataHost&&this.dataHost._rootDataHost||this.dataHost},_showHideChildrenImpl:function(e){for(var t=this._children,n=0;n<t.length;n++){var i=t[n];Boolean(e)!=Boolean(i.__hideTemplateChildren__)&&(i.nodeType===Node.TEXT_NODE?e?(i.__polymerTextContent__=i.textContent,i.textContent=""):i.textContent=i.__polymerTextContent__:i.style&&(e?(i.__polymerDisplay__=i.style.display,i.style.display="none"):i.style.display=i.__polymerDisplay__)),i.__hideTemplateChildren__=e}},__setPropertyImpl:function(e,t,n,i){i&&i.__hideTemplateChildren__&&"textContent"==e&&(e="__polymerTextContent__"),this.__setPropertyOrig(e,t,n,i)},_debounceTemplate:function(e){Polymer.dom.addDebouncer(this.debounce("_debounceTemplate",e))},_flushTemplates:function(){Polymer.dom.flush()},_customPrepEffects:function(e){for(var t in e._parentProps)e._addPropertyEffect(t,"function",this._createHostPropEffector(t));for(t in this._instanceProps)e._addPropertyEffect(t,"function",this._createInstancePropEffector(t))},_customPrepAnnotations:function(e,t){var n,i=(e._template=document.createElement("template"))._content=t._content;i._notes||((n=e._rootDataHost)&&(Polymer.Annotations.prepElement=function(){n._prepElement()}),i._notes=Polymer.Annotations.parseAnnotations(t),Polymer.Annotations.prepElement=null,this._processAnnotations(i._notes)),e._notes=i._notes,e._parentProps=i._parentProps},_prepParentProperties:function(e,t){var n=this._parentProps=e._parentProps;if(this._forwardParentProp&&n){var i,r=e._parentPropProto;if(!r){for(i in this._instanceProps)delete n[i];for(i in r=e._parentPropProto=Object.create(null),t!=this&&(Polymer.Bind.prepareModel(r),Polymer.Base.prepareModelNotifyPath(r)),n){var o=this._parentPropPrefix+i,s=[{kind:"function",effect:this._createForwardPropEffector(i),fn:Polymer.Bind._functionEffect},{kind:"notify",fn:Polymer.Bind._notifyEffect,effect:{event:Polymer.CaseMap.camelToDashCase(o)+"-changed"}}];r._propertyEffects=r._propertyEffects||{},r._propertyEffects[o]=s,Polymer.Bind._createAccessors(r,o,s)}}var a=this;t!=this&&(Polymer.Bind.prepareInstance(t),t._forwardParentProp=function(e,t){a._forwardParentProp(e,t)}),this._extendTemplate(t,r),t._pathEffector=function(e,t,n){return a._pathEffectorImpl(e,t,n)}}},_createForwardPropEffector:function(n){return function(e,t){this._forwardParentProp(n,t)}},_createHostPropEffector:function(n){var i=this._parentPropPrefix;return function(e,t){this.dataHost._templatized[i+n]=t}},_createInstancePropEffector:function(r){return function(e,t,n,i){i||this.dataHost._forwardInstanceProp(this,r,t)}},_extendTemplate:function(e,t){var n=Object.getOwnPropertyNames(t);t._propertySetter&&(e._propertySetter=t._propertySetter);for(var i,r=0;r<n.length&&(i=n[r]);r++){var o,s=e[i];s&&"_propertyEffects"==i?(o=Polymer.Base.mixin({},s),e._propertyEffects=Polymer.Base.mixin(o,t._propertyEffects)):(o=Object.getOwnPropertyDescriptor(t,i),Object.defineProperty(e,i,o),void 0!==s&&e._propertySetter(i,s))}},_showHideChildren:function(e){},_forwardInstancePath:function(e,t,n){},_forwardInstanceProp:function(e,t,n){},_notifyPathUpImpl:function(e,t){var n=this.dataHost,i=Polymer.Path.root(e);n._forwardInstancePath.call(n,this,e,t),i in n._parentProps&&n._templatized._notifyPath(n._parentPropPrefix+e,t)},_pathEffectorImpl:function(e,t,n){var i;this._forwardParentPath&&0===e.indexOf(this._parentPropPrefix)&&(i=e.substring(this._parentPropPrefix.length),Polymer.Path.root(i)in this._parentProps)&&this._forwardParentPath(i,t),Polymer.Base._pathEffector.call(this._templatized,e,t,n)},_constructorImpl:function(e,t){this._rootDataHost=t._getRootDataHost(),this._setupConfigure(e),this._registerHost(t),this._beginHosting(),this.root=this.instanceTemplate(this._template),this.root.__noContent=!this._notes._hasContent,this.root.__styleScoped=!0,this._endHosting(),this._marshalAnnotatedNodes(),this._marshalInstanceEffects(),this._marshalAnnotatedListeners();for(var n=[],i=this.root.firstChild;i;i=i.nextSibling)n.push(i),i._templateInstance=this;this._children=n,t.__hideTemplateChildren__&&this._showHideChildren(!0),this._tryReady()},_listenImpl:function(e,t,n){var i=this,r=this._rootDataHost,o=r._createEventHandler(e,t,n);r._listen(e,t,function(e){e.model=i,o(e)})},_scopeElementClassImpl:function(e,t){var n=this._rootDataHost;return n?n._scopeElementClass(e,t):t},stamp:function(e){if(e=e||{},this._parentProps){var t,n=this._templatized;for(t in this._parentProps)void 0===e[t]&&(e[t]=n[this._parentPropPrefix+t])}return new this.ctor(e,this)},modelForElement:function(e){for(var t;e;)if(t=e._templateInstance){if(t.dataHost==this)return t;e=t.dataHost}else e=e.parentNode}},Polymer({is:"dom-template",extends:"template",_template:null,behaviors:[Polymer.Templatizer],ready:function(){this.templatize(this)}}),Polymer._collections=new WeakMap,Polymer.Collection=function(e){Polymer._collections.set(e,this),this.userArray=e,this.store=e.slice(),this.initMap()},Polymer.Collection.prototype={constructor:Polymer.Collection,initMap:function(){for(var e=this.omap=new WeakMap,t=this.pmap={},n=this.store,i=0;i<n.length;i++){var r=n[i];r&&"object"==typeof r?e.set(r,i):t[r]=i}},add:function(e){var t=this.store.push(e)-1;return e&&"object"==typeof e?this.omap.set(e,t):this.pmap[e]=t,"#"+t},removeKey:function(e){(e=this._parseKey(e))&&(this._removeFromMap(this.store[e]),delete this.store[e])},_removeFromMap:function(e){e&&"object"==typeof e?this.omap.delete(e):delete this.pmap[e]},remove:function(e){e=this.getKey(e);return this.removeKey(e),e},getKey:function(e){e=e&&"object"==typeof e?this.omap.get(e):this.pmap[e];if(null!=e)return"#"+e},getKeys:function(){return Object.keys(this.store).map(function(e){return"#"+e})},_parseKey:function(e){if(e&&"#"==e[0])return e.slice(1)},setItem:function(e,t){var n;(e=this._parseKey(e))&&((n=this.store[e])&&this._removeFromMap(n),t&&"object"==typeof t?this.omap.set(t,e):this.pmap[t]=e,this.store[e]=t)},getItem:function(e){if(e=this._parseKey(e))return this.store[e]},getItems:function(){var e,t=[],n=this.store;for(e in n)t.push(n[e]);return t},_applySplices:function(e){for(var t,n={},i=0;i<e.length&&(t=e[i]);i++){t.addedKeys=[];for(var r=0;r<t.removed.length;r++)n[o=this.getKey(t.removed[r])]=n[o]?null:-1;for(r=0;r<t.addedCount;r++){var o,s=this.userArray[t.index+r];n[o=void 0===(o=this.getKey(s))?this.add(s):o]=n[o]?null:1,t.addedKeys.push(o)}}var a=[],c=[];for(o in n)n[o]<0&&(this.removeKey(o),a.push(o)),0<n[o]&&c.push(o);return[{removed:a,added:c}]}},Polymer.Collection.get=function(e){return Polymer._collections.get(e)||new Polymer.Collection(e)},Polymer.Collection.applySplices=function(e,t){e=Polymer._collections.get(e);return e?e._applySplices(t):null},Polymer({is:"dom-repeat",extends:"template",_template:null,properties:{items:{type:Array},as:{type:String,value:"item"},indexAs:{type:String,value:"index"},sort:{type:Function,observer:"_sortChanged"},filter:{type:Function,observer:"_filterChanged"},observe:{type:String,observer:"_observeChanged"},delay:Number,renderedItemCount:{type:Number,notify:!Polymer.Settings.suppressTemplateNotifications,readOnly:!0},initialCount:{type:Number,observer:"_initializeChunking"},targetFramerate:{type:Number,value:20},notifyDomChange:{type:Boolean},_targetFrameTime:{type:Number,computed:"_computeFrameTime(targetFramerate)"}},behaviors:[Polymer.Templatizer],observers:["_itemsChanged(items.*)"],created:function(){this._instances=[],this._pool=[],this._limit=1/0;var e=this;this._boundRenderChunk=function(){e._renderChunk()}},detached:function(){this.__isDetached=!0;for(var e=0;e<this._instances.length;e++)this._detachInstance(e)},attached:function(){if(this.__isDetached){this.__isDetached=!1;for(var e,t=Polymer.dom(this).parentNode,n=(t.localName==this.is?(e=t,t=Polymer.dom(t).parentNode):e=this,Polymer.dom(t)),i=0;i<this._instances.length;i++)this._attachInstance(i,n,e)}},ready:function(){this._instanceProps={__key__:!0},this._instanceProps[this.as]=!0,this._instanceProps[this.indexAs]=!0,this.ctor||this.templatize(this)},_sortChanged:function(e){var t=this._getRootDataHost();this._sortFn=e&&("function"==typeof e?e:function(){return t[e].apply(t,arguments)}),this._needFullRefresh=!0,this.items&&this._debounceTemplate(this._render)},_filterChanged:function(e){var t=this._getRootDataHost();this._filterFn=e&&("function"==typeof e?e:function(){return t[e].apply(t,arguments)}),this._needFullRefresh=!0,this.items&&this._debounceTemplate(this._render)},_computeFrameTime:function(e){return Math.ceil(1e3/e)},_initializeChunking:function(){this.initialCount&&(this._limit=this.initialCount,this._chunkCount=this.initialCount,this._lastChunkTime=performance.now())},_tryRenderChunk:function(){this.items&&this._limit<this.items.length&&this.debounce("renderChunk",this._requestRenderChunk)},_requestRenderChunk:function(){requestAnimationFrame(this._boundRenderChunk)},_renderChunk:function(){var e=performance.now(),t=this._targetFrameTime/(e-this._lastChunkTime);this._chunkCount=Math.round(this._chunkCount*t)||1,this._limit+=this._chunkCount,this._lastChunkTime=e,this._debounceTemplate(this._render)},_observeChanged:function(){this._observePaths=this.observe&&this.observe.replace(".*",".").split(" ")},_itemsChanged:function(e){var t;"items"==e.path?(Array.isArray(this.items)?this.collection=Polymer.Collection.get(this.items):this.items?this._error(this._logf("dom-repeat","expected array for `items`, found",this.items)):this.collection=null,this._keySplices=[],this._indexSplices=[],this._needFullRefresh=!0,this._initializeChunking(),this._debounceTemplate(this._render)):"items.splices"==e.path?(this._keySplices=this._keySplices.concat(e.value.keySplices),this._indexSplices=this._indexSplices.concat(e.value.indexSplices),this._debounceTemplate(this._render)):(t=e.path.slice(6),this._forwardItemPath(t,e.value),this._checkObservedPaths(t))},_checkObservedPaths:function(e){if(this._observePaths){e=e.substring(e.indexOf(".")+1);for(var t=this._observePaths,n=0;n<t.length;n++)if(0===e.indexOf(t[n]))return this._needFullRefresh=!0,void(this.delay?this.debounce("render",this._render,this.delay):this._debounceTemplate(this._render))}},render:function(){this._needFullRefresh=!0,this._debounceTemplate(this._render),this._flushTemplates()},_render:function(){if(this.ctor){this._needFullRefresh?(this._applyFullRefresh(),this._needFullRefresh=!1):this._keySplices.length&&(this._sortFn?this._applySplicesUserSort(this._keySplices):this._filterFn?this._applyFullRefresh():this._applySplicesArrayOrder(this._indexSplices)),this._keySplices=[],this._indexSplices=[];for(var e=this._keyToInstIdx={},t=this._instances.length-1;0<=t;t--){var n=this._instances[t];n.isPlaceholder&&t<this._limit?n=this._insertInstance(t,n.__key__):!n.isPlaceholder&&t>=this._limit&&(n=this._downgradeInstance(t,n.__key__)),e[n.__key__]=t,n.isPlaceholder||n.__setProperty(this.indexAs,t,!0)}this._pool.length=0,this._setRenderedItemCount(this._instances.length),Polymer.Settings.suppressTemplateNotifications&&!this.notifyDomChange||this.fire("dom-change"),this._tryRenderChunk()}},_applyFullRefresh:function(){var n=this.collection;if(this._sortFn)e=n?n.getKeys():[];else{var e=[],t=this.items;if(t)for(var i=0;i<t.length;i++)e.push(n.getKey(t[i]))}var r=this;for(this._filterFn&&(e=e.filter(function(e){return r._filterFn(n.getItem(e))})),this._sortFn&&e.sort(function(e,t){return r._sortFn(n.getItem(e),n.getItem(t))}),i=0;i<e.length;i++){var o=e[i],s=this._instances[i];s?(s.__key__=o,!s.isPlaceholder&&i<this._limit&&s.__setProperty(this.as,n.getItem(o),!0)):i<this._limit?this._insertInstance(i,o):this._insertPlaceholder(i,o)}for(var a=this._instances.length-1;i<=a;a--)this._detachAndRemoveInstance(a)},_numericSort:function(e,t){return e-t},_applySplicesUserSort:function(e){for(var t,n,i=this.collection,r={},o=0;o<e.length&&(n=e[o]);o++){for(var s=0;s<n.removed.length;s++)r[t=n.removed[s]]=r[t]?null:-1;for(s=0;s<n.added.length;s++)r[t=n.added[s]]=r[t]?null:1}var a=[],c=[];for(t in r)-1===r[t]&&a.push(this._keyToInstIdx[t]),1===r[t]&&c.push(t);if(a.length)for(a.sort(this._numericSort),o=a.length-1;0<=o;o--){var l=a[o];void 0!==l&&this._detachAndRemoveInstance(l)}var d=this;if(c.length){(c=this._filterFn?c.filter(function(e){return d._filterFn(i.getItem(e))}):c).sort(function(e,t){return d._sortFn(i.getItem(e),i.getItem(t))});for(var h=0,o=0;o<c.length;o++)h=this._insertRowUserSort(h,c[o])}},_insertRowUserSort:function(e,t){for(var n=this.collection,i=n.getItem(t),r=this._instances.length-1,o=-1;e<=r;){var s=e+r>>1,a=this._instances[s].__key__,a=this._sortFn(n.getItem(a),i);if(a<0)e=1+s;else{if(!(0<a)){o=s;break}r=s-1}}return this._insertPlaceholder(o=o<0?r+1:o,t),o},_applySplicesArrayOrder:function(e){for(var t,n=0;n<e.length&&(t=e[n]);n++){for(var i=0;i<t.removed.length;i++)this._detachAndRemoveInstance(t.index);for(i=0;i<t.addedKeys.length;i++)this._insertPlaceholder(t.index+i,t.addedKeys[i])}},_detachInstance:function(e){var t=this._instances[e];if(!t.isPlaceholder){for(var n=0;n<t._children.length;n++){var i=t._children[n];Polymer.dom(t.root).appendChild(i)}return t}},_attachInstance:function(e,t,n){e=this._instances[e];e.isPlaceholder||t.insertBefore(e.root,n)},_detachAndRemoveInstance:function(e){var t=this._detachInstance(e);t&&this._pool.push(t),this._instances.splice(e,1)},_insertPlaceholder:function(e,t){this._instances.splice(e,0,{isPlaceholder:!0,__key__:t})},_stampInstance:function(e,t){var n={__key__:t};return n[this.as]=this.collection.getItem(t),n[this.indexAs]=e,this.stamp(n)},_insertInstance:function(e,t){var n=this._pool.pop(),t=(n?(n.__setProperty(this.as,this.collection.getItem(t),!0),n.__setProperty("__key__",t,!0)):n=this._stampInstance(e,t),this._instances[e+1]),t=t&&!t.isPlaceholder?t._children[0]:this,i=Polymer.dom(this).parentNode;return i.localName==this.is&&(t==this&&(t=i),i=Polymer.dom(i).parentNode),Polymer.dom(i).insertBefore(n.root,t),this._instances[e]=n},_downgradeInstance:function(e,t){var n=this._detachInstance(e);return n&&this._pool.push(n),this._instances[e]={isPlaceholder:!0,__key__:t}},_showHideChildren:function(e){for(var t=0;t<this._instances.length;t++)this._instances[t].isPlaceholder||this._instances[t]._showHideChildren(e)},_forwardInstanceProp:function(e,t,n){t==this.as&&(t=this._sortFn||this._filterFn?this.items.indexOf(this.collection.getItem(e.__key__)):e[this.indexAs],this.set("items."+t,n))},_forwardInstancePath:function(e,t,n){0===t.indexOf(this.as+".")&&this._notifyPath("items."+e.__key__+"."+t.slice(this.as.length+1),n)},_forwardParentProp:function(e,t){for(var n,i=this._instances,r=0;r<i.length&&(n=i[r]);r++)n.isPlaceholder||n.__setProperty(e,t,!0)},_forwardParentPath:function(e,t){for(var n,i=this._instances,r=0;r<i.length&&(n=i[r]);r++)n.isPlaceholder||n._notifyPath(e,t,!0)},_forwardItemPath:function(e,t){var n,i;this._keyToInstIdx&&(n=e.indexOf("."),i=e.substring(0,n<0?e.length:n),i=this._keyToInstIdx[i],i=this._instances[i])&&!i.isPlaceholder&&(0<=n?(e=this.as+"."+e.substring(n+1),i._notifyPath(e,t,!0)):i.__setProperty(this.as,t,!0))},itemForElement:function(e){e=this.modelForElement(e);return e&&e[this.as]},keyForElement:function(e){e=this.modelForElement(e);return e&&e.__key__},indexForElement:function(e){e=this.modelForElement(e);return e&&e[this.indexAs]}}),Polymer({is:"array-selector",_template:null,properties:{items:{type:Array,observer:"clearSelection"},multi:{type:Boolean,value:!1,observer:"clearSelection"},selected:{type:Object,notify:!0},selectedItem:{type:Object,notify:!0},toggle:{type:Boolean,value:!1}},clearSelection:function(){if(Array.isArray(this.selected))for(var e=0;e<this.selected.length;e++)this.unlinkPaths("selected."+e);else this.unlinkPaths("selected"),this.unlinkPaths("selectedItem");this.multi?this.selected&&!this.selected.length||(this.selected=[],this._selectedColl=Polymer.Collection.get(this.selected)):(this.selected=null,this._selectedColl=null),this.selectedItem=null},isSelected:function(e){return this.multi?void 0!==this._selectedColl.getKey(e):this.selected==e},deselect:function(e){var t;this.multi?this.isSelected(e)&&(t=this._selectedColl.getKey(e),this.arrayDelete("selected",e),this.unlinkPaths("selected."+t)):(this.selected=null,this.selectedItem=null,this.unlinkPaths("selected"),this.unlinkPaths("selectedItem"))},select:function(e){var t,n=Polymer.Collection.get(this.items).getKey(e);this.multi?this.isSelected(e)?this.toggle&&this.deselect(e):(this.push("selected",e),t=this._selectedColl.getKey(e),this.linkPaths("selected."+t,"items."+n)):this.toggle&&e==this.selected?this.deselect():(this.selected=e,this.selectedItem=e,this.linkPaths("selected","items."+n),this.linkPaths("selectedItem","items."+n))}}),Polymer({is:"dom-if",extends:"template",_template:null,properties:{if:{type:Boolean,value:!1,observer:"_queueRender"},restamp:{type:Boolean,value:!1,observer:"_queueRender"},notifyDomChange:{type:Boolean}},behaviors:[Polymer.Templatizer],_queueRender:function(){this._debounceTemplate(this._render)},detached:function(){var e=this.parentNode;(e=e&&e.localName==this.is?Polymer.dom(e).parentNode:e)&&(e.nodeType!=Node.DOCUMENT_FRAGMENT_NODE||Polymer.Settings.hasShadow&&e instanceof ShadowRoot)||this._teardownInstance()},attached:function(){this.if&&this.ctor&&this.async(this._ensureInstance)},render:function(){this._flushTemplates()},_render:function(){this.if?(this.ctor||this.templatize(this),this._ensureInstance(),this._showHideChildren()):this.restamp&&this._teardownInstance(),!this.restamp&&this._instance&&this._showHideChildren(),this.if!=this._lastIf&&(Polymer.Settings.suppressTemplateNotifications&&!this.notifyDomChange||this.fire("dom-change"),this._lastIf=this.if)},_ensureInstance:function(){var e,t=Polymer.dom(this).parentNode;if(t&&t.localName==this.is?(e=t,t=Polymer.dom(t).parentNode):e=this,t)if(this._instance){var n=this._instance._children;if(n&&n.length)if(Polymer.dom(e).previousSibling!==n[n.length-1])for(var i,r=0;r<n.length&&(i=n[r]);r++)Polymer.dom(t).insertBefore(i,e)}else{this._instance=this.stamp();var o=this._instance.root;Polymer.dom(t).insertBefore(o,e)}},_teardownInstance:function(){if(this._instance){var e=this._instance._children;if(e&&e.length){var t=Polymer.dom(Polymer.dom(e[0]).parentNode);if(t)for(var n,i=0;i<e.length&&(n=e[i]);i++)t.removeChild(n)}this._instance=null}},_showHideChildren:function(){var e=this.__hideTemplateChildren__||!this.if;this._instance&&this._instance._showHideChildren(e)},_forwardParentProp:function(e,t){this._instance&&this._instance.__setProperty(e,t,!0)},_forwardParentPath:function(e,t){this._instance&&this._instance._notifyPath(e,t,!0)}}),Polymer({is:"dom-bind",properties:{notifyDomChange:{type:Boolean}},extends:"template",_template:null,created:function(){if(Polymer.Settings.strictTemplatePolicy)throw new Error("strictTemplatePolicy: dom-bind not allowed");var e=this;Polymer.RenderStatus.whenReady(function(){"loading"==document.readyState?document.addEventListener("DOMContentLoaded",function(){e._markImportsReady()}):e._markImportsReady()})},_ensureReady:function(){this._readied||this._readySelf()},_markImportsReady:function(){this._importsReady=!0,this._ensureReady()},_registerFeatures:function(){this._prepConstructor()},_insertChildren:function(){var e,t=Polymer.dom(this).parentNode;t.localName==this.is?(e=t,t=Polymer.dom(t).parentNode):e=this,Polymer.dom(t).insertBefore(this.root,e)},_removeChildren:function(){if(this._children)for(var e=0;e<this._children.length;e++)this.root.appendChild(this._children[e])},_initFeatures:function(){},_scopeElementClass:function(e,t){return this.dataHost?this.dataHost._scopeElementClass(e,t):t},_configureInstanceProperties:function(){},_prepConfigure:function(){var e,t={};for(e in this._propertyEffects)t[e]=this[e];var n=this._setupConfigure;this._setupConfigure=function(){n.call(this,t)}},attached:function(){this._importsReady&&this.render()},detached:function(){this._removeChildren()},render:function(){this._ensureReady(),this._children||((this._template=this)._prepAnnotations(),this._prepEffects(),this._prepBehaviors(),this._prepConfigure(),this._prepBindings(),this._prepPropertyInfo(),Polymer.Base._initFeatures.call(this),this._children=Polymer.TreeApi.arrayCopyChildNodes(this.root)),this._insertChildren(),Polymer.Settings.suppressTemplateNotifications&&!this.notifyDomChange||this.fire("dom-change")}}),function(){var e=document.createElement("style");e.textContent="[hidden] { display: none !important; }",document.head.appendChild(e)}(),Polymer({is:"paper-toolbar",hostAttributes:{role:"toolbar"},properties:{bottomJustify:{type:String,value:""},justify:{type:String,value:""},middleJustify:{type:String,value:""}},attached:function(){this._observer=this._observe(this),this._updateAriaLabelledBy()},detached:function(){this._observer&&this._observer.disconnect()},_observe:function(e){var t=new MutationObserver(function(){this._updateAriaLabelledBy()}.bind(this));return t.observe(e,{childList:!0,subtree:!0}),t},_updateAriaLabelledBy:function(){for(var e,t=[],n=Polymer.dom(this.root).querySelectorAll("content"),i=0;e=n[i];i++)for(var r,o,s=Polymer.dom(e).getDistributedNodes(),a=0;r=s[a];a++)r.classList&&r.classList.contains("title")&&(r.id?t.push(r.id):(o="paper-toolbar-label-"+Math.floor(1e4*Math.random()),r.id=o,t.push(o)));0<t.length&&this.setAttribute("aria-labelledby",t.join(" "))},_computeBarExtraClasses:function(e){return e?e+("justified"===e?"":"-justified"):""}}),function(){var t={},n={},e=null;Polymer.IronMeta=Polymer({is:"iron-meta",properties:{type:{type:String,value:"default",observer:"_typeChanged"},key:{type:String,observer:"_keyChanged"},value:{type:Object,notify:!0,observer:"_valueChanged"},self:{type:Boolean,observer:"_selfChanged"},list:{type:Array,notify:!0}},hostAttributes:{hidden:!0},factoryImpl:function(e){if(e)for(var t in e)switch(t){case"type":case"key":case"value":this[t]=e[t]}},created:function(){this._metaDatas=t,this._metaArrays=n},_keyChanged:function(e,t){this._resetRegistration(t)},_valueChanged:function(e){this._resetRegistration(this.key)},_selfChanged:function(e){e&&(this.value=this)},_typeChanged:function(e){this._unregisterKey(this.key),t[e]||(t[e]={}),this._metaData=t[e],n[e]||(n[e]=[]),this.list=n[e],this._registerKeyValue(this.key,this.value)},byKey:function(e){return this._metaData&&this._metaData[e]},_resetRegistration:function(e){this._unregisterKey(e),this._registerKeyValue(this.key,this.value)},_unregisterKey:function(e){this._unregister(e,this._metaData,this.list)},_registerKeyValue:function(e,t){this._register(e,t,this._metaData,this.list)},_register:function(e,t,n,i){e&&n&&void 0!==t&&(n[e]=t,i.push(t))},_unregister:function(e,t,n){var i;e&&t&&e in t&&(i=t[e],delete t[e],this.arrayDelete(n,i))}}),Polymer.IronMeta.getIronMeta=function(){return e=null===e?new Polymer.IronMeta:e},Polymer.IronMetaQuery=Polymer({is:"iron-meta-query",properties:{type:{type:String,value:"default",observer:"_typeChanged"},key:{type:String,observer:"_keyChanged"},value:{type:Object,notify:!0,readOnly:!0},list:{type:Array,notify:!0}},factoryImpl:function(e){if(e)for(var t in e)switch(t){case"type":case"key":this[t]=e[t]}},created:function(){this._metaDatas=t,this._metaArrays=n},_keyChanged:function(e){this._setValue(this._metaData&&this._metaData[e])},_typeChanged:function(e){this._metaData=t[e],this.list=n[e],this.key&&this._keyChanged(this.key)},byKey:function(e){return this._metaData&&this._metaData[e]}})}(),Polymer.NeonAnimatableBehavior={properties:{animationConfig:{type:Object},entryAnimation:{observer:"_entryAnimationChanged",type:String},exitAnimation:{observer:"_exitAnimationChanged",type:String}},_entryAnimationChanged:function(){this.animationConfig=this.animationConfig||{},this.animationConfig.entry=[{name:this.entryAnimation,node:this}]},_exitAnimationChanged:function(){this.animationConfig=this.animationConfig||{},this.animationConfig.exit=[{name:this.exitAnimation,node:this}]},_copyProperties:function(e,t){for(var n in t)e[n]=t[n]},_cloneConfig:function(e){var t={isClone:!0};return this._copyProperties(t,e),t},_getAnimationConfigRecursive:function(e,t,n){if(this.animationConfig)if(this.animationConfig.value&&"function"==typeof this.animationConfig.value)this._warn(this._logf("playAnimation","Please put 'animationConfig' inside of your components 'properties' object instead of outside of it."));else{var i=e?this.animationConfig[e]:this.animationConfig;if(i=Array.isArray(i)?i:[i])for(var r,o,s=0;r=i[s];s++)r.animatable?r.animatable._getAnimationConfigRecursive(r.type||e,t,n):r.id?(o=t[r.id])?(o.isClone||(t[r.id]=this._cloneConfig(o),o=t[r.id]),this._copyProperties(o,r)):t[r.id]=r:n.push(r)}},getAnimationConfig:function(e){var t,n={},i=[];for(t in this._getAnimationConfigRecursive(e,n,i),n)i.push(n[t]);return i}},Polymer.NeonAnimationRunnerBehaviorImpl={_configureAnimations:function(e){var t=[];if(0<e.length)for(var n,i=0;n=e[i];i++){var r=document.createElement(n.name);if(r.isNeonAnimation){var o=null;try{"function"!=typeof(o=r.configure(n)).cancel&&(o=document.timeline.play(o))}catch(e){o=null,console.warn("Couldnt play","(",n.name,").",e)}o&&t.push({neonAnimation:r,config:n,animation:o})}else console.warn(this.is+":",n.name,"not found!")}return t},_shouldComplete:function(e){for(var t=!0,n=0;n<e.length;n++)if("finished"!=e[n].animation.playState){t=!1;break}return t},_complete:function(e){for(var t=0;t<e.length;t++)e[t].neonAnimation.complete(e[t].config);for(t=0;t<e.length;t++)e[t].animation.cancel()},playAnimation:function(e,t){var n=this.getAnimationConfig(e);if(n){this._active=this._active||{},this._active[e]&&(this._complete(this._active[e]),delete this._active[e]);var i=this._configureAnimations(n);if(0==i.length)this.fire("neon-animation-finish",t,{bubbles:!1});else{this._active[e]=i;for(var r=0;r<i.length;r++)i[r].animation.onfinish=function(){this._shouldComplete(i)&&(this._complete(i),delete this._active[e],this.fire("neon-animation-finish",t,{bubbles:!1}))}.bind(this)}}},cancelAnimation:function(){for(var e in this._animations)this._animations[e].cancel();this._animations={}}},Polymer.NeonAnimationRunnerBehavior=[Polymer.NeonAnimatableBehavior,Polymer.NeonAnimationRunnerBehaviorImpl],Polymer.IronFitBehavior={properties:{sizingTarget:{type:Object,value:function(){return this}},fitInto:{type:Object,value:window},noOverlap:{type:Boolean},positionTarget:{type:Element},horizontalAlign:{type:String},verticalAlign:{type:String},dynamicAlign:{type:Boolean},horizontalOffset:{type:Number,value:0,notify:!0},verticalOffset:{type:Number,value:0,notify:!0},autoFitOnAttach:{type:Boolean,value:!1},_fitInfo:{type:Object}},get _fitWidth(){var e=this.fitInto===window?this.fitInto.innerWidth:this.fitInto.getBoundingClientRect().width;return e},get _fitHeight(){var e=this.fitInto===window?this.fitInto.innerHeight:this.fitInto.getBoundingClientRect().height;return e},get _fitLeft(){var e=this.fitInto===window?0:this.fitInto.getBoundingClientRect().left;return e},get _fitTop(){var e=this.fitInto===window?0:this.fitInto.getBoundingClientRect().top;return e},get _defaultPositionTarget(){var e=Polymer.dom(this).parentNode;return e=e&&e.nodeType===Node.DOCUMENT_FRAGMENT_NODE?e.host:e},get _localeHorizontalAlign(){if(this._isRTL){if("right"===this.horizontalAlign)return"left";if("left"===this.horizontalAlign)return"right"}return this.horizontalAlign},attached:function(){void 0===this._isRTL&&(this._isRTL="rtl"==window.getComputedStyle(this).direction),this.positionTarget=this.positionTarget||this._defaultPositionTarget,this.autoFitOnAttach&&("none"===window.getComputedStyle(this).display?setTimeout(function(){this.fit()}.bind(this)):this.fit())},fit:function(){this.position(),this.constrain(),this.center()},_discoverInfo:function(){var e,t;this._fitInfo||(e=window.getComputedStyle(this),t=window.getComputedStyle(this.sizingTarget),this._fitInfo={inlineStyle:{top:this.style.top||"",left:this.style.left||"",position:this.style.position||""},sizerInlineStyle:{maxWidth:this.sizingTarget.style.maxWidth||"",maxHeight:this.sizingTarget.style.maxHeight||"",boxSizing:this.sizingTarget.style.boxSizing||""},positionedBy:{vertically:"auto"!==e.top?"top":"auto"!==e.bottom?"bottom":null,horizontally:"auto"!==e.left?"left":"auto"!==e.right?"right":null},sizedBy:{height:"none"!==t.maxHeight,width:"none"!==t.maxWidth,minWidth:parseInt(t.minWidth,10)||0,minHeight:parseInt(t.minHeight,10)||0},margin:{top:parseInt(e.marginTop,10)||0,right:parseInt(e.marginRight,10)||0,bottom:parseInt(e.marginBottom,10)||0,left:parseInt(e.marginLeft,10)||0}})},resetFit:function(){var e,t=this._fitInfo||{};for(e in t.sizerInlineStyle)this.sizingTarget.style[e]=t.sizerInlineStyle[e];for(e in t.inlineStyle)this.style[e]=t.inlineStyle[e];this._fitInfo=null},refit:function(){var e=this.sizingTarget.scrollLeft,t=this.sizingTarget.scrollTop;this.resetFit(),this.fit(),this.sizingTarget.scrollLeft=e,this.sizingTarget.scrollTop=t},position:function(){var e,t,n,i,r,o,s;(this.horizontalAlign||this.verticalAlign)&&(this._discoverInfo(),this.style.position="fixed",this.sizingTarget.style.boxSizing="border-box",this.style.left="0px",this.style.top="0px",e=this.getBoundingClientRect(),o=this.__getNormalizedRect(this.positionTarget),t=this.__getNormalizedRect(this.fitInto),n=this._fitInfo.margin,s={width:e.width+n.left+n.right,height:e.height+n.top+n.bottom},o=(s=this.__getPosition(this._localeHorizontalAlign,this.verticalAlign,s,o,t)).left+n.left,s=s.top+n.top,i=Math.min(t.right-n.right,o+e.width),r=Math.min(t.bottom-n.bottom,s+e.height),o=Math.max(t.left+n.left,Math.min(o,i-this._fitInfo.sizedBy.minWidth)),s=Math.max(t.top+n.top,Math.min(s,r-this._fitInfo.sizedBy.minHeight)),this.sizingTarget.style.maxWidth=Math.max(i-o,this._fitInfo.sizedBy.minWidth)+"px",this.sizingTarget.style.maxHeight=Math.max(r-s,this._fitInfo.sizedBy.minHeight)+"px",this.style.left=o-e.left+"px",this.style.top=s-e.top+"px")},constrain:function(){var e,t;this.horizontalAlign||this.verticalAlign||(this._discoverInfo(),(e=this._fitInfo).positionedBy.vertically||(this.style.position="fixed",this.style.top="0px"),e.positionedBy.horizontally||(this.style.position="fixed",this.style.left="0px"),this.sizingTarget.style.boxSizing="border-box",t=this.getBoundingClientRect(),e.sizedBy.height||this.__sizeDimension(t,e.positionedBy.vertically,"top","bottom","Height"),e.sizedBy.width)||this.__sizeDimension(t,e.positionedBy.horizontally,"left","right","Width")},_sizeDimension:function(e,t,n,i,r){this.__sizeDimension(e,t,n,i,r)},__sizeDimension:function(e,t,n,i,r){var o=this._fitInfo,s=this.__getNormalizedRect(this.fitInto),s="Width"===r?s.width:s.height,t=t===i,e=t?s-e[i]:e[n],o=o.margin[t?n:i],t="offset"+r,n=this[t]-this.sizingTarget[t];this.sizingTarget.style["max"+r]=s-o-e-n+"px"},center:function(){var e,t,n,i;this.horizontalAlign||this.verticalAlign||(this._discoverInfo(),(e=this._fitInfo.positionedBy).vertically&&e.horizontally)||(this.style.position="fixed",e.vertically||(this.style.top="0px"),e.horizontally||(this.style.left="0px"),t=this.getBoundingClientRect(),n=this.__getNormalizedRect(this.fitInto),e.vertically||(i=n.top-t.top+(n.height-t.height)/2,this.style.top=i+"px"),e.horizontally)||(i=n.left-t.left+(n.width-t.width)/2,this.style.left=i+"px")},__getNormalizedRect:function(e){return e===document.documentElement||e===window?{top:0,left:0,width:window.innerWidth,height:window.innerHeight,right:window.innerWidth,bottom:window.innerHeight}:e.getBoundingClientRect()},__getCroppedArea:function(e,t,n){var i=Math.min(0,e.top)+Math.min(0,n.bottom-(e.top+t.height)),n=Math.min(0,e.left)+Math.min(0,n.right-(e.left+t.width));return Math.abs(i)*t.width+Math.abs(n)*t.height},__getPosition:function(e,t,n,i,r){var o,s=[{verticalAlign:"top",horizontalAlign:"left",top:i.top+this.verticalOffset,left:i.left+this.horizontalOffset},{verticalAlign:"top",horizontalAlign:"right",top:i.top+this.verticalOffset,left:i.right-n.width-this.horizontalOffset},{verticalAlign:"bottom",horizontalAlign:"left",top:i.bottom-n.height-this.verticalOffset,left:i.left+this.horizontalOffset},{verticalAlign:"bottom",horizontalAlign:"right",top:i.bottom-n.height-this.verticalOffset,left:i.right-n.width-this.horizontalOffset}];if(this.noOverlap){for(var a=0,c=s.length;a<c;a++){var l,d={};for(l in s[a])d[l]=s[a][l];s.push(d)}s[0].top=s[1].top+=i.height,s[2].top=s[3].top-=i.height,s[4].left=s[6].left+=i.width,s[5].left=s[7].left-=i.width}t="auto"===t?null:t,e="auto"===e?null:e;for(a=0;a<s.length;a++){var h=s[a];if(!this.dynamicAlign&&!this.noOverlap&&h.verticalAlign===t&&h.horizontalAlign===e){o=h;break}var u=!(t&&h.verticalAlign!==t||e&&h.horizontalAlign!==e);if(this.dynamicAlign||u){o=o||h,h.croppedArea=this.__getCroppedArea(h,n,r);var p=h.croppedArea-o.croppedArea;if(0===(o=p<0||0==p&&u?h:o).croppedArea&&u)break}}return o}},Polymer.IronResizableBehavior={properties:{_parentResizable:{type:Object,observer:"_parentResizableChanged"},_notifyingDescendant:{type:Boolean,value:!1}},listeners:{"iron-request-resize-notifications":"_onIronRequestResizeNotifications"},created:function(){this._interestedResizables=[],this._boundNotifyResize=this.notifyResize.bind(this)},attached:function(){this.fire("iron-request-resize-notifications",null,{node:this,bubbles:!0,cancelable:!0}),this._parentResizable||(window.addEventListener("resize",this._boundNotifyResize),this.notifyResize())},detached:function(){this._parentResizable?this._parentResizable.stopResizeNotificationsFor(this):window.removeEventListener("resize",this._boundNotifyResize),this._parentResizable=null},notifyResize:function(){this.isAttached&&(this._interestedResizables.forEach(function(e){this.resizerShouldNotify(e)&&this._notifyDescendant(e)},this),this._fireResize())},assignParentResizable:function(e){this._parentResizable=e},stopResizeNotificationsFor:function(e){var t=this._interestedResizables.indexOf(e);-1<t&&(this._interestedResizables.splice(t,1),this.unlisten(e,"iron-resize","_onDescendantIronResize"))},resizerShouldNotify:function(e){return!0},_onDescendantIronResize:function(e){this._notifyingDescendant?e.stopPropagation():Polymer.Settings.useShadow||this._fireResize()},_fireResize:function(){this.fire("iron-resize",null,{node:this,bubbles:!1})},_onIronRequestResizeNotifications:function(e){var t=e.path?e.path[0]:e.target;t!==this&&(-1===this._interestedResizables.indexOf(t)&&(this._interestedResizables.push(t),this.listen(t,"iron-resize","_onDescendantIronResize")),t.assignParentResizable(this),this._notifyDescendant(t),e.stopPropagation())},_parentResizableChanged:function(e){e&&window.removeEventListener("resize",this._boundNotifyResize)},_notifyDescendant:function(e){this.isAttached&&(this._notifyingDescendant=!0,e.notifyResize(),this._notifyingDescendant=!1)}},function(){"use strict";var i={"U+0008":"backspace","U+0009":"tab","U+001B":"esc","U+0020":"space","U+007F":"del"},r={8:"backspace",9:"tab",13:"enter",27:"esc",33:"pageup",34:"pagedown",35:"end",36:"home",32:"space",37:"left",38:"up",39:"right",40:"down",46:"del",106:"*"},o={shift:"shiftKey",ctrl:"ctrlKey",alt:"altKey",meta:"metaKey"},s=/[a-z0-9*]/,a=/U\+/,c=/^arrow/,l=/^space(bar)?/,d=/^escape$/;function h(e,t){var n="";return e&&(" "===(e=e.toLowerCase())||l.test(e)?n="space":d.test(e)?n="esc":1==e.length?t&&!s.test(e)||(n=e):n=c.test(e)?e.replace("arrow",""):"multiply"==e?"*":e),n}function n(e,t){return e.key?h(e.key,t):e.detail&&e.detail.key?h(e.detail.key,t):(t=e.keyIdentifier,n="",(n=t?t in i?i[t]:(a.test(t)?(t=parseInt(t.replace("U+","0x"),16),String.fromCharCode(t)):t).toLowerCase():n)||(t=e.keyCode,n="",n=Number(t)?65<=t&&t<=90?String.fromCharCode(32+t):112<=t&&t<=123?"f"+(t-112):48<=t&&t<=57?String(t-48):96<=t&&t<=105?String(t-96):r[t]:n)||"");var n}function u(e,t){return n(t,e.hasModifiers)===e.key&&(!e.hasModifiers||!!t.shiftKey==!!e.shiftKey&&!!t.ctrlKey==!!e.ctrlKey&&!!t.altKey==!!e.altKey&&!!t.metaKey==!!e.metaKey)}function p(e){return e.trim().split(" ").map(function(e){return 1===(e=e).length?{combo:e,key:e,event:"keydown"}:e.split("+").reduce(function(e,t){var t=t.split(":"),n=t[0],t=t[1];return n in o?(e[o[n]]=!0,e.hasModifiers=!0):(e.key=n,e.event=t||"keydown"),e},{combo:e.split(":").shift()})})}Polymer.IronA11yKeysBehavior={properties:{keyEventTarget:{type:Object,value:function(){return this}},stopKeyboardEventPropagation:{type:Boolean,value:!1},_boundKeyHandlers:{type:Array,value:function(){return[]}},_imperativeKeyBindings:{type:Object,value:function(){return{}}}},observers:["_resetKeyEventListeners(keyEventTarget, _boundKeyHandlers)"],keyBindings:{},registered:function(){this._prepKeyBindings()},attached:function(){this._listenKeyEventListeners()},detached:function(){this._unlistenKeyEventListeners()},addOwnKeyBinding:function(e,t){this._imperativeKeyBindings[e]=t,this._prepKeyBindings(),this._resetKeyEventListeners()},removeOwnKeyBindings:function(){this._imperativeKeyBindings={},this._prepKeyBindings(),this._resetKeyEventListeners()},keyboardEventMatchesKeys:function(e,t){for(var n=p(t),i=0;i<n.length;++i)if(u(n[i],e))return!0;return!1},_collectKeyBindings:function(){var e=this.behaviors.map(function(e){return e.keyBindings});return-1===e.indexOf(this.keyBindings)&&e.push(this.keyBindings),e},_prepKeyBindings:function(){for(var e in this._keyBindings={},this._collectKeyBindings().forEach(function(e){for(var t in e)this._addKeyBinding(t,e[t])},this),this._imperativeKeyBindings)this._addKeyBinding(e,this._imperativeKeyBindings[e]);for(var t in this._keyBindings)this._keyBindings[t].sort(function(e,t){e=e[0].hasModifiers;return e===t[0].hasModifiers?0:e?-1:1})},_addKeyBinding:function(e,t){p(e).forEach(function(e){this._keyBindings[e.event]=this._keyBindings[e.event]||[],this._keyBindings[e.event].push([e,t])},this)},_resetKeyEventListeners:function(){this._unlistenKeyEventListeners(),this.isAttached&&this._listenKeyEventListeners()},_listenKeyEventListeners:function(){this.keyEventTarget&&Object.keys(this._keyBindings).forEach(function(e){var t=this._keyBindings[e],t=this._onKeyBindingEvent.bind(this,t);this._boundKeyHandlers.push([this.keyEventTarget,e,t]),this.keyEventTarget.addEventListener(e,t)},this)},_unlistenKeyEventListeners:function(){for(var e,t,n;this._boundKeyHandlers.length;)e=(n=this._boundKeyHandlers.pop())[0],t=n[1],n=n[2],e.removeEventListener(t,n)},_onKeyBindingEvent:function(e,t){if(this.stopKeyboardEventPropagation&&t.stopPropagation(),!t.defaultPrevented)for(var n=0;n<e.length;n++){var i=e[n][0],r=e[n][1];if(u(i,t)&&(this._triggerKeyHandler(i,r,t),t.defaultPrevented))return}},_triggerKeyHandler:function(e,t,n){var i=Object.create(e),e=(i.keyboardEvent=n,new CustomEvent(e.event,{detail:i,cancelable:!0}));this[t].call(this,e),e.defaultPrevented&&n.preventDefault()}}}(),function(){"use strict";Polymer({is:"iron-overlay-backdrop",properties:{opened:{reflectToAttribute:!0,type:Boolean,value:!1,observer:"_openedChanged"}},listeners:{transitionend:"_onTransitionend"},created:function(){this.__openedRaf=null},attached:function(){this.opened&&this._openedChanged(this.opened)},prepare:function(){this.opened&&!this.parentNode&&Polymer.dom(document.body).appendChild(this)},open:function(){this.opened=!0},close:function(){this.opened=!1},complete:function(){this.opened||this.parentNode!==document.body||Polymer.dom(this.parentNode).removeChild(this)},_onTransitionend:function(e){e&&e.target===this&&this.complete()},_openedChanged:function(e){e?this.prepare():"0s"!==(e=window.getComputedStyle(this)).transitionDuration&&0!=e.opacity||this.complete(),this.isAttached&&(this.__openedRaf&&(window.cancelAnimationFrame(this.__openedRaf),this.__openedRaf=null),this.scrollTop=this.scrollTop,this.__openedRaf=window.requestAnimationFrame(function(){this.__openedRaf=null,this.toggleClass("opened",this.opened)}.bind(this)))}})}(),Polymer.IronOverlayManagerClass=function(){this._overlays=[],this._minimumZ=101,this._backdropElement=null,Polymer.Gestures.add(document.documentElement,"tap",null),document.addEventListener("tap",this._onCaptureClick.bind(this),!0),document.addEventListener("focus",this._onCaptureFocus.bind(this),!0),document.addEventListener("keydown",this._onCaptureKeyDown.bind(this),!0)},Polymer.IronOverlayManagerClass.prototype={constructor:Polymer.IronOverlayManagerClass,get backdropElement(){return this._backdropElement||(this._backdropElement=document.createElement("iron-overlay-backdrop")),this._backdropElement},get deepActiveElement(){for(var e=document.activeElement||document.body;e.root&&Polymer.dom(e.root).activeElement;)e=Polymer.dom(e.root).activeElement;return e},_bringOverlayAtIndexToFront:function(e){var t=this._overlays[e];if(t){var n=this._overlays.length-1,i=this._overlays[n];if(i&&this._shouldBeBehindOverlay(t,i)&&n--,!(n<=e)){i=Math.max(this.currentOverlayZ(),this._minimumZ);for(this._getZ(t)<=i&&this._applyOverlayZ(t,i);e<n;)this._overlays[e]=this._overlays[e+1],e++;this._overlays[n]=t}}},addOrRemoveOverlay:function(e){e.opened?this.addOverlay(e):this.removeOverlay(e)},addOverlay:function(e){var t,n,i,r=this._overlays.indexOf(e);0<=r?this._bringOverlayAtIndexToFront(r):(r=this._overlays.length,n=this._overlays[r-1],i=Math.max(this._getZ(n),this._minimumZ),t=this._getZ(e),n&&this._shouldBeBehindOverlay(e,n)&&(this._applyOverlayZ(n,i),n=this._overlays[--r-1],i=Math.max(this._getZ(n),this._minimumZ)),t<=i&&this._applyOverlayZ(e,i),this._overlays.splice(r,0,e)),this.trackBackdrop()},removeOverlay:function(e){e=this._overlays.indexOf(e);-1!==e&&(this._overlays.splice(e,1),this.trackBackdrop())},currentOverlay:function(){var e=this._overlays.length-1;return this._overlays[e]},currentOverlayZ:function(){return this._getZ(this.currentOverlay())},ensureMinimumZ:function(e){this._minimumZ=Math.max(this._minimumZ,e)},focusOverlay:function(){var e=this.currentOverlay();e&&e._applyFocus()},trackBackdrop:function(){var e=this._overlayWithBackdrop();(e||this._backdropElement)&&(this.backdropElement.style.zIndex=this._getZ(e)-1,this.backdropElement.opened=!!e)},getBackdrops:function(){for(var e=[],t=0;t<this._overlays.length;t++)this._overlays[t].withBackdrop&&e.push(this._overlays[t]);return e},backdropZ:function(){return this._getZ(this._overlayWithBackdrop())-1},_overlayWithBackdrop:function(){for(var e=0;e<this._overlays.length;e++)if(this._overlays[e].withBackdrop)return this._overlays[e]},_getZ:function(e){var t=this._minimumZ;return t=e&&(e=Number(e.style.zIndex||window.getComputedStyle(e).zIndex))==e?e:t},_setZ:function(e,t){e.style.zIndex=t},_applyOverlayZ:function(e,t){this._setZ(e,t+2)},_overlayInPath:function(e){e=e||[];for(var t=0;t<e.length;t++)if(e[t]._manager===this)return e[t]},_onCaptureClick:function(e){var t=this.currentOverlay();t&&this._overlayInPath(Polymer.dom(e).path)!==t&&t._onCaptureClick(e)},_onCaptureFocus:function(e){var t=this.currentOverlay();t&&t._onCaptureFocus(e)},_onCaptureKeyDown:function(e){var t=this.currentOverlay();t&&(Polymer.IronA11yKeysBehavior.keyboardEventMatchesKeys(e,"esc")?t._onCaptureEsc(e):Polymer.IronA11yKeysBehavior.keyboardEventMatchesKeys(e,"tab")&&t._onCaptureTab(e))},_shouldBeBehindOverlay:function(e,t){return!e.alwaysOnTop&&t.alwaysOnTop}},Polymer.IronOverlayManager=new Polymer.IronOverlayManagerClass,function(){"use strict";var e=Element.prototype,t=e.matches||e.matchesSelector||e.mozMatchesSelector||e.msMatchesSelector||e.oMatchesSelector||e.webkitMatchesSelector;Polymer.IronFocusablesHelper={getTabbableNodes:function(e){var t=[];return this._collectTabbableNodes(e,t)?this._sortByTabIndex(t):t},isFocusable:function(e){return t.call(e,"input, select, textarea, button, object")?t.call(e,":not([disabled])"):t.call(e,"a[href], area[href], iframe, [tabindex], [contentEditable]")},isTabbable:function(e){return this.isFocusable(e)&&t.call(e,':not([tabindex="-1"])')&&this._isVisible(e)},_normalizedTabIndex:function(e){return this.isFocusable(e)?(e=e.getAttribute("tabindex")||0,Number(e)):-1},_collectTabbableNodes:function(e,t){if(e.nodeType!==Node.ELEMENT_NODE||!this._isVisible(e))return!1;var n=this._normalizedTabIndex(e),i=0<n;0<=n&&t.push(e);for(var r="content"===e.localName?Polymer.dom(e).getDistributedNodes():Polymer.dom(e.root||e).children,o=0;o<r.length;o++)var s=this._collectTabbableNodes(r[o],t),i=i||s;return i},_isVisible:function(e){var t=e.style;return"hidden"!==t.visibility&&"none"!==t.display&&"hidden"!==(t=window.getComputedStyle(e)).visibility&&"none"!==t.display},_sortByTabIndex:function(e){var t,n=e.length;return n<2?e:(n=Math.ceil(n/2),t=this._sortByTabIndex(e.slice(0,n)),e=this._sortByTabIndex(e.slice(n)),this._mergeSortByTabIndex(t,e))},_mergeSortByTabIndex:function(e,t){for(var n=[];0<e.length&&0<t.length;)this._hasLowerTabOrder(e[0],t[0])?n.push(t.shift()):n.push(e.shift());return n.concat(e,t)},_hasLowerTabOrder:function(e,t){e=Math.max(e.tabIndex,0),t=Math.max(t.tabIndex,0);return 0===e||0===t?e<t:t<e}}}(),function(){"use strict";Polymer.IronOverlayBehaviorImpl={properties:{opened:{observer:"_openedChanged",type:Boolean,value:!1,notify:!0},canceled:{observer:"_canceledChanged",readOnly:!0,type:Boolean,value:!1},withBackdrop:{observer:"_withBackdropChanged",type:Boolean},noAutoFocus:{type:Boolean,value:!1},noCancelOnEscKey:{type:Boolean,value:!1},noCancelOnOutsideClick:{type:Boolean,value:!1},closingReason:{type:Object},restoreFocusOnClose:{type:Boolean,value:!1},alwaysOnTop:{type:Boolean},_manager:{type:Object,value:Polymer.IronOverlayManager},_focusedChild:{type:Object}},listeners:{"iron-resize":"_onIronResize"},get backdropElement(){return this._manager.backdropElement},get _focusNode(){return this._focusedChild||Polymer.dom(this).querySelector("[autofocus]")||this},get _focusableNodes(){return Polymer.IronFocusablesHelper.getTabbableNodes(this)},ready:function(){this.__isAnimating=!1,this.__shouldRemoveTabIndex=!1,this.__firstFocusableNode=this.__lastFocusableNode=null,this.__raf=null,this.__restoreFocusNode=null,this._ensureSetup()},attached:function(){this.opened&&this._openedChanged(this.opened),this._observer=Polymer.dom(this).observeNodes(this._onNodesChange)},detached:function(){Polymer.dom(this).unobserveNodes(this._observer),this._observer=null,this.__raf&&(window.cancelAnimationFrame(this.__raf),this.__raf=null),this._manager.removeOverlay(this)},toggle:function(){this._setCanceled(!1),this.opened=!this.opened},open:function(){this._setCanceled(!1),this.opened=!0},close:function(){this._setCanceled(!1),this.opened=!1},cancel:function(e){this.fire("iron-overlay-canceled",e,{cancelable:!0}).defaultPrevented||(this._setCanceled(!0),this.opened=!1)},invalidateTabbables:function(){this.__firstFocusableNode=this.__lastFocusableNode=null},_ensureSetup:function(){this._overlaySetup||(this._overlaySetup=!0,this.style.outline="none",this.style.display="none")},_openedChanged:function(e){e?this.removeAttribute("aria-hidden"):this.setAttribute("aria-hidden","true"),this.isAttached&&(this.__isAnimating=!0,this.__onNextAnimationFrame(this.__openedChanged))},_canceledChanged:function(){this.closingReason=this.closingReason||{},this.closingReason.canceled=this.canceled},_withBackdropChanged:function(){this.withBackdrop&&!this.hasAttribute("tabindex")?(this.setAttribute("tabindex","-1"),this.__shouldRemoveTabIndex=!0):this.__shouldRemoveTabIndex&&(this.removeAttribute("tabindex"),this.__shouldRemoveTabIndex=!1),this.opened&&this.isAttached&&this._manager.trackBackdrop()},_prepareRenderOpened:function(){this.__restoreFocusNode=this._manager.deepActiveElement,this._preparePositioning(),this.refit(),this._finishPositioning(),this.noAutoFocus&&document.activeElement===this._focusNode&&(this._focusNode.blur(),this.__restoreFocusNode.focus())},_renderOpened:function(){this._finishRenderOpened()},_renderClosed:function(){this._finishRenderClosed()},_finishRenderOpened:function(){this.notifyResize(),this.__isAnimating=!1,this.fire("iron-overlay-opened")},_finishRenderClosed:function(){this.style.display="none",this.style.zIndex="",this.notifyResize(),this.__isAnimating=!1,this.fire("iron-overlay-closed",this.closingReason)},_preparePositioning:function(){this.style.transition=this.style.webkitTransition="none",this.style.transform=this.style.webkitTransform="none",this.style.display=""},_finishPositioning:function(){this.style.display="none",this.scrollTop=this.scrollTop,this.style.transition=this.style.webkitTransition="",this.style.transform=this.style.webkitTransform="",this.style.display="",this.scrollTop=this.scrollTop},_applyFocus:function(){var e;this.opened?this.noAutoFocus||this._focusNode.focus():(this._focusNode.blur(),this._focusedChild=null,this.restoreFocusOnClose&&this.__restoreFocusNode&&this.__restoreFocusNode.focus(),this.__restoreFocusNode=null,(e=this._manager.currentOverlay())&&this!==e&&e._applyFocus())},_onCaptureClick:function(e){this.noCancelOnOutsideClick||this.cancel(e)},_onCaptureFocus:function(e){var t;this.withBackdrop&&(-1===(t=Polymer.dom(e).path).indexOf(this)?(e.stopPropagation(),this._applyFocus()):this._focusedChild=t[0])},_onCaptureEsc:function(e){this.noCancelOnEscKey||this.cancel(e)},_onCaptureTab:function(e){var t,n,i;this.withBackdrop&&(this.__ensureFirstLastFocusables(),(t=(n=e.shiftKey)?this.__firstFocusableNode:this.__lastFocusableNode)===(n=n?this.__lastFocusableNode:this.__firstFocusableNode)||(i=this._manager.deepActiveElement)===t||i===this)&&(e.preventDefault(),this._focusedChild=n,this._applyFocus())},_onIronResize:function(){this.opened&&!this.__isAnimating&&this.__onNextAnimationFrame(this.refit)},_onNodesChange:function(){this.opened&&!this.__isAnimating&&(this.invalidateTabbables(),this.notifyResize())},__ensureFirstLastFocusables:function(){var e;this.__firstFocusableNode&&this.__lastFocusableNode||(e=this._focusableNodes,this.__firstFocusableNode=e[0],this.__lastFocusableNode=e[e.length-1])},__openedChanged:function(){this.opened?(this._prepareRenderOpened(),this._manager.addOverlay(this),this._applyFocus(),this._renderOpened()):(this._manager.removeOverlay(this),this._applyFocus(),this._renderClosed())},__onNextAnimationFrame:function(e){this.__raf&&window.cancelAnimationFrame(this.__raf);var t=this;this.__raf=window.requestAnimationFrame(function(){t.__raf=null,e.call(t)})}},Polymer.IronOverlayBehavior=[Polymer.IronFitBehavior,Polymer.IronResizableBehavior,Polymer.IronOverlayBehaviorImpl]}(),Polymer.PaperDialogBehaviorImpl={hostAttributes:{role:"dialog",tabindex:"-1"},properties:{modal:{type:Boolean,value:!1}},observers:["_modalChanged(modal, _readied)"],listeners:{tap:"_onDialogClick"},ready:function(){this.__prevNoCancelOnOutsideClick=this.noCancelOnOutsideClick,this.__prevNoCancelOnEscKey=this.noCancelOnEscKey,this.__prevWithBackdrop=this.withBackdrop},_modalChanged:function(e,t){t&&(e?(this.__prevNoCancelOnOutsideClick=this.noCancelOnOutsideClick,this.__prevNoCancelOnEscKey=this.noCancelOnEscKey,this.__prevWithBackdrop=this.withBackdrop,this.noCancelOnOutsideClick=!0,this.noCancelOnEscKey=!0,this.withBackdrop=!0):(this.noCancelOnOutsideClick=this.noCancelOnOutsideClick&&this.__prevNoCancelOnOutsideClick,this.noCancelOnEscKey=this.noCancelOnEscKey&&this.__prevNoCancelOnEscKey,this.withBackdrop=this.withBackdrop&&this.__prevWithBackdrop))},_updateClosingReasonConfirmed:function(e){this.closingReason=this.closingReason||{},this.closingReason.confirmed=e},_onDialogClick:function(e){for(var t=Polymer.dom(e).path,n=0;n<t.indexOf(this);n++){var i=t[n];if(i.hasAttribute&&(i.hasAttribute("dialog-dismiss")||i.hasAttribute("dialog-confirm"))){this._updateClosingReasonConfirmed(i.hasAttribute("dialog-confirm")),this.close(),e.stopPropagation();break}}}},Polymer.PaperDialogBehavior=[Polymer.IronOverlayBehavior,Polymer.PaperDialogBehaviorImpl],Polymer({is:"paper-dialog",behaviors:[Polymer.PaperDialogBehavior,Polymer.NeonAnimationRunnerBehavior],listeners:{"neon-animation-finish":"_onNeonAnimationFinish"},_renderOpened:function(){this.cancelAnimation(),this.playAnimation("entry")},_renderClosed:function(){this.cancelAnimation(),this.playAnimation("exit")},_onNeonAnimationFinish:function(){this.opened?this._finishRenderOpened():this._finishRenderClosed()}}),Polymer.IronRangeBehavior={properties:{value:{type:Number,value:0,notify:!0,reflectToAttribute:!0},min:{type:Number,value:0,notify:!0},max:{type:Number,value:100,notify:!0},step:{type:Number,value:1,notify:!0},ratio:{type:Number,value:0,readOnly:!0,notify:!0}},observers:["_update(value, min, max, step)"],_calcRatio:function(e){return(this._clampValue(e)-this.min)/(this.max-this.min)},_clampValue:function(e){return Math.min(this.max,Math.max(this.min,this._calcStep(e)))},_calcStep:function(e){var t;return e=parseFloat(e),this.step?(t=Math.round((e-this.min)/this.step),this.step<1?t/(1/this.step)+this.min:t*this.step+this.min):e},_validateValue:function(){var e=this._clampValue(this.value);return this.value=this.oldValue=isNaN(e)?this.oldValue:e,this.value!==e},_update:function(){this._validateValue(),this._setRatio(100*this._calcRatio(this.value))}},Polymer({is:"paper-progress",behaviors:[Polymer.IronRangeBehavior],properties:{secondaryProgress:{type:Number,value:0},secondaryRatio:{type:Number,value:0,readOnly:!0},indeterminate:{type:Boolean,value:!1,observer:"_toggleIndeterminate"},disabled:{type:Boolean,value:!1,reflectToAttribute:!0,observer:"_disabledChanged"}},observers:["_progressChanged(secondaryProgress, value, min, max)"],hostAttributes:{role:"progressbar"},_toggleIndeterminate:function(e){this.toggleClass("indeterminate",e,this.$.primaryProgress)},_transformProgress:function(e,t){e.style.transform=e.style.webkitTransform="scaleX("+t/100+")"},_mainRatioChanged:function(e){this._transformProgress(this.$.primaryProgress,e)},_progressChanged:function(e,t,n,i){e=this._clampValue(e),t=this._clampValue(t);var r=100*this._calcRatio(e),o=100*this._calcRatio(t);this._setSecondaryRatio(r),this._transformProgress(this.$.secondaryProgress,r),this._transformProgress(this.$.primaryProgress,o),this.secondaryProgress=e,this.setAttribute("aria-valuenow",t),this.setAttribute("aria-valuemin",n),this.setAttribute("aria-valuemax",i)},_disabledChanged:function(e){this.setAttribute("aria-disabled",e?"true":"false")},_hideSecondaryProgress:function(e){return 0===e}}),Polymer.IronControlState={properties:{focused:{type:Boolean,value:!1,notify:!0,readOnly:!0,reflectToAttribute:!0},disabled:{type:Boolean,value:!1,notify:!0,observer:"_disabledChanged",reflectToAttribute:!0},_oldTabIndex:{type:Number},_boundFocusBlurHandler:{type:Function,value:function(){return this._focusBlurHandler.bind(this)}}},observers:["_changedControlState(focused, disabled)"],ready:function(){this.addEventListener("focus",this._boundFocusBlurHandler,!0),this.addEventListener("blur",this._boundFocusBlurHandler,!0)},_focusBlurHandler:function(e){var t;e.target===this?this._setFocused("focus"===e.type):this.shadowRoot||(t=Polymer.dom(e).localTarget,this.isLightDescendant(t))||this.fire(e.type,{sourceEvent:e},{node:this,bubbles:e.bubbles,cancelable:e.cancelable})},_disabledChanged:function(e,t){this.setAttribute("aria-disabled",e?"true":"false"),this.style.pointerEvents=e?"none":"",e?(this._oldTabIndex=this.tabIndex,this._setFocused(!1),this.tabIndex=-1,this.blur()):void 0!==this._oldTabIndex&&(this.tabIndex=this._oldTabIndex)},_changedControlState:function(){this._controlStateChanged&&this._controlStateChanged()}},Polymer.IronButtonStateImpl={properties:{pressed:{type:Boolean,readOnly:!0,value:!1,reflectToAttribute:!0,observer:"_pressedChanged"},toggles:{type:Boolean,value:!1,reflectToAttribute:!0},active:{type:Boolean,value:!1,notify:!0,reflectToAttribute:!0},pointerDown:{type:Boolean,readOnly:!0,value:!1},receivedFocusFromKeyboard:{type:Boolean,readOnly:!0},ariaActiveAttribute:{type:String,value:"aria-pressed",observer:"_ariaActiveAttributeChanged"}},listeners:{down:"_downHandler",up:"_upHandler",tap:"_tapHandler"},observers:["_focusChanged(focused)","_activeChanged(active, ariaActiveAttribute)"],keyBindings:{"enter:keydown":"_asyncClick","space:keydown":"_spaceKeyDownHandler","space:keyup":"_spaceKeyUpHandler"},_mouseEventRe:/^mouse/,_tapHandler:function(){this.toggles?this._userActivate(!this.active):this.active=!1},_focusChanged:function(e){this._detectKeyboardFocus(e),e||this._setPressed(!1)},_detectKeyboardFocus:function(e){this._setReceivedFocusFromKeyboard(!this.pointerDown&&e)},_userActivate:function(e){this.active!==e&&(this.active=e,this.fire("change"))},_downHandler:function(e){this._setPointerDown(!0),this._setPressed(!0),this._setReceivedFocusFromKeyboard(!1)},_upHandler:function(){this._setPointerDown(!1),this._setPressed(!1)},_spaceKeyDownHandler:function(e){var e=e.detail.keyboardEvent,t=Polymer.dom(e).localTarget;this.isLightDescendant(t)||(e.preventDefault(),e.stopImmediatePropagation(),this._setPressed(!0))},_spaceKeyUpHandler:function(e){e=e.detail.keyboardEvent,e=Polymer.dom(e).localTarget;this.isLightDescendant(e)||(this.pressed&&this._asyncClick(),this._setPressed(!1))},_asyncClick:function(){this.async(function(){this.click()},1)},_pressedChanged:function(e){this._changedButtonState()},_ariaActiveAttributeChanged:function(e,t){t&&t!=e&&this.hasAttribute(t)&&this.removeAttribute(t)},_activeChanged:function(e,t){this.toggles?this.setAttribute(this.ariaActiveAttribute,e?"true":"false"):this.removeAttribute(this.ariaActiveAttribute),this._changedButtonState()},_controlStateChanged:function(){this.disabled?this._setPressed(!1):this._changedButtonState()},_changedButtonState:function(){this._buttonStateChanged&&this._buttonStateChanged()}},Polymer.IronButtonState=[Polymer.IronA11yKeysBehavior,Polymer.IronButtonStateImpl],function(){var o={distance:function(e,t,n,i){e-=n,n=t-i;return Math.sqrt(e*e+n*n)},now:window.performance&&window.performance.now?window.performance.now.bind(window.performance):Date.now};function e(e){this.element=e,this.width=this.boundingRect.width,this.height=this.boundingRect.height,this.size=Math.max(this.width,this.height)}function n(e){this.element=e,this.color=window.getComputedStyle(e).color,this.wave=document.createElement("div"),this.waveContainer=document.createElement("div"),this.wave.style.backgroundColor=this.color,this.wave.classList.add("wave"),this.waveContainer.classList.add("wave-container"),Polymer.dom(this.waveContainer).appendChild(this.wave),this.resetInteractionState()}e.prototype={get boundingRect(){return this.element.getBoundingClientRect()},furthestCornerDistanceFrom:function(e,t){var n=o.distance(e,t,0,0),i=o.distance(e,t,this.width,0),r=o.distance(e,t,0,this.height),e=o.distance(e,t,this.width,this.height);return Math.max(n,i,r,e)}},n.MAX_RADIUS=300,n.prototype={get recenters(){return this.element.recenters},get center(){return this.element.center},get mouseDownElapsed(){var e;return this.mouseDownStart?(e=o.now()-this.mouseDownStart,this.mouseUpStart&&(e-=this.mouseUpElapsed),e):0},get mouseUpElapsed(){return this.mouseUpStart?o.now()-this.mouseUpStart:0},get mouseDownElapsedSeconds(){return this.mouseDownElapsed/1e3},get mouseUpElapsedSeconds(){return this.mouseUpElapsed/1e3},get mouseInteractionSeconds(){return this.mouseDownElapsedSeconds+this.mouseUpElapsedSeconds},get initialOpacity(){return this.element.initialOpacity},get opacityDecayVelocity(){return this.element.opacityDecayVelocity},get radius(){var e=this.containerMetrics.width*this.containerMetrics.width,t=this.containerMetrics.height*this.containerMetrics.height,e=1.1*Math.min(Math.sqrt(e+t),n.MAX_RADIUS)+5,t=this.mouseInteractionSeconds/(1.1-e/n.MAX_RADIUS*.2),e=e*(1-Math.pow(80,-t));return Math.abs(e)},get opacity(){return this.mouseUpStart?Math.max(0,this.initialOpacity-this.mouseUpElapsedSeconds*this.opacityDecayVelocity):this.initialOpacity},get outerOpacity(){var e=.3*this.mouseUpElapsedSeconds,t=this.opacity;return Math.max(0,Math.min(e,t))},get isOpacityFullyDecayed(){return this.opacity<.01&&this.radius>=Math.min(this.maxRadius,n.MAX_RADIUS)},get isRestingAtMaxRadius(){return this.opacity>=this.initialOpacity&&this.radius>=Math.min(this.maxRadius,n.MAX_RADIUS)},get isAnimationComplete(){return this.mouseUpStart?this.isOpacityFullyDecayed:this.isRestingAtMaxRadius},get translationFraction(){return Math.min(1,this.radius/this.containerMetrics.size*2/Math.sqrt(2))},get xNow(){return this.xEnd?this.xStart+this.translationFraction*(this.xEnd-this.xStart):this.xStart},get yNow(){return this.yEnd?this.yStart+this.translationFraction*(this.yEnd-this.yStart):this.yStart},get isMouseDown(){return this.mouseDownStart&&!this.mouseUpStart},resetInteractionState:function(){this.maxRadius=0,this.mouseDownStart=0,this.mouseUpStart=0,this.xStart=0,this.yStart=0,this.xEnd=0,this.yEnd=0,this.slideDistance=0,this.containerMetrics=new e(this.element)},draw:function(){var e,t,n;this.wave.style.opacity=this.opacity,e=this.radius/(this.containerMetrics.size/2),t=this.xNow-this.containerMetrics.width/2,n=this.yNow-this.containerMetrics.height/2,this.waveContainer.style.webkitTransform="translate("+t+"px, "+n+"px)",this.waveContainer.style.transform="translate3d("+t+"px, "+n+"px, 0)",this.wave.style.webkitTransform="scale("+e+","+e+")",this.wave.style.transform="scale3d("+e+","+e+",1)"},downAction:function(e){var t=this.containerMetrics.width/2,n=this.containerMetrics.height/2;this.resetInteractionState(),this.mouseDownStart=o.now(),this.center?(this.xStart=t,this.yStart=n,this.slideDistance=o.distance(this.xStart,this.yStart,this.xEnd,this.yEnd)):(this.xStart=e?e.detail.x-this.containerMetrics.boundingRect.left:this.containerMetrics.width/2,this.yStart=e?e.detail.y-this.containerMetrics.boundingRect.top:this.containerMetrics.height/2),this.recenters&&(this.xEnd=t,this.yEnd=n,this.slideDistance=o.distance(this.xStart,this.yStart,this.xEnd,this.yEnd)),this.maxRadius=this.containerMetrics.furthestCornerDistanceFrom(this.xStart,this.yStart),this.waveContainer.style.top=(this.containerMetrics.height-this.containerMetrics.size)/2+"px",this.waveContainer.style.left=(this.containerMetrics.width-this.containerMetrics.size)/2+"px",this.waveContainer.style.width=this.containerMetrics.size+"px",this.waveContainer.style.height=this.containerMetrics.size+"px"},upAction:function(e){this.isMouseDown&&(this.mouseUpStart=o.now())},remove:function(){Polymer.dom(this.waveContainer.parentNode).removeChild(this.waveContainer)}},Polymer({is:"paper-ripple",behaviors:[Polymer.IronA11yKeysBehavior],properties:{initialOpacity:{type:Number,value:.25},opacityDecayVelocity:{type:Number,value:.8},recenters:{type:Boolean,value:!1},center:{type:Boolean,value:!1},ripples:{type:Array,value:function(){return[]}},animating:{type:Boolean,readOnly:!0,reflectToAttribute:!0,value:!1},holdDown:{type:Boolean,value:!1,observer:"_holdDownChanged"},noink:{type:Boolean,value:!1},_animating:{type:Boolean},_boundAnimate:{type:Function,value:function(){return this.animate.bind(this)}}},get target(){return this.keyEventTarget},keyBindings:{"enter:keydown":"_onEnterKeydown","space:keydown":"_onSpaceKeydown","space:keyup":"_onSpaceKeyup"},attached:function(){11==this.parentNode.nodeType?this.keyEventTarget=Polymer.dom(this).getOwnerRoot().host:this.keyEventTarget=this.parentNode;var e=this.keyEventTarget;this.listen(e,"up","uiUpAction"),this.listen(e,"down","uiDownAction")},detached:function(){this.unlisten(this.keyEventTarget,"up","uiUpAction"),this.unlisten(this.keyEventTarget,"down","uiDownAction"),this.keyEventTarget=null},get shouldKeepAnimating(){for(var e=0;e<this.ripples.length;++e)if(!this.ripples[e].isAnimationComplete)return!0;return!1},simulatedRipple:function(){this.downAction(null),this.async(function(){this.upAction()},1)},uiDownAction:function(e){this.noink||this.downAction(e)},downAction:function(e){this.holdDown&&0<this.ripples.length||(this.addRipple().downAction(e),this._animating)||(this._animating=!0,this.animate())},uiUpAction:function(e){this.noink||this.upAction(e)},upAction:function(t){this.holdDown||(this.ripples.forEach(function(e){e.upAction(t)}),this._animating=!0,this.animate())},onAnimationComplete:function(){this._animating=!1,this.$.background.style.backgroundColor=null,this.fire("transitionend")},addRipple:function(){var e=new n(this);return Polymer.dom(this.$.waves).appendChild(e.waveContainer),this.$.background.style.backgroundColor=e.color,this.ripples.push(e),this._setAnimating(!0),e},removeRipple:function(e){var t=this.ripples.indexOf(e);t<0||(this.ripples.splice(t,1),e.remove(),this.ripples.length)||this._setAnimating(!1)},animate:function(){if(this._animating){for(var e,t=0;t<this.ripples.length;++t)(e=this.ripples[t]).draw(),this.$.background.style.opacity=e.outerOpacity,e.isOpacityFullyDecayed&&!e.isRestingAtMaxRadius&&this.removeRipple(e);this.shouldKeepAnimating||0!==this.ripples.length?window.requestAnimationFrame(this._boundAnimate):this.onAnimationComplete()}},_onEnterKeydown:function(){this.uiDownAction(),this.async(this.uiUpAction,1)},_onSpaceKeydown:function(){this.uiDownAction()},_onSpaceKeyup:function(){this.uiUpAction()},_holdDownChanged:function(e,t){void 0!==t&&(e?this.downAction():this.upAction())}})}(),Polymer.PaperRippleBehavior={properties:{noink:{type:Boolean,observer:"_noinkChanged"},_rippleContainer:{type:Object}},_buttonStateChanged:function(){this.focused&&this.ensureRipple()},_downHandler:function(e){Polymer.IronButtonStateImpl._downHandler.call(this,e),this.pressed&&this.ensureRipple(e)},ensureRipple:function(e){var t,n;this.hasRipple()||(this._ripple=this._createRipple(),this._ripple.noink=this.noink,(t=this._rippleContainer||this.root)&&Polymer.dom(t).appendChild(this._ripple),e&&(t=Polymer.dom(this._rippleContainer||this),n=Polymer.dom(e).rootTarget,t.deepContains(n))&&this._ripple.uiDownAction(e))},getRipple:function(){return this.ensureRipple(),this._ripple},hasRipple:function(){return Boolean(this._ripple)},_createRipple:function(){return document.createElement("paper-ripple")},_noinkChanged:function(e){this.hasRipple()&&(this._ripple.noink=e)}},Polymer.PaperButtonBehaviorImpl={properties:{elevation:{type:Number,reflectToAttribute:!0,readOnly:!0}},observers:["_calculateElevation(focused, disabled, active, pressed, receivedFocusFromKeyboard)","_computeKeyboardClass(receivedFocusFromKeyboard)"],hostAttributes:{role:"button",tabindex:"0",animated:!0},_calculateElevation:function(){var e=1;this.disabled?e=0:this.active||this.pressed?e=4:this.receivedFocusFromKeyboard&&(e=3),this._setElevation(e)},_computeKeyboardClass:function(e){this.toggleClass("keyboard-focus",e)},_spaceKeyDownHandler:function(e){Polymer.IronButtonStateImpl._spaceKeyDownHandler.call(this,e),this.hasRipple()&&this.getRipple().ripples.length<1&&this._ripple.uiDownAction()},_spaceKeyUpHandler:function(e){Polymer.IronButtonStateImpl._spaceKeyUpHandler.call(this,e),this.hasRipple()&&this._ripple.uiUpAction()}},Polymer.PaperButtonBehavior=[Polymer.IronButtonState,Polymer.IronControlState,Polymer.PaperRippleBehavior,Polymer.PaperButtonBehaviorImpl],Polymer({is:"paper-button",behaviors:[Polymer.PaperButtonBehavior],properties:{raised:{type:Boolean,reflectToAttribute:!0,value:!1,observer:"_calculateElevation"}},_calculateElevation:function(){this.raised?Polymer.PaperButtonBehaviorImpl._calculateElevation.apply(this):this._setElevation(0)}}),Polymer({is:"iron-icon",properties:{icon:{type:String},theme:{type:String},src:{type:String},_meta:{value:Polymer.Base.create("iron-meta",{type:"iconset"})}},observers:["_updateIcon(_meta, isAttached)","_updateIcon(theme, isAttached)","_srcChanged(src, isAttached)","_iconChanged(icon, isAttached)"],_DEFAULT_ICONSET:"icons",_iconChanged:function(e){e=(e||"").split(":");this._iconName=e.pop(),this._iconsetName=e.pop()||this._DEFAULT_ICONSET,this._updateIcon()},_srcChanged:function(e){this._updateIcon()},_usesIconset:function(){return this.icon||!this.src},_updateIcon:function(){this._usesIconset()?(this._img&&this._img.parentNode&&Polymer.dom(this.root).removeChild(this._img),""===this._iconName?this._iconset&&this._iconset.removeIcon(this):this._iconsetName&&this._meta&&(this._iconset=this._meta.byKey(this._iconsetName),this._iconset?(this._iconset.applyIcon(this,this._iconName,this.theme),this.unlisten(window,"iron-iconset-added","_updateIcon")):this.listen(window,"iron-iconset-added","_updateIcon"))):(this._iconset&&this._iconset.removeIcon(this),this._img||(this._img=document.createElement("img"),this._img.style.width="100%",this._img.style.height="100%",this._img.draggable=!1),this._img.src=this.src,Polymer.dom(this.root).appendChild(this._img))}}),Polymer.PaperInkyFocusBehaviorImpl={observers:["_focusedChanged(receivedFocusFromKeyboard)"],_focusedChanged:function(e){e&&this.ensureRipple(),this.hasRipple()&&(this._ripple.holdDown=e)},_createRipple:function(){var e=Polymer.PaperRippleBehavior._createRipple();return e.id="ink",e.setAttribute("center",""),e.classList.add("circle"),e}},Polymer.PaperInkyFocusBehavior=[Polymer.IronButtonState,Polymer.IronControlState,Polymer.PaperRippleBehavior,Polymer.PaperInkyFocusBehaviorImpl],Polymer({is:"paper-icon-button",hostAttributes:{role:"button",tabindex:"0"},behaviors:[Polymer.PaperInkyFocusBehavior],properties:{src:{type:String},icon:{type:String},alt:{type:String,observer:"_altChanged"}},_altChanged:function(e,t){var n=this.getAttribute("aria-label");n&&t!=n||this.setAttribute("aria-label",e)}}),Polymer({is:"iron-iconset-svg",properties:{name:{type:String,observer:"_nameChanged"},size:{type:Number,value:24},rtlMirroring:{type:Boolean,value:!1}},attached:function(){this.style.display="none"},getIconNames:function(){return this._icons=this._createIconMap(),Object.keys(this._icons).map(function(e){return this.name+":"+e},this)},applyIcon:function(e,t){e=e.root||e,this.removeIcon(e);var n,t=this._cloneIcon(t,this.rtlMirroring&&this._targetIsRTL(e));return t?((n=Polymer.dom(e)).insertBefore(t,n.childNodes[0]),e._svgIcon=t):null},removeIcon:function(e){(e=e.root||e)._svgIcon&&(Polymer.dom(e).removeChild(e._svgIcon),e._svgIcon=null)},_targetIsRTL:function(e){return null==this.__targetIsRTL&&(e&&e.nodeType!==Node.ELEMENT_NODE&&(e=e.host),this.__targetIsRTL=e&&"rtl"===window.getComputedStyle(e).direction),this.__targetIsRTL},_nameChanged:function(){new Polymer.IronMeta({type:"iconset",key:this.name,value:this}),this.async(function(){this.fire("iron-iconset-added",this,{node:window})})},_createIconMap:function(){var t=Object.create(null);return Polymer.dom(this).querySelectorAll("[id]").forEach(function(e){t[e.id]=e}),t},_cloneIcon:function(e,t){return this._icons=this._icons||this._createIconMap(),this._prepareSvgClone(this._icons[e],this.size,t)},_prepareSvgClone:function(e,t,n){var i,r;return e?(e=e.cloneNode(!0),i=document.createElementNS("http://www.w3.org/2000/svg","svg"),t=e.getAttribute("viewBox")||"0 0 "+t+" "+t,r="pointer-events: none; display: block; width: 100%; height: 100%;",n&&e.hasAttribute("mirror-in-rtl")&&(r+="-webkit-transform:scale(-1,1);transform:scale(-1,1);"),i.setAttribute("viewBox",t),i.setAttribute("preserveAspectRatio","xMidYMid meet"),i.setAttribute("focusable","false"),i.style.cssText=r,i.appendChild(e).removeAttribute("id"),i):null}}),Polymer({is:"iron-collapse",behaviors:[Polymer.IronResizableBehavior],properties:{horizontal:{type:Boolean,value:!1,observer:"_horizontalChanged"},opened:{type:Boolean,value:!1,notify:!0,observer:"_openedChanged"},transitioning:{type:Boolean,notify:!0,readOnly:!0},noAnimation:{type:Boolean},_desiredSize:{type:String,value:""}},get dimension(){return this.horizontal?"width":"height"},get _dimensionMax(){return this.horizontal?"maxWidth":"maxHeight"},get _dimensionMaxCss(){return this.horizontal?"max-width":"max-height"},hostAttributes:{role:"group","aria-hidden":"true","aria-expanded":"false"},listeners:{transitionend:"_onTransitionEnd"},toggle:function(){this.opened=!this.opened},show:function(){this.opened=!0},hide:function(){this.opened=!1},updateSize:function(e,t){e="auto"===e?"":e;var n,t=t&&!this.noAnimation&&this.isAttached&&this._desiredSize!==e;this._desiredSize=e,this._updateTransition(!1),t&&(n=this._calcSize(),""===e&&(this.style[this._dimensionMax]="",e=this._calcSize()),this.style[this._dimensionMax]=n,this.scrollTop=this.scrollTop,this._updateTransition(!0),t=e!==n),this.style[this._dimensionMax]=e,t||this._transitionEnd()},enableTransition:function(e){Polymer.Base._warn("`enableTransition()` is deprecated, use `noAnimation` instead."),this.noAnimation=!e},_updateTransition:function(e){this.style.transitionDuration=e&&!this.noAnimation?"":"0s"},_horizontalChanged:function(){this.style.transitionProperty=this._dimensionMaxCss;var e="maxWidth"===this._dimensionMax?"maxHeight":"maxWidth";this.style[e]="",this.updateSize(this.opened?"auto":"0px",!1)},_openedChanged:function(){this.setAttribute("aria-expanded",this.opened),this.setAttribute("aria-hidden",!this.opened),this._setTransitioning(!0),this.toggleClass("iron-collapse-closed",!1),this.toggleClass("iron-collapse-opened",!1),this.updateSize(this.opened?"auto":"0px",!0),this.opened&&this.focus()},_transitionEnd:function(){this.style[this._dimensionMax]=this._desiredSize,this.toggleClass("iron-collapse-closed",!this.opened),this.toggleClass("iron-collapse-opened",this.opened),this._updateTransition(!1),this.notifyResize(),this._setTransitioning(!1)},_onTransitionEnd:function(e){Polymer.dom(e).rootTarget===this&&this._transitionEnd()},_calcSize:function(){return this.getBoundingClientRect()[this.dimension]+"px"}}),Polymer({is:"testrtc-suite",properties:{state:{value:"pending",reflectToAttribute:!0},tests:{type:Array,value:function(){return[]}}},_iconForState:function(e){return"failure"===e?"close":"warning"===e?"warning":"success"===e?"check":"running"===e?"more-horiz":""},toggle:function(){this.$.collapse.toggle()},addTest:function(e,t){var n=document.createElement("testrtc-test");n.name=e,n.testFunction=t,Polymer.dom(this.$.collapse).appendChild(n),this.tests.push(n)},run:function(e){this.opened=!0,this.state="running",runAllSequentially(this.tests,this.allTestsFinished.bind(this,e))},allTestsFinished:function(e){for(var t=0,n=0,i=0,r=0;r!==this.tests.length;++r)t+=this.tests[r].errorCount,n+=this.tests[r].warningCount,i+=this.tests[r].successCount;0===t&&0===n&&0<i?(this.state="success",this.opened=!1):(this.state=0===t&&0<n?"warning":"failure",this.opened=!0),e()}});var currentTest,interval=0,PREFIX_INFO=(Polymer({is:"line-chart",x:[],y:[],yScale:[0,600],yLabels:[0,50,100,150,200,250,300,350,400,450,500],xStart:null,xOffset:null,lastSlowRender:null,addDatapoint:function(e,t){var n=window.performance.now(),i=(this.ctx=this.$.canvas.getContext("2d"),this.x.length),e=(this.x.push(e/100*2),this.y.push(this.calculateY(t)),this.x[i]-this.xStart),t=(null===this.xStart||e>this.$.canvas.width?(this.setupChart(),this.xStart=this.x[i]-this.xOffset):(t=this.x[i-1]-this.xStart,this.ctx.save(),this.ctx.beginPath(),this.ctx.fillStyle=this.dotColor(this.y[i-1]),this.ctx.fillRect(t-1.5,this.y[i-1]-1.5,3,3),this.ctx.moveTo(t,this.y[i-1]),this.ctx.lineTo(e,this.y[i]),this.ctx.stroke(),this.ctx.closePath(),this.ctx.restore()),window.performance.now());this.maybeAlertAboutRenderPerformance(t-n)},maybeAlertAboutRenderPerformance:function(e){var t;e<5||(t=window.performance.now(),(null===this.lastSlowRender||5e3<t-this.lastSlowRender)&&(this.lastSlowRender=t,console.log("Updating the graph was slow and might affect results. Graph update took "+e+" ms")))},setupChart:function(){this.ctx.clearRect(0,0,this.$.canvas.width,this.$.canvas.height),this.ctx.lineWidth=window.devicePixelRatio,this.ctx.strokeStyle="grey",this.ctx.save(),this.ctx.lineWidth=window.devicePixelRatio,this.ctx.strokeStyle="lightgray",this.ctx.lineWidth%2&&this.ctx.translate(.5,.5),this.ctx.textAlign="right",this.ctx.textBaseline="middle",this.ctx.beginPath();for(var e=this.xOffset=0;e!=this.yLabels.length;e++){var t=this.yLabels[e]+" ms ",t=this.ctx.measureText(t).width;this.xOffset=Math.max(this.xOffset,t)}for(e=0;e!=this.yLabels.length;e++){var n=this.calculateY(this.yLabels[e]);this.ctx.moveTo(this.xOffset-3,n),e%2==1?this.ctx.lineTo(this.xOffset+3,n):this.ctx.lineTo(this.$.canvas.width,n)}var i=this.calculateY(this.yLabels[this.yLabels.length-1]),r=this.calculateY(0);this.ctx.moveTo(this.xOffset,i),this.ctx.lineTo(this.xOffset,r),this.ctx.lineTo(this.$.canvas.width-1,r),this.ctx.lineTo(this.$.canvas.width-1,i),this.ctx.stroke(),this.ctx.closePath();for(e=0;e!=this.yLabels.length;e++){n=this.calculateY(this.yLabels[e]);e%2==0&&this.ctx.fillText(this.yLabels[e]+" ms ",this.xOffset,n)}this.ctx.restore()},dotColor:function(e){return e<300?"green":"red"},calculateY:function(e){e=((e=e>this.yScale[1]?this.yScale[1]-10:e)-this.yScale[0])/(this.yScale[1]-this.yScale[0]);return this.$.canvas.height*(1-e)-5}}),"[   INFO ]"),PREFIX_OK="[     OK ]",PREFIX_FAILED="[ FAILED ]",PREFIX_WARNING="[   WARN ]";function createLineChart(){return currentTest.createLineChart()}function reportSuccess(e){currentTest.reportSuccess(e)}function reportError(e){currentTest.reportError(e)}function reportFatal(e){currentTest.reportFatal(e)}function reportWarning(e){currentTest.reportWarning(e)}function reportInfo(e){currentTest.reportInfo(e)}function setTestProgress(e){currentTest.setProgress(e)}function setTestFinished(){currentTest.done()}function expectEquals(){currentTest.expectEquals.apply(currentTest,arguments)}function setTimeoutWithProgressBar(e,t){function n(){clearInterval(r),setTestProgress(100),e()}var i=window.performance.now(),r=setInterval(function(){setTestProgress(100*(window.performance.now()-i)/t)},100),o=setTimeout(n,t);return function(){clearTimeout(o),n()}}function Report(){this.output_=[],this.nextAsyncId_=0,this.nativeLog_=console.log.bind(console),console.log=this.logHook_.bind(this),window.addEventListener("error",this.onWindowError_.bind(this)),this.traceEventInstant("system-info",Report.getSystemInfo())}Polymer({is:"testrtc-test",properties:{name:{type:String},testFunction:{type:Function},settings:{type:Object,value:function(){return{}}},state:{value:"unknown",reflectToAttribute:!0},progressValue:{value:null},output:{type:Array,value:function(){return[]}}},ready:function(){this.reportMessage_(PREFIX_INFO,"Test not run yet.")},_inProgress:function(e){return null!==e},_iconForState:function(e){return"running"===e?"more-horiz":"success"===e?"check":"warning"===e?"warning":"failure"===e?"close":""},toggle:function(){this.$.collapse.toggle()},run:function(e){this.settings=document.getElementsByTagName("testrtc-main")[0].settings,this.successCount=0,this.warningCount=0,this.errorCount=0,this.doneCallback_=e,this.output=[],this.clearPlots(),this.setProgress(null),this.traceTestEvent=report.traceEventAsync("test-run"),(currentTest=this).state="running",this.traceTestEvent({name:this.name,status:this.state}),this.isDisabled?(this.reportInfo("Test is disabled."),this.done()):this.testFunction(this)},done:function(){"running"===this.state&&(this.setProgress(null),this.errorCount+this.warningCount===0&&0<this.successCount?this.state="success":0<this.warningCount&&0===this.errorCount?this.state="warning":this.isDisabled?this.state="disabled":this.state="failure",this.traceTestEvent({status:this.state}),report.logTestRunResult(this.name,this.state),this.doneCallback_())},setProgress:function(e){this.progressValue=e},expectEquals:function(e,t,n,i){e!==t?this.reportError("Failed expectation: "+e+" !== "+t+": "+n):i&&this.reportSuccess(i)},reportSuccess:function(e){this.reportMessage_(PREFIX_OK,e),this.successCount++,this.traceTestEvent({success:e})},reportError:function(e){this.reportMessage_(PREFIX_FAILED,e),this.errorCount++,this.traceTestEvent({error:e})},reportWarning:function(e){this.reportMessage_(PREFIX_WARNING,e),this.warningCount++,this.traceTestEvent({warning:e})},reportInfo:function(e){this.reportMessage_(PREFIX_INFO,e),this.traceTestEvent({info:e})},reportFatal:function(e){this.reportError(e),this.done()},reportMessage_:function(e,t){this.output=[].concat(this.output,[{prefix:e,message:t}])},clearPlots:function(){for(;null!==this.$.plot.lastElementChild;)Polymer.dom(this.$.plot).removeChild(this.$.plot.lastElementChild)},createLineChart:function(){var e=document.createElement("line-chart");return Polymer.dom(this.$.plot).appendChild(e),this.$.collapse.opened=!0,e}}),Polymer({is:"gum-handler",properties:{pending:{type:Boolean,value:!0,notify:!0},error:{type:Object,value:!1,notify:!0},getUserMedia:{type:Function,value:function(){return navigator.mediaDevices.getUserMedia.bind(navigator.mediaDevices)}},enumerateDevices:{type:Function,value:function(){return navigator.mediaDevices.enumerateDevices.bind(navigator.mediaDevices)}}},ready:function(){"undefined"!==this.getUserMedia?this.triggerGetUserMedia_():this.error="NotSupported"},triggerGetUserMedia_:function(){0!=this.pending&&this.enumerateDevices().then(this.triggerGetUserMediaBasedOnSources_.bind(this)).catch(function(e){console.log("JS Device selection not supported",e),this.triggerGetUserMediaBasedOnSources_([])}.bind(this))},triggerGetUserMediaBasedOnSources_:function(e){var t={};if(0===e.length)t={audio:!0,video:!0};else for(var n=0;n<e.length;n++)"audioinput"===e[n].kind&&(t.audio=!0),"videoinput"===e[n].kind&&(t.video=!0);this.getUserMedia(t).then(function(e){for(var t=0;t<e.getVideoTracks().length;t++)e.getVideoTracks()[t].stop();for(var n=0;n<e.getAudioTracks().length;n++)e.getAudioTracks()[n].stop();this.pending=!1,this.error=!1}.bind(this)).catch(function(e){this.error=e,setTimeout(this.triggerGetUserMedia_.bind(this),1e3)}.bind(this))}}),Polymer({is:"gum-dialog",ready:function(){setTimeout(this.$.dialog.refit.bind(this.$.dialog),0)},_createBugReport:function(){this.fire("bug-report")},_isNotSupported:function(e){return"NotSupported"===e},_isPermissionDenied:function(e){return"PermissionDeniedError"===e},_isDevicesNotFound:function(e){return"DevicesNotFoundError"===e},properties:{pending:{type:Boolean,notify:!0},heading:{type:String}}}),Polymer.IronFormElementBehavior={properties:{name:{type:String},value:{notify:!0,type:String},required:{type:Boolean,value:!1},_parentForm:{type:Object}},attached:function(){this.fire("iron-form-element-register")},detached:function(){this._parentForm&&this._parentForm.fire("iron-form-element-unregister",{target:this})}},function(){"use strict";Polymer.IronA11yAnnouncer=Polymer({is:"iron-a11y-announcer",properties:{mode:{type:String,value:"polite"},_text:{type:String,value:""}},created:function(){Polymer.IronA11yAnnouncer.instance||(Polymer.IronA11yAnnouncer.instance=this),document.body.addEventListener("iron-announce",this._onIronAnnounce.bind(this))},announce:function(e){this._text="",this.async(function(){this._text=e},100)},_onIronAnnounce:function(e){e.detail&&e.detail.text&&this.announce(e.detail.text)}}),Polymer.IronA11yAnnouncer.instance=null,Polymer.IronA11yAnnouncer.requestAvailability=function(){Polymer.IronA11yAnnouncer.instance||(Polymer.IronA11yAnnouncer.instance=document.createElement("iron-a11y-announcer")),document.body.appendChild(Polymer.IronA11yAnnouncer.instance)}}(),Polymer.IronValidatableBehaviorMeta=null,Polymer.IronValidatableBehavior={properties:{validator:{type:String},invalid:{notify:!0,reflectToAttribute:!0,type:Boolean,value:!1},_validatorMeta:{type:Object},validatorType:{type:String,value:"validator"},_validator:{type:Object,computed:"__computeValidator(validator)"}},observers:["_invalidChanged(invalid)"],registered:function(){Polymer.IronValidatableBehaviorMeta=new Polymer.IronMeta({type:"validator"})},_invalidChanged:function(){this.invalid?this.setAttribute("aria-invalid","true"):this.removeAttribute("aria-invalid")},hasValidator:function(){return null!=this._validator},validate:function(e){return this.invalid=!this._getValidity(e),!this.invalid},_getValidity:function(e){return!this.hasValidator()||this._validator.validate(e)},__computeValidator:function(){return Polymer.IronValidatableBehaviorMeta&&Polymer.IronValidatableBehaviorMeta.byKey(this.validator)}},Polymer({is:"iron-input",extends:"input",behaviors:[Polymer.IronValidatableBehavior],properties:{bindValue:{observer:"_bindValueChanged",type:String},preventInvalidInput:{type:Boolean},allowedPattern:{type:String,observer:"_allowedPatternChanged"},_previousValidInput:{type:String,value:""},_patternAlreadyChecked:{type:Boolean,value:!1}},listeners:{input:"_onInput",keypress:"_onKeypress"},registered:function(){this._canDispatchEventOnDisabled()||(this._origDispatchEvent=this.dispatchEvent,this.dispatchEvent=this._dispatchEventFirefoxIE)},created:function(){Polymer.IronA11yAnnouncer.requestAvailability()},_canDispatchEventOnDisabled:function(){var e=document.createElement("input"),t=!1;e.disabled=!0,e.addEventListener("feature-check-dispatch-event",function(){t=!0});try{e.dispatchEvent(new Event("feature-check-dispatch-event"))}catch(e){}return t},_dispatchEventFirefoxIE:function(e){var t=this.disabled,e=(this.disabled=!1,this._origDispatchEvent(e));return this.disabled=t,e},get _patternRegExp(){var e;return this.allowedPattern?e=new RegExp(this.allowedPattern):"number"===this.type&&(e=/[0-9.,e-]/),e},ready:function(){this.bindValue=this.value},_bindValueChanged:function(){this.value!==this.bindValue&&(this.value=this.bindValue||0===this.bindValue||!1===this.bindValue?this.bindValue:""),this.fire("bind-value-changed",{value:this.bindValue})},_allowedPatternChanged:function(){this.preventInvalidInput=!!this.allowedPattern},_onInput:function(){!this.preventInvalidInput||this._patternAlreadyChecked||this._checkPatternValidity()||(this._announceInvalidCharacter("Invalid string of characters not entered."),this.value=this._previousValidInput),this.bindValue=this.value,this._previousValidInput=this.value,this._patternAlreadyChecked=!1},_isPrintable:function(e){var t=8==e.keyCode||9==e.keyCode||13==e.keyCode||27==e.keyCode,n=19==e.keyCode||20==e.keyCode||45==e.keyCode||46==e.keyCode||144==e.keyCode||145==e.keyCode||32<e.keyCode&&e.keyCode<41||111<e.keyCode&&e.keyCode<124;return!(t||0==e.charCode&&n)},_onKeypress:function(e){var t,n;!this.preventInvalidInput&&"number"!==this.type||!(t=this._patternRegExp)||e.metaKey||e.ctrlKey||e.altKey||(this._patternAlreadyChecked=!0,n=String.fromCharCode(e.charCode),this._isPrintable(e)&&!t.test(n)&&(e.preventDefault(),this._announceInvalidCharacter("Invalid character "+n+" not entered.")))},_checkPatternValidity:function(){var e=this._patternRegExp;if(e)for(var t=0;t<this.value.length;t++)if(!e.test(this.value[t]))return!1;return!0},validate:function(){var e=this.checkValidity();return e&&(this.required&&""===this.value?e=!1:this.hasValidator()&&(e=Polymer.IronValidatableBehavior.validate.call(this,this.value))),this.invalid=!e,this.fire("iron-input-validate"),e},_announceInvalidCharacter:function(e){this.fire("iron-announce",{text:e})}}),Polymer.PaperInputHelper={},Polymer.PaperInputHelper.NextLabelID=1,Polymer.PaperInputHelper.NextAddonID=1,Polymer.PaperInputHelper.NextInputID=1,Polymer.PaperInputBehaviorImpl={properties:{label:{type:String},value:{notify:!0,type:String},disabled:{type:Boolean,value:!1},invalid:{type:Boolean,value:!1,notify:!0},preventInvalidInput:{type:Boolean},allowedPattern:{type:String},type:{type:String},list:{type:String},pattern:{type:String},required:{type:Boolean,value:!1},errorMessage:{type:String},charCounter:{type:Boolean,value:!1},noLabelFloat:{type:Boolean,value:!1},alwaysFloatLabel:{type:Boolean,value:!1},autoValidate:{type:Boolean,value:!1},validator:{type:String},autocomplete:{type:String,value:"off"},autofocus:{type:Boolean,observer:"_autofocusChanged"},inputmode:{type:String},minlength:{type:Number},maxlength:{type:Number},min:{type:String},max:{type:String},step:{type:String},name:{type:String},placeholder:{type:String,value:""},readonly:{type:Boolean,value:!1},size:{type:Number},autocapitalize:{type:String,value:"none"},autocorrect:{type:String,value:"off"},autosave:{type:String},results:{type:Number},accept:{type:String},multiple:{type:Boolean},_ariaDescribedBy:{type:String,value:""},_ariaLabelledBy:{type:String,value:""},_inputId:{type:String,value:""}},listeners:{"addon-attached":"_onAddonAttached"},keyBindings:{"shift+tab:keydown":"_onShiftTabDown"},hostAttributes:{tabindex:0},get inputElement(){return this.$||(this.$={}),this.$.input||(this._generateInputId(),this.$.input=this.$$("#"+this._inputId)),this.$.input},get _focusableElement(){return this.inputElement},registered:function(){this._typesThatHaveText=["date","datetime","datetime-local","month","time","week","file"]},attached:function(){this._updateAriaLabelledBy(),this.inputElement&&-1!==this._typesThatHaveText.indexOf(this.inputElement.type)&&(this.alwaysFloatLabel=!0)},_appendStringWithSpace:function(e,t){return e=e?e+" "+t:t},_onAddonAttached:function(e){var t,e=e.path?e.path[0]:e.target;e.id?this._ariaDescribedBy=this._appendStringWithSpace(this._ariaDescribedBy,e.id):(t="paper-input-add-on-"+Polymer.PaperInputHelper.NextAddonID++,e.id=t,this._ariaDescribedBy=this._appendStringWithSpace(this._ariaDescribedBy,t))},validate:function(){return this.inputElement.validate()},_focusBlurHandler:function(e){Polymer.IronControlState._focusBlurHandler.call(this,e),this.focused&&!this._shiftTabPressed&&this._focusableElement&&this._focusableElement.focus()},_onShiftTabDown:function(e){var t=this.getAttribute("tabindex");this._shiftTabPressed=!0,this.setAttribute("tabindex","-1"),this.async(function(){this.setAttribute("tabindex",t),this._shiftTabPressed=!1},1)},_handleAutoValidate:function(){this.autoValidate&&this.validate()},updateValueAndPreserveCaret:function(t){try{var e=this.inputElement.selectionStart;this.value=t,this.inputElement.selectionStart=e,this.inputElement.selectionEnd=e}catch(e){this.value=t}},_computeAlwaysFloatLabel:function(e,t){return t||e},_updateAriaLabelledBy:function(){var e,t=Polymer.dom(this.root).querySelector("label");t?(t.id?e=t.id:(e="paper-input-label-"+Polymer.PaperInputHelper.NextLabelID++,t.id=e),this._ariaLabelledBy=e):this._ariaLabelledBy=""},_generateInputId:function(){this._inputId&&""!==this._inputId||(this._inputId="input-"+Polymer.PaperInputHelper.NextInputID++)},_onChange:function(e){this.shadowRoot&&this.fire(e.type,{sourceEvent:e},{node:this,bubbles:e.bubbles,cancelable:e.cancelable})},_autofocusChanged:function(){var e;this.autofocus&&this._focusableElement&&((e=document.activeElement)instanceof HTMLElement&&e!==document.body&&e!==document.documentElement||this._focusableElement.focus())}},Polymer.PaperInputBehavior=[Polymer.IronControlState,Polymer.IronA11yKeysBehavior,Polymer.PaperInputBehaviorImpl],Polymer.PaperInputAddonBehavior={hostAttributes:{"add-on":""},attached:function(){this.fire("addon-attached")},update:function(e){}},Polymer({is:"paper-input-char-counter",behaviors:[Polymer.PaperInputAddonBehavior],properties:{_charCounterStr:{type:String,value:"0"}},update:function(e){var t;e.inputElement&&(e.value=e.value||"",t=e.value.toString().length.toString(),e.inputElement.hasAttribute("maxlength")&&(t+="/"+e.inputElement.getAttribute("maxlength")),this._charCounterStr=t)}}),Polymer({is:"paper-input-container",properties:{noLabelFloat:{type:Boolean,value:!1},alwaysFloatLabel:{type:Boolean,value:!1},attrForValue:{type:String,value:"bind-value"},autoValidate:{type:Boolean,value:!1},invalid:{observer:"_invalidChanged",type:Boolean,value:!1},focused:{readOnly:!0,type:Boolean,value:!1,notify:!0},_addons:{type:Array},_inputHasContent:{type:Boolean,value:!1},_inputSelector:{type:String,value:"input,textarea,.paper-input-input"},_boundOnFocus:{type:Function,value:function(){return this._onFocus.bind(this)}},_boundOnBlur:{type:Function,value:function(){return this._onBlur.bind(this)}},_boundOnInput:{type:Function,value:function(){return this._onInput.bind(this)}},_boundValueChanged:{type:Function,value:function(){return this._onValueChanged.bind(this)}}},listeners:{"addon-attached":"_onAddonAttached","iron-input-validate":"_onIronInputValidate"},get _valueChangedEvent(){return this.attrForValue+"-changed"},get _propertyForValue(){return Polymer.CaseMap.dashToCamelCase(this.attrForValue)},get _inputElement(){return Polymer.dom(this).querySelector(this._inputSelector)},get _inputElementValue(){return this._inputElement[this._propertyForValue]||this._inputElement.value},ready:function(){this._addons||(this._addons=[]),this.addEventListener("focus",this._boundOnFocus,!0),this.addEventListener("blur",this._boundOnBlur,!0)},attached:function(){this.attrForValue?this._inputElement.addEventListener(this._valueChangedEvent,this._boundValueChanged):this.addEventListener("input",this._onInput),""!=this._inputElementValue?this._handleValueAndAutoValidate(this._inputElement):this._handleValue(this._inputElement)},_onAddonAttached:function(e){this._addons||(this._addons=[]);e=e.target;-1===this._addons.indexOf(e)&&(this._addons.push(e),this.isAttached)&&this._handleValue(this._inputElement)},_onFocus:function(){this._setFocused(!0)},_onBlur:function(){this._setFocused(!1),this._handleValueAndAutoValidate(this._inputElement)},_onInput:function(e){this._handleValueAndAutoValidate(e.target)},_onValueChanged:function(e){this._handleValueAndAutoValidate(e.target)},_handleValue:function(e){var t=this._inputElementValue;t||0===t||"number"===e.type&&!e.checkValidity()?this._inputHasContent=!0:this._inputHasContent=!1,this.updateAddons({inputElement:e,value:t,invalid:this.invalid})},_handleValueAndAutoValidate:function(e){var t;this.autoValidate&&(t=e.validate?e.validate(this._inputElementValue):e.checkValidity(),this.invalid=!t),this._handleValue(e)},_onIronInputValidate:function(e){this.invalid=this._inputElement.invalid},_invalidChanged:function(){this._addons&&this.updateAddons({invalid:this.invalid})},updateAddons:function(e){for(var t,n=0;t=this._addons[n];n++)t.update(e)},_computeInputContentClass:function(e,t,n,i,r){var o="input-content";return e?(r&&(o+=" label-is-hidden"),i&&(o+=" is-invalid")):(e=this.querySelector("label"),t||r?(o+=" label-is-floating",this.$.labelAndInputContainer.style.position="static",i?o+=" is-invalid":n&&(o+=" label-is-highlighted")):(e&&(this.$.labelAndInputContainer.style.position="relative"),i&&(o+=" is-invalid"))),n&&(o+=" focused"),o},_computeUnderlineClass:function(e,t){var n="underline";return t?n+=" is-invalid":e&&(n+=" is-highlighted"),n},_computeAddOnContentClass:function(e,t){var n="add-on-content";return t?n+=" is-invalid":e&&(n+=" is-highlighted"),n}}),Polymer({is:"paper-input-error",behaviors:[Polymer.PaperInputAddonBehavior],properties:{invalid:{readOnly:!0,reflectToAttribute:!0,type:Boolean}},update:function(e){this._setInvalid(e.invalid)}}),Polymer({is:"paper-input",behaviors:[Polymer.IronFormElementBehavior,Polymer.PaperInputBehavior]}),Polymer({is:"iron-autogrow-textarea",behaviors:[Polymer.IronFormElementBehavior,Polymer.IronValidatableBehavior,Polymer.IronControlState],properties:{bindValue:{observer:"_bindValueChanged",type:String},rows:{type:Number,value:1,observer:"_updateCached"},maxRows:{type:Number,value:0,observer:"_updateCached"},autocomplete:{type:String,value:"off"},autofocus:{type:Boolean,value:!1},inputmode:{type:String},placeholder:{type:String},readonly:{type:String},required:{type:Boolean},minlength:{type:Number},maxlength:{type:Number}},listeners:{input:"_onInput"},observers:["_onValueChanged(value)"],get textarea(){return this.$.textarea},get selectionStart(){return this.$.textarea.selectionStart},get selectionEnd(){return this.$.textarea.selectionEnd},set selectionStart(e){this.$.textarea.selectionStart=e},set selectionEnd(e){this.$.textarea.selectionEnd=e},attached:function(){navigator.userAgent.match(/iP(?:[oa]d|hone)/)&&!navigator.userAgent.match(/OS 1[3456789]/)&&(this.$.textarea.style.marginLeft="-3px")},validate:function(){var e;return this.required||""!=this.value?(this.hasValidator()?e=Polymer.IronValidatableBehavior.validate.call(this,this.value):(e=this.$.textarea.validity.valid,this.invalid=!e),this.fire("iron-input-validate"),e):!(this.invalid=!1)},_bindValueChanged:function(){var e=this.textarea;e&&(e.value!==this.bindValue&&(e.value=this.bindValue||0===this.bindValue?this.bindValue:""),this.value=this.bindValue,this.$.mirror.innerHTML=this._valueForMirror(),this.fire("bind-value-changed",{value:this.bindValue}))},_onInput:function(e){this.bindValue=(e.path?e.path[0]:e.target).value},_constrain:function(e){var t;for(e=e||[""],t=0<this.maxRows&&e.length>this.maxRows?e.slice(0,this.maxRows):e.slice(0);0<this.rows&&t.length<this.rows;)t.push("");return t.join("<br/>")+"&#160;"},_valueForMirror:function(){var e=this.textarea;if(e)return this.tokens=e&&e.value?e.value.replace(/&/gm,"&amp;").replace(/"/gm,"&quot;").replace(/'/gm,"&#39;").replace(/</gm,"&lt;").replace(/>/gm,"&gt;").split("\n"):[""],this._constrain(this.tokens)},_updateCached:function(){this.$.mirror.innerHTML=this._constrain(this.tokens)},_onValueChanged:function(){this.bindValue=this.value}}),Polymer({is:"paper-textarea",behaviors:[Polymer.PaperInputBehavior,Polymer.IronFormElementBehavior],properties:{_ariaLabelledBy:{observer:"_ariaLabelledByChanged",type:String},_ariaDescribedBy:{observer:"_ariaDescribedByChanged",type:String},rows:{type:Number,value:1},maxRows:{type:Number,value:0}},_ariaLabelledByChanged:function(e){this._focusableElement.setAttribute("aria-labelledby",e)},_ariaDescribedByChanged:function(e){this._focusableElement.setAttribute("aria-describedby",e)},get _focusableElement(){return this.inputElement.textarea}}),Report.prototype={traceEventInstant:function(e,t){this.output_.push({ts:Date.now(),name:e,args:t})},traceEventWithId:function(e,t,n){this.output_.push({ts:Date.now(),name:e,id:t,args:n})},traceEventAsync:function(e){return this.traceEventWithId.bind(this,e,this.nextAsyncId_++)},logTestRunResult:function(e,t){ga("send",{hitType:"event",eventCategory:"Test",eventAction:t,eventLabel:e,nonInteraction:1})},generate:function(e){return this.getContent_({title:"WebRTC Troubleshooter bug report",description:e||null})},getContent_:function(e){var t=[];return this.appendEventsAsString_([e],t),this.appendEventsAsString_(this.output_,t),"["+t.join(",\n")+"]"},appendEventsAsString_:function(e,t){for(var n=0;n!==e.length;++n)t.push(JSON.stringify(e[n]))},onWindowError_:function(e){this.traceEventInstant("error",{message:e.message,filename:e.filename+":"+e.lineno})},logHook_:function(){this.traceEventInstant("log",arguments),this.nativeLog_.apply(null,arguments)}},Report.getSystemInfo=function(){var e,t,n=navigator.userAgent,i=navigator.appName,r=""+parseFloat(navigator.appVersion);return-1!==(e=n.indexOf("Chrome"))?(i="Chrome",r=n.substring(e+7)):-1!==(e=n.indexOf("MSIE"))?(i="Microsoft Internet Explorer",r=n.substring(e+5)):-1!==(e=n.indexOf("Trident"))?(i="Microsoft Internet Explorer",r=n.substring(e+8)):-1!==(e=n.indexOf("Firefox"))?i="Firefox":-1!==(e=n.indexOf("Safari"))?(i="Safari",r=n.substring(e+7),-1!==(e=n.indexOf("Version"))&&(r=n.substring(e+8))):(t=n.lastIndexOf(" ")+1)<(e=n.lastIndexOf("/"))&&(i=n.substring(t,e),r=n.substring(e+1),i.toLowerCase()===i.toUpperCase())&&(i=navigator.appName),{browserName:i,browserVersion:r=-1!==(t=(r=-1!==(t=r.indexOf(";"))?r.substring(0,t):r).indexOf(" "))?r.substring(0,t):r,platform:navigator.platform}};var report=new Report;function parseUrlParameters(){var e={};if(""!==window.location.search)for(var t=window.location.search.replace(/\//g,"").substr(1).split("&"),n=0;n!==t.length;++n){var i=t[n].split("=");e[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return e}Polymer({is:"report-dialog",open:function(){window.a=this.$.mainDialog,this.$.mainDialog.open()},download:function(){var e=report.generate(this.description),e=encodeURIComponent(e),t=document.createElement("a");t.setAttribute("href","data:text/plain;charset=utf-8,"+e),t.setAttribute("download","testrtc-"+(new Date).toJSON()+".log"),t.click()}}),Polymer({is:"testrtc-main",properties:{settings:{type:Object,value:function(){return parseUrlParameters()}}},_updateLink:function(){var e,t=window.location,n=[];for(e in this.settings)""!==this.settings[e]&&n.push(encodeURIComponent(e)+"="+encodeURIComponent(this.settings[e]));var i=0!=n.length?"?"+n.join("&"):"";this._link=t.protocol+"//"+t.host+t.pathname+i},observers:["_pendingChanged(pending)","_updateLink(settings.*)"],listeners:{"bug-report":"openBugReport"},_pendingChanged:function(e){this.traceEnumDevice=report.traceEventAsync("enumerateDevices"),adapter.disableLog(!0),!1===e&&(navigator.mediaDevices.enumerateDevices().then(this.gotSources.bind(this)).catch(function(e){console.log("JS Device selection not supported",e)}),window.doGetUserMedia=this.doGetUserMedia.bind(this),this.$.startButton.removeAttribute("disabled"))},gotSources:function(e){for(var t=0;t!==e.length;++t){var n=e[t],i=document.createElement("option");i.value=n.deviceId,this.appendOption(n,i)}},appendOption:function(e,t){"audioinput"===e.kind?(t.text=e.label||"microphone "+(this.$.audioSource.length+1),this.$.audioSource.appendChild(t)):"videoinput"===e.kind?(t.text=e.label||"camera "+(this.$.videoSource.length+1),this.$.videoSource.appendChild(t)):this.traceEnumDevice("Some other kind of source: "+e.kind)},doGetUserMedia:function(e,i,t){var r=this,o=report.traceEventAsync("getusermedia");try{this.appendSourceId(this.$.audioSource.value,"audio",e),this.appendSourceId(this.$.videoSource.value,"video",e),o({status:"pending",constraints:e}),navigator.mediaDevices.getUserMedia(e).then(function(e){var t=r.getDeviceName_(e.getVideoTracks()),n=r.getDeviceName_(e.getAudioTracks());o({status:"success",camera:t,microphone:n}),i.apply(this,arguments)}).catch(function(e){o({status:"fail",error:e}),t?t.apply(this,arguments):reportFatal("Failed to get access to local media due to error: "+e)})}catch(e){return console.log(e),o({status:"exception",error:e.message}),reportFatal("getUserMedia failed with exception: "+e.message)}},appendSourceId:function(e,t,n){!1!==n[t]&&void 0!==n[t]&&(n[t].deviceId=e)},getDeviceName_:function(e){return 0===e.length?null:e[0].label},run:function(){var e=this;this.$.startButton.setAttribute("disabled",null),runAllSequentially(enumeratedTestSuites,function(){e.$.startButton.removeAttribute("disabled")})},openBugReport:function(){this.pending=!1,this.$.bugreport.open()},openSettingsDialog:function(){this.$.settings.open()}});var enumeratedTestSuites=[],enumeratedTestFilters=[];function addTest(e,t,n){if(!isTestDisabled(t)){for(var i=0;i!==enumeratedTestSuites.length;++i)if(enumeratedTestSuites[i].name===e)return void enumeratedTestSuites[i].addTest(t,n);var r=document.createElement("testrtc-suite");r.name=e,r.addTest(t,n),enumeratedTestSuites.push(r),document.getElementById("content").appendChild(r)}}function addExplicitTest(e,t,n){isTestExplicitlyEnabled(t)&&addTest(e,t,n)}function isTestDisabled(e){return 0!==enumeratedTestFilters.length&&!isTestExplicitlyEnabled(e)}function isTestExplicitlyEnabled(e){for(var t=0;t!==enumeratedTestFilters.length;++t)if(enumeratedTestFilters[t]===e)return!0;return!1}var parameters=parseUrlParameters(),filterParameterName="test_filter";function Call(e,t){this.test=t,this.traceEvent=report.traceEventAsync("call"),this.traceEvent({config:e}),this.statsGatheringRunning=!1,this.pc1=new RTCPeerConnection(e),this.pc2=new RTCPeerConnection(e),this.pc1.addEventListener("icecandidate",this.onIceCandidate_.bind(this,this.pc2)),this.pc2.addEventListener("icecandidate",this.onIceCandidate_.bind(this,this.pc1)),this.iceCandidateFilter_=Call.noFilter}function StatisticsAggregate(e){this.startTime_=0,this.sum_=0,this.count_=0,this.max_=0,this.rampUpThreshold_=e,this.rampUpTime_=1/0}function Ssim(){}function VideoFrameChecker(e){this.frameStats={numFrozenFrames:0,numBlackFrames:0,numFrames:0},this.running_=!0,this.nonBlackPixelLumaThreshold=20,this.previousFrame_=[],this.identicalFrameSsimThreshold=.985,this.frameComparator=new Ssim,this.canvas_=document.createElement("canvas"),this.videoElement_=e,this.listener_=this.checkVideoFrame_.bind(this),this.videoElement_.addEventListener("play",this.listener_,!1)}function arrayAverage(e){for(var t=e.length,n=0,i=0;i<t;i++)n+=e[i];return Math.floor(n/t)}function arrayMax(e){return 0===e.length?NaN:Math.max.apply(Math,e)}function arrayMin(e){return 0===e.length?NaN:Math.min.apply(Math,e)}function enumerateStats(e,n,i){var r={audio:{local:{audioLevel:0,bytesSent:0,clockRate:0,codecId:"",mimeType:"",packetsSent:0,payloadType:0,timestamp:0,trackId:"",transportId:""},remote:{audioLevel:0,bytesReceived:0,clockRate:0,codecId:"",fractionLost:0,jitter:0,mimeType:"",packetsLost:-1,packetsReceived:0,payloadType:0,timestamp:0,trackId:"",transportId:""}},video:{local:{bytesSent:0,clockRate:0,codecId:"",firCount:0,framesEncoded:0,frameHeight:0,framesSent:-1,frameWidth:0,nackCount:0,packetsSent:-1,payloadType:0,pliCount:0,qpSum:0,timestamp:0,trackId:"",transportId:""},remote:{bytesReceived:-1,clockRate:0,codecId:"",firCount:-1,fractionLost:0,frameHeight:0,framesDecoded:0,framesDropped:0,framesReceived:0,frameWidth:0,nackCount:-1,packetsLost:-1,packetsReceived:0,payloadType:0,pliCount:-1,qpSum:0,timestamp:0,trackId:"",transportId:""}},connection:{availableOutgoingBitrate:0,bytesReceived:0,bytesSent:0,consentRequestsSent:0,currentRoundTripTime:0,localCandidateId:"",localCandidateType:"",localIp:"",localPort:0,localPriority:0,localProtocol:"",remoteCandidateId:"",remoteCandidateType:"",remoteIp:"",remotePort:0,remotePriority:0,remoteProtocol:"",requestsReceived:0,requestsSent:0,responsesReceived:0,responsesSent:0,timestamp:0,totalRoundTripTime:0}};return e&&(e.forEach(function(e,t){switch(e.type){case"outbound-rtp":e.hasOwnProperty("trackId")&&(1!==e.trackId.indexOf(n.audio)&""!==n.audio?(r.audio.local.bytesSent=e.bytesSent,r.audio.local.codecId=e.codecId,r.audio.local.packetsSent=e.packetsSent,r.audio.local.timestamp=e.timestamp,r.audio.local.trackId=e.trackId,r.audio.local.transportId=e.transportId):1!==e.trackId.indexOf(n.video)&""!==n.video&&(r.video.local.bytesSent=e.bytesSent,r.video.local.codecId=e.codecId,r.video.local.firCount=e.firCount,r.video.local.framesEncoded=e.framesEncoded,r.video.local.framesSent=e.framesSent,r.video.local.packetsSent=e.packetsSent,r.video.local.pliCount=e.pliCount,r.video.local.qpSum=e.qpSum,r.video.local.timestamp=e.timestamp,r.video.local.trackId=e.trackId,r.video.local.transportId=e.transportId));break;case"inbound-rtp":e.hasOwnProperty("trackId")&&(1!==e.trackId.indexOf(i.audio)&""!==i.audio&&(r.audio.remote.bytesReceived=e.bytesReceived,r.audio.remote.codecId=e.codecId,r.audio.remote.fractionLost=e.fractionLost,r.audio.remote.jitter=e.jitter,r.audio.remote.packetsLost=e.packetsLost,r.audio.remote.packetsReceived=e.packetsReceived,r.audio.remote.timestamp=e.timestamp,r.audio.remote.trackId=e.trackId,r.audio.remote.transportId=e.transportId),1!==e.trackId.indexOf(i.video)&""!==i.video)&&(r.video.remote.bytesReceived=e.bytesReceived,r.video.remote.codecId=e.codecId,r.video.remote.firCount=e.firCount,r.video.remote.fractionLost=e.fractionLost,r.video.remote.nackCount=e.nackCount,r.video.remote.packetsLost=e.packetsLost,r.video.remote.packetsReceived=e.packetsReceived,r.video.remote.pliCount=e.pliCount,r.video.remote.qpSum=e.qpSum,r.video.remote.timestamp=e.timestamp,r.video.remote.trackId=e.trackId,r.video.remote.transportId=e.transportId);break;case"candidate-pair":e.hasOwnProperty("availableOutgoingBitrate")&&(r.connection.availableOutgoingBitrate=e.availableOutgoingBitrate,r.connection.bytesReceived=e.bytesReceived,r.connection.bytesSent=e.bytesSent,r.connection.consentRequestsSent=e.consentRequestsSent,r.connection.currentRoundTripTime=e.currentRoundTripTime,r.connection.localCandidateId=e.localCandidateId,r.connection.remoteCandidateId=e.remoteCandidateId,r.connection.requestsReceived=e.requestsReceived,r.connection.requestsSent=e.requestsSent,r.connection.responsesReceived=e.responsesReceived,r.connection.responsesSent=e.responsesSent,r.connection.timestamp=e.timestamp,r.connection.totalRoundTripTime=e.totalRoundTripTime);break;default:return}}.bind()),e.forEach(function(e){switch(e.type){case"track":e.hasOwnProperty("trackIdentifier")&&(1!==e.trackIdentifier.indexOf(n.video)&""!==n.video&&(r.video.local.frameHeight=e.frameHeight,r.video.local.framesSent=e.framesSent,r.video.local.frameWidth=e.frameWidth),1!==e.trackIdentifier.indexOf(i.video)&""!==i.video&&(r.video.remote.frameHeight=e.frameHeight,r.video.remote.framesDecoded=e.framesDecoded,r.video.remote.framesDropped=e.framesDropped,r.video.remote.framesReceived=e.framesReceived,r.video.remote.frameWidth=e.frameWidth),1!==e.trackIdentifier.indexOf(n.audio)&""!==n.audio&&(r.audio.local.audioLevel=e.audioLevel),1!==e.trackIdentifier.indexOf(i.audio)&""!==i.audio)&&(r.audio.remote.audioLevel=e.audioLevel);break;case"codec":e.hasOwnProperty("id")&&(1!==e.id.indexOf(r.audio.local.codecId)&""!==n.audio&&(r.audio.local.clockRate=e.clockRate,r.audio.local.mimeType=e.mimeType,r.audio.local.payloadType=e.payloadType),1!==e.id.indexOf(r.audio.remote.codecId)&""!==i.audio&&(r.audio.remote.clockRate=e.clockRate,r.audio.remote.mimeType=e.mimeType,r.audio.remote.payloadType=e.payloadType),1!==e.id.indexOf(r.video.local.codecId)&""!==n.video&&(r.video.local.clockRate=e.clockRate,r.video.local.mimeType=e.mimeType,r.video.local.payloadType=e.payloadType),1!==e.id.indexOf(r.video.remote.codecId)&""!==i.video)&&(r.video.remote.clockRate=e.clockRate,r.video.remote.mimeType=e.mimeType,r.video.remote.payloadType=e.payloadType);break;case"local-candidate":e.hasOwnProperty("id")&&-1!==e.id.indexOf(r.connection.localCandidateId)&&(r.connection.localIp=e.ip,r.connection.localPort=e.port,r.connection.localPriority=e.priority,r.connection.localProtocol=e.protocol,r.connection.localType=e.candidateType);break;case"remote-candidate":e.hasOwnProperty("id")&&-1!==e.id.indexOf(r.connection.remoteCandidateId)&&(r.connection.remoteIp=e.ip,r.connection.remotePort=e.port,r.connection.remotePriority=e.priority,r.connection.remoteProtocol=e.protocol,r.connection.remoteType=e.candidateType);break;default:return}}.bind())),r}function TestCaseNames(){return this.testCases={AUDIOCAPTURE:"Audio capture",CHECKRESOLUTION240:"Check resolution 320x240",CHECKRESOLUTION480:"Check resolution 640x480",CHECKRESOLUTION720:"Check resolution 1280x720",CHECKSUPPORTEDRESOLUTIONS:"Check supported resolutions",DATATHROUGHPUT:"Data throughput",IPV6ENABLED:"Ipv6 enabled",NETWORKLATENCY:"Network latency",NETWORKLATENCYRELAY:"Network latency - Relay",UDPENABLED:"Udp enabled",TCPENABLED:"Tcp enabled",VIDEOBANDWIDTH:"Video bandwidth",RELAYCONNECTIVITY:"Relay connectivity",REFLEXIVECONNECTIVITY:"Reflexive connectivity",HOSTCONNECTIVITY:"Host connectivity"},this.testCases}filterParameterName in parameters&&(enumeratedTestFilters=parameters[filterParameterName].split(",")),Call.prototype={establishConnection:function(){this.traceEvent({state:"start"}),this.pc1.createOffer().then(this.gotOffer_.bind(this),this.test.reportFatal.bind(this.test))},close:function(){this.traceEvent({state:"end"}),this.pc1.close(),this.pc2.close()},setIceCandidateFilter:function(e){this.iceCandidateFilter_=e},constrainVideoBitrate:function(e){this.constrainVideoBitrateKbps_=e},disableVideoFec:function(){this.constrainOfferToRemoveVideoFec_=!0},gatherStats:function(e,t,n,i){var r=[],o=[],s=[],a=[],c=this,l=100;function d(){"closed"===e.signalingState?(c.statsGatheringRunning=!1,i(r,s,o,a)):(e.getStats().then(u).catch(function(e){c.test.reportError("Could not gather stats: "+e),c.statsGatheringRunning=!1,i(r,s)}.bind(c)),t&&t.getStats().then(h))}function h(e){if("chrome"===adapter.browserDetails.browser){var t=enumerateStats(e,c.localTrackIds,c.remoteTrackIds);o.push(t),a.push(Date.now())}else if("firefox"===adapter.browserDetails.browser)for(var n in e){n=e[n];o.push(n),a.push(Date.now())}else c.test.reportError("Only Firefox and Chrome getStats implementations are supported.")}function u(e){if("chrome"===adapter.browserDetails.browser){var t=enumerateStats(e,c.localTrackIds,c.remoteTrackIds);r.push(t),s.push(Date.now())}else if("firefox"===adapter.browserDetails.browser)for(var n in e){n=e[n];r.push(n),s.push(Date.now())}else c.test.reportError("Only Firefox and Chrome getStats implementations are supported.");setTimeout(d,l)}c.localTrackIds={audio:"",video:""},c.remoteTrackIds={audio:"",video:""},e.getSenders().forEach(function(e){"audio"===e.track.kind?c.localTrackIds.audio=e.track.id:"video"===e.track.kind&&(c.localTrackIds.video=e.track.id)}.bind(c)),t&&t.getReceivers().forEach(function(e){"audio"===e.track.kind?c.remoteTrackIds.audio=e.track.id:"video"===e.track.kind&&(c.remoteTrackIds.video=e.track.id)}.bind(c)),this.statsGatheringRunning=!0,d()},gotOffer_:function(e){this.constrainOfferToRemoveVideoFec_&&(e.sdp=e.sdp.replace(/(m=video 1 [^\r]+)(116 117)(\r\n)/g,"$1\r\n"),e.sdp=e.sdp.replace(/a=rtpmap:116 red\/90000\r\n/g,""),e.sdp=e.sdp.replace(/a=rtpmap:117 ulpfec\/90000\r\n/g,""),e.sdp=e.sdp.replace(/a=rtpmap:98 rtx\/90000\r\n/g,""),e.sdp=e.sdp.replace(/a=fmtp:98 apt=116\r\n/g,"")),this.pc1.setLocalDescription(e),this.pc2.setRemoteDescription(e),this.pc2.createAnswer().then(this.gotAnswer_.bind(this),this.test.reportFatal.bind(this.test))},gotAnswer_:function(e){this.constrainVideoBitrateKbps_&&(e.sdp=e.sdp.replace(/a=mid:video\r\n/g,"a=mid:video\r\nb=AS:"+this.constrainVideoBitrateKbps_+"\r\n")),this.pc2.setLocalDescription(e),this.pc1.setRemoteDescription(e)},onIceCandidate_:function(e,t){var n;t.candidate&&(n=Call.parseCandidate(t.candidate.candidate),this.iceCandidateFilter_(n))&&e.addIceCandidate(t.candidate)}},Call.noFilter=function(){return!0},Call.isRelay=function(e){return"relay"===e.type},Call.isNotHostCandidate=function(e){return"host"!==e.type},Call.isReflexive=function(e){return"srflx"===e.type},Call.isHost=function(e){return"host"===e.type},Call.isIpv6=function(e){return-1!==e.address.indexOf(":")},Call.parseCandidate=function(e){var t="candidate:",t=e.indexOf(t)+t.length,e=e.substr(t).split(" ");return{type:e[7],protocol:e[2],address:e[4]}},Call.cachedIceServers_=null,Call.cachedIceConfigFetchTime_=null,Call.asyncCreateTurnConfig=function(t,e){var n=currentTest.settings;"string"==typeof n.turnURI&&""!==n.turnURI?(n={iceServers:[{username:n.turnUsername||"",credential:n.turnCredential||"",urls:n.turnURI.split(",")}]},report.traceEventInstant("turn-config",n),setTimeout(t.bind(null,n),0)):Call.fetchTurnConfig_(function(e){e={iceServers:e.iceServers};report.traceEventInstant("turn-config",e),t(e)},e)},Call.asyncCreateStunConfig=function(t,e){var n=currentTest.settings;"string"==typeof n.stunURI&&""!==n.stunURI?(n={iceServers:[{urls:n.stunURI.split(",")}]},report.traceEventInstant("stun-config",n),setTimeout(t.bind(null,n),0)):Call.fetchTurnConfig_(function(e){e={iceServers:e.iceServers.urls};report.traceEventInstant("stun-config",e),t(e)},e)},Call.fetchTurnConfig_=function(t,n){if(Call.cachedIceServers_&&!((Date.now()-Call.cachedIceConfigFetchTime_)/1e3>parseInt(Call.cachedIceServers_.lifetimeDuration)-240))return report.traceEventInstant("fetch-ice-config","Using cached credentials."),void t(Call.getCachedIceCredentials_());var i=new XMLHttpRequest;i.onreadystatechange=function(){var e;4===i.readyState&&(200!==i.status?n("TURN request failed"):(e=JSON.parse(i.responseText),Call.cachedIceServers_=e,Call.getCachedIceCredentials_=function(){return JSON.parse(JSON.stringify(Call.cachedIceServers_))},Call.cachedIceConfigFetchTime_=Date.now(),report.traceEventInstant("fetch-ice-config","Fetching new credentials."),t(Call.getCachedIceCredentials_())))},i.open("POST","https://networktraversal.googleapis.com/v1alpha/iceconfig?key="+void 0,!0),i.send()},StatisticsAggregate.prototype={add:function(e,t){0===this.startTime_&&(this.startTime_=e),this.sum_+=t,this.max_=Math.max(this.max_,t),this.rampUpTime_===1/0&&t>this.rampUpThreshold_&&(this.rampUpTime_=e),this.count_++},getAverage:function(){return 0===this.count_?0:Math.round(this.sum_/this.count_)},getMax:function(){return this.max_},getRampUpTime:function(){return Math.round(this.rampUpTime_-this.startTime_)}},Ssim.prototype={statistics:function(e){for(var t=0,n=0;n<e.length;++n)t+=e[n];var i,r=t/(e.length-1);for(n=1;n<e.length;++n)i=e[n-1]-r,t+=e[n]+i*i;return{mean:r,variance:t/e.length}},covariance:function(e,t,n,i){for(var r=0,o=0;o<e.length;o+=1)r+=(e[o]-n)*(t[o]-i);return r/e.length},calculate:function(e,t){var n,i,r,o,s,a,c,l;return e.length!==t.length?0:(l=6.502500000000001,i=(n=.03*255*(.03*255))/2,r=(o=this.statistics(e)).mean,o=o.variance,s=Math.sqrt(o),a=(c=this.statistics(t)).mean,c=c.variance,(2*r*a+l)/(r*r+a*a+l)*((2*s*(l=Math.sqrt(c))+n)/(o+c+n))*((this.covariance(e,t,r,a)+i)/(s*l+i)))}},"object"==typeof exports&&(module.exports=Ssim),VideoFrameChecker.prototype={stop:function(){this.videoElement_.removeEventListener("play",this.listener_),this.running_=!1},getCurrentImageData_:function(){this.canvas_.width=this.videoElement_.width,this.canvas_.height=this.videoElement_.height;var e=this.canvas_.getContext("2d");return e.drawImage(this.videoElement_,0,0,this.canvas_.width,this.canvas_.height),e.getImageData(0,0,this.canvas_.width,this.canvas_.height)},checkVideoFrame_:function(){var e;this.running_&&!this.videoElement_.ended&&(e=this.getCurrentImageData_(),this.isBlackFrame_(e.data,e.data.length)&&this.frameStats.numBlackFrames++,this.frameComparator.calculate(this.previousFrame_,e.data)>this.identicalFrameSsimThreshold&&this.frameStats.numFrozenFrames++,this.previousFrame_=e.data,this.frameStats.numFrames++,setTimeout(this.checkVideoFrame_.bind(this),20))},isBlackFrame_:function(e,t){for(var n=this.nonBlackPixelLumaThreshold,i=0,r=4;r<t;r+=4)if(n*r/4<(i+=.21*e[r]+.72*e[r+1]+.07*e[r+2]))return!1;return!0}},"object"==typeof exports&&(module.exports=VideoFrameChecker);var testCaseName=new TestCaseNames;function TestSuiteNames(){return this.testSuites={CAMERA:"Camera",MICROPHONE:"Microphone",NETWORK:"Network",CONNECTIVITY:"Connectivity",THROUGHPUT:"Throughput"},this.testSuites}var testSuiteName=new TestSuiteNames;function MicTest(e){this.test=e,this.inputChannelCount=6,this.outputChannelCount=2,this.bufferSize=0,this.constraints={audio:{echoCancellation:!1}},this.collectSeconds=2,this.silentThreshold=1/32767,this.lowVolumeThreshold=-60,this.monoDetectThreshold=1/65536,this.clipCountThreshold=6,this.clipThreshold=1,this.collectedAudio=[];for(var t=this.collectedSampleCount=0;t<this.inputChannelCount;++t)this.collectedAudio[t]=[];e=window.AudioContext||window.webkitAudioContext;this.audioContext=new e}function CamResolutionsTest(e,t){this.test=e,this.resolutions=t,this.currentResolution=0,this.isMuted=!1,this.isShuttingDown=!1}addTest(testSuiteName.MICROPHONE,testCaseName.AUDIOCAPTURE,function(e){new MicTest(e).run()}),MicTest.prototype={run:function(){this.audioContext.resume().then(function(){doGetUserMedia(this.constraints,this.gotStream.bind(this))}.bind(this)).catch(function(e){this.test.reportError("WebAudio run failure: "+e),this.test.done()}.bind(this))},gotStream:function(e){this.checkAudioTracks(e)?this.createAudioBuffer(e):this.test.done()},checkAudioTracks:function(e){e=(this.stream=e).getAudioTracks();return e.length<1?(this.test.reportError("No audio track in returned stream."),!1):(this.test.reportSuccess("Audio track created using device="+e[0].label),!0)},createAudioBuffer:function(){this.audioSource=this.audioContext.createMediaStreamSource(this.stream),this.scriptNode=this.audioContext.createScriptProcessor(this.bufferSize,this.inputChannelCount,this.outputChannelCount),this.audioSource.connect(this.scriptNode),this.scriptNode.connect(this.audioContext.destination),this.scriptNode.onaudioprocess=this.collectAudio.bind(this),this.stopCollectingAudio=setTimeoutWithProgressBar(this.onStopCollectingAudio.bind(this),5e3)},collectAudio:function(e){for(var t=e.inputBuffer.length,n=!0,i=0;i<e.inputBuffer.numberOfChannels;i++){var r,o=e.inputBuffer.getChannelData(i),s=Math.abs(o[0]),a=Math.abs(o[t-1]);s>this.silentThreshold||a>this.silentThreshold?((r=new Float32Array(t)).set(o),n=!1):r=new Float32Array,this.collectedAudio[i].push(r)}n||(this.collectedSampleCount+=t,this.collectedSampleCount/e.inputBuffer.sampleRate>=this.collectSeconds&&this.stopCollectingAudio())},onStopCollectingAudio:function(){this.stream.getAudioTracks()[0].stop(),this.audioSource.disconnect(this.scriptNode),this.scriptNode.disconnect(this.audioContext.destination),this.analyzeAudio(this.collectedAudio),this.test.done()},analyzeAudio:function(e){for(var t=[],n=0;n<e.length;n++)this.channelStats(n,e[n])&&t.push(n);0===t.length?this.test.reportError("No active input channels detected. Microphone is most likely muted or broken, please check if muted in the sound settings or physically on the device. Then rerun the test."):this.test.reportSuccess("Active audio input channels: "+t.length),2===t.length&&this.detectMono(e[t[0]],e[t[1]])},channelStats:function(e,t){for(var n,i,r=0,o=0,s=0,a=0,c=0;c<t.length;c++){var l=t[c];if(0<l.length){for(var d,h=0,u=0;u<l.length;u++)h+=(d=Math.abs(l[u]))*d,(r=Math.max(r,d))>=this.clipThreshold?(s++,a=Math.max(a,s)):s=0;h=Math.sqrt(h/l.length),o=Math.max(o,h)}}return r>this.silentThreshold&&(n=this.dBFS(r),i=this.dBFS(o),this.test.reportInfo("Channel "+e+" levels: "+n.toFixed(1)+" dB (peak), "+i.toFixed(1)+" dB (RMS)"),i<this.lowVolumeThreshold&&this.test.reportError("Microphone input level is low, increase input volume or move closer to the microphone."),a>this.clipCountThreshold&&this.test.reportWarning("Clipping detected! Microphone input level is high. Decrease input volume or move away from the microphone."),!0)},detectMono:function(e,t){for(var n=0,i=0;i<e.length;i++){var r=e[i],o=t[i];if(r.length===o.length)for(var s=0;s<r.length;s++)Math.abs(r[s]-o[s])>this.monoDetectThreshold&&n++;else n++}0<n?this.test.reportInfo("Stereo microphone detected."):this.test.reportInfo("Mono microphone detected.")},dBFS:function(e){e=20*Math.log(e)/Math.log(10);return Math.round(10*e)/10}},addTest(testSuiteName.CAMERA,testCaseName.CHECKRESOLUTION240,function(e){new CamResolutionsTest(e,[[320,240]]).run()}),addTest(testSuiteName.CAMERA,testCaseName.CHECKRESOLUTION480,function(e){new CamResolutionsTest(e,[[640,480]]).run()}),addTest(testSuiteName.CAMERA,testCaseName.CHECKRESOLUTION720,function(e){new CamResolutionsTest(e,[[1280,720]]).run()}),addTest(testSuiteName.CAMERA,testCaseName.CHECKSUPPORTEDRESOLUTIONS,function(e){new CamResolutionsTest(e,[[160,120],[320,180],[320,240],[640,360],[640,480],[768,576],[1024,576],[1280,720],[1280,768],[1280,800],[1920,1080],[1920,1200],[3840,2160],[4096,2160]]).run()}),CamResolutionsTest.prototype={run:function(){this.startGetUserMedia(this.resolutions[this.currentResolution])},startGetUserMedia:function(t){var e={audio:!1,video:{width:{exact:t[0]},height:{exact:t[1]}}};doGetUserMedia(e,function(e){1<this.resolutions.length?(this.test.reportSuccess("Supported: "+t[0]+"x"+t[1]),e.getTracks().forEach(function(e){e.stop()}),this.maybeContinueGetUserMedia()):this.collectAndAnalyzeStats_(e,t)}.bind(this),function(e){1<this.resolutions.length?this.test.reportInfo(t[0]+"x"+t[1]+" not supported"):this.test.reportError("getUserMedia failed with error: "+e);this.maybeContinueGetUserMedia()}.bind(this))},maybeContinueGetUserMedia:function(){this.currentResolution===this.resolutions.length?this.test.done():this.startGetUserMedia(this.resolutions[this.currentResolution++])},onSuccess:function(e){1<this.resolutions.length?(this.test.reportSuccess("Supported: "+resolution[0]+"x"+resolution[1]),e.getTracks().forEach(function(e){e.stop()}),this.maybeContinueGetUserMedia()):this.collectAndAnalyzeStats_(e,resolution)},onFail:function(e){1<this.resolutions.length?this.test.reportInfo(resolution[0]+"x"+resolution[1]+" not supported"):this.test.reportError("getUserMedia failed with error: "+e.name),this.maybeContinueGetUserMedia()},collectAndAnalyzeStats_:function(e,t){var n,i,r=e.getVideoTracks();r.length<1?(this.test.reportError("No video track in returned stream."),this.maybeContinueGetUserMedia()):("function"==typeof(r=r[0]).addEventListener&&(r.addEventListener("ended",function(){this.isShuttingDown||this.test.reportError("Video track ended, camera stopped working")}.bind(this)),r.addEventListener("mute",function(){this.isShuttingDown||(this.test.reportWarning("Your camera reported itself as muted."),this.isMuted=!0)}.bind(this)),r.addEventListener("unmute",function(){this.isShuttingDown||(this.test.reportInfo("Your camera reported itself as unmuted."),this.isMuted=!1)}.bind(this))),(r=document.createElement("video")).setAttribute("autoplay",""),r.setAttribute("muted",""),r.width=t[0],r.height=t[1],r.srcObject=e,n=new VideoFrameChecker(r),(i=new Call(null,this.test)).pc1.addStream(e),i.establishConnection(),i.gatherStats(i.pc1,null,e,this.onCallEnded_.bind(this,t,r,e,n),100),setTimeoutWithProgressBar(this.endCall_.bind(this,i,e),8e3))},onCallEnded_:function(e,t,n,i,r,o){this.analyzeStats_(e,t,n,i,r,o),i.stop(),this.test.done()},analyzeStats_:function(e,t,n,i,r,o){var s,a=[],c=[],l=[],d={},i=i.frameStats;for(s in r)"ssrc"===r[s].type&&0<parseInt(r[s].googFrameRateInput)&&(a.push(parseInt(r[s].googAvgEncodeMs)),c.push(parseInt(r[s].googFrameRateInput)),l.push(parseInt(r[s].googFrameRateSent)));d.cameraName=n.getVideoTracks()[0].label||NaN,d.actualVideoWidth=t.videoWidth,d.actualVideoHeight=t.videoHeight,d.mandatoryWidth=e[0],d.mandatoryHeight=e[1],d.encodeSetupTimeMs=this.extractEncoderSetupTime_(r,o),d.avgEncodeTimeMs=arrayAverage(a),d.minEncodeTimeMs=arrayMin(a),d.maxEncodeTimeMs=arrayMax(a),d.avgInputFps=arrayAverage(c),d.minInputFps=arrayMin(c),d.maxInputFps=arrayMax(c),d.avgSentFps=arrayAverage(l),d.minSentFps=arrayMin(l),d.maxSentFps=arrayMax(l),d.isMuted=this.isMuted,d.testedFrames=i.numFrames,d.blackFrames=i.numBlackFrames,d.frozenFrames=i.numFrozenFrames,report.traceEventInstant("video-stats",d),this.testExpectations_(d)},endCall_:function(e,t){this.isShuttingDown=!0,t.getTracks().forEach(function(e){e.stop()}),e.close()},extractEncoderSetupTime_:function(e,t){for(var n=0;n!==e.length;n++)if("ssrc"===e[n].type&&0<parseInt(e[n].googFrameRateInput))return JSON.stringify(t[n]-t[0]);return NaN},resolutionMatchesIndependentOfRotationOrCrop_:function(e,t,n,i){var r=Math.min(n,i);return e===n&&t===i||e===i&&t===n||e===r&&i===r},testExpectations_:function(e){var t,n=[];for(t in e)e.hasOwnProperty(t)&&("number"==typeof e[t]&&isNaN(e[t])?n.push(t):this.test.reportInfo(t+": "+e[t]));0!==n.length&&this.test.reportInfo("Not available: "+n.join(", ")),isNaN(e.avgSentFps)?this.test.reportInfo("Cannot verify sent FPS."):e.avgSentFps<5?this.test.reportError("Low average sent FPS: "+e.avgSentFps):this.test.reportSuccess("Average FPS above threshold"),this.resolutionMatchesIndependentOfRotationOrCrop_(e.actualVideoWidth,e.actualVideoHeight,e.mandatoryWidth,e.mandatoryHeight)?this.test.reportSuccess("Captured video using expected resolution."):this.test.reportError("Incorrect captured resolution."),0===e.testedFrames?this.test.reportError("Could not analyze any video frame."):(e.blackFrames>e.testedFrames/3&&this.test.reportError("Camera delivering lots of black frames."),e.frozenFrames>e.testedFrames/3&&this.test.reportError("Camera delivering lots of frozen frames."))}},addTest(testSuiteName.NETWORK,testCaseName.UDPENABLED,function(e){new NetworkTest(e,"udp",null,Call.isRelay).run()}),addTest(testSuiteName.NETWORK,testCaseName.TCPENABLED,function(e){new NetworkTest(e,"tcp",null,Call.isRelay).run()}),addTest(testSuiteName.NETWORK,testCaseName.IPV6ENABLED,function(e){new NetworkTest(e,null,{optional:[{googIPv6:!0}]},Call.isIpv6).run()});var NetworkTest=function(e,t,n,i){this.test=e,this.protocol=t,this.params=n,this.iceCandidateFilter=i};function RunConnectivityTest(e,t){this.test=e,this.iceCandidateFilter=t,this.timeout=null,this.parsedCandidates=[],this.call=null}function DataChannelThroughputTest(e){this.test=e,this.testDurationSeconds=5,this.startTime=null,this.sentPayloadBytes=0,this.receivedPayloadBytes=0,this.stopSending=!1,this.samplePacket="";for(var t=0;1024!==t;++t)this.samplePacket+="h";this.maxNumberOfPacketsToSend=1,this.bytesToKeepBuffered=1024*this.maxNumberOfPacketsToSend,this.lastBitrateMeasureTime=null,this.lastReceivedPayloadBytes=0,this.call=null,this.senderChannel=null,this.receiveChannel=null}function VideoBandwidthTest(e){this.test=e,this.maxVideoBitrateKbps=2e3,this.durationMs=4e4,this.statStepMs=100,this.bweStats=new StatisticsAggregate(.75*this.maxVideoBitrateKbps*1e3),this.rttStats=new StatisticsAggregate,this.packetsLost=-1,this.nackCount=-1,this.pliCount=-1,this.qpSum=-1,this.packetsSent=-1,this.packetsReceived=-1,this.framesEncoded=-1,this.framesDecoded=-1,this.framesSent=-1,this.bytesSent=-1,this.videoStats=[],this.startTime=null,this.call=null,this.constraints={audio:!1,video:{minWidth:1280,minHeight:720}}}function WiFiPeriodicScanTest(e,t){this.test=e,this.candidateFilter=t,this.testDurationMs=3e5,this.sendIntervalMs=100,this.delays=[],this.recvTimeStamps=[],this.running=!1,this.call=null,this.senderChannel=null,this.receiveChannel=null}NetworkTest.prototype={run:function(){this.iceCandidateFilter.toString()===Call.isIpv6.toString()?this.gatherCandidates(null,this.params,this.iceCandidateFilter):Call.asyncCreateTurnConfig(this.start.bind(this),this.test.reportFatal.bind(this.test))},start:function(e){this.filterConfig(e,this.protocol),this.gatherCandidates(e,this.params,this.iceCandidateFilter)},filterConfig:function(e,t){for(var n="transport="+t,i=[],r=0;r<e.iceServers.length;++r){for(var o=e.iceServers[r],s=[],a=0;a<o.urls.length;++a){var c=o.urls[a];-1!==c.indexOf(n)?s.push(c):-1===c.indexOf("?transport=")&&c.startsWith("turn")&&s.push(c+"?"+n)}0!==s.length&&(o.urls=s,i.push(o))}e.iceServers=i},gatherCandidates:function(e,t,n){var i;try{i=new RTCPeerConnection(e,t)}catch(e){return null!==t&&t.optional[0].googIPv6?this.test.reportWarning("Failed to create peer connection, IPv6 might not be setup/supported on the network."):this.test.reportError("Failed to create peer connection: "+e),void this.test.done()}i.addEventListener("icecandidate",function(e){"closed"!==e.currentTarget.signalingState&&(e.candidate?(e=Call.parseCandidate(e.candidate.candidate),n(e)&&(this.test.reportSuccess("Gathered candidate of Type: "+e.type+" Protocol: "+e.protocol+" Address: "+e.address),i.close(),i=null,this.test.done())):(i.close(),(i=null)!==t&&t.optional[0].googIPv6?this.test.reportWarning("Failed to gather IPv6 candidates, it might not be setup/supported on the network."):this.test.reportError("Failed to gather specified candidates"),this.test.done()))}.bind(this)),this.createAudioOnlyReceiveOffer(i)},createAudioOnlyReceiveOffer:function(t){function n(){}t.createOffer({offerToReceiveAudio:1}).then(function(e){t.setLocalDescription(e).then(n,n)},n)}},addTest(testSuiteName.CONNECTIVITY,testCaseName.RELAYCONNECTIVITY,function(e){new RunConnectivityTest(e,Call.isRelay).run()}),addTest(testSuiteName.CONNECTIVITY,testCaseName.REFLEXIVECONNECTIVITY,function(e){new RunConnectivityTest(e,Call.isReflexive).run()}),addTest(testSuiteName.CONNECTIVITY,testCaseName.HOSTCONNECTIVITY,function(e){new RunConnectivityTest(e,Call.isHost).start()}),RunConnectivityTest.prototype={run:function(){Call.asyncCreateTurnConfig(this.start.bind(this),this.test.reportFatal.bind(this.test))},start:function(e){this.call=new Call(e,this.test),this.call.setIceCandidateFilter(this.iceCandidateFilter),this.call.pc1.addEventListener("icecandidate",function(e){e.candidate&&(e=Call.parseCandidate(e.candidate.candidate),this.parsedCandidates.push(e),this.iceCandidateFilter(e))&&this.test.reportInfo("Gathered candidate of Type: "+e.type+" Protocol: "+e.protocol+" Address: "+e.address)}.bind(this));var t=this.call.pc1.createDataChannel(null);t.addEventListener("open",function(){t.send("hello")}),t.addEventListener("message",function(e){"world"!==e.data?this.test.reportError("Invalid data transmitted."):this.test.reportSuccess("Data successfully transmitted between peers."),this.hangup()}.bind(this)),this.call.pc2.addEventListener("datachannel",function(e){var t=e.channel;t.addEventListener("message",function(e){"hello"!==e.data?this.hangup("Invalid data transmitted."):t.send("world")}.bind(this))}.bind(this)),this.call.establishConnection(),this.timeout=setTimeout(this.hangup.bind(this,"Timed out"),5e3)},findParsedCandidateOfSpecifiedType:function(e){for(var t in this.parsedCandidates)if(e(this.parsedCandidates[t]))return e(this.parsedCandidates[t])},hangup:function(e){e&&("Timed out"===e&&this.iceCandidateFilter.toString()===Call.isReflexive.toString()&&this.findParsedCandidateOfSpecifiedType(Call.isReflexive)?this.test.reportWarning("Could not connect using reflexive candidates, likely due to the network environment/configuration."):this.test.reportError(e)),clearTimeout(this.timeout),this.call.close(),this.test.done()}},addTest(testSuiteName.THROUGHPUT,testCaseName.DATATHROUGHPUT,function(e){new DataChannelThroughputTest(e).run()}),DataChannelThroughputTest.prototype={run:function(){Call.asyncCreateTurnConfig(this.start.bind(this),this.test.reportFatal.bind(this.test))},start:function(e){this.call=new Call(e,this.test),this.call.setIceCandidateFilter(Call.isRelay),this.senderChannel=this.call.pc1.createDataChannel(null),this.senderChannel.addEventListener("open",this.sendingStep.bind(this)),this.call.pc2.addEventListener("datachannel",this.onReceiverChannel.bind(this)),this.call.establishConnection()},onReceiverChannel:function(e){this.receiveChannel=e.channel,this.receiveChannel.addEventListener("message",this.onMessageReceived.bind(this))},sendingStep:function(){var e=new Date;this.startTime||(this.startTime=e,this.lastBitrateMeasureTime=e);for(var t=0;t!==this.maxNumberOfPacketsToSend&&!(this.senderChannel.bufferedAmount>=this.bytesToKeepBuffered);++t)this.sentPayloadBytes+=this.samplePacket.length,this.senderChannel.send(this.samplePacket);e-this.startTime>=1e3*this.testDurationSeconds?(this.test.setProgress(100),this.stopSending=!0):(this.test.setProgress((e-this.startTime)/(10*this.testDurationSeconds)),setTimeout(this.sendingStep.bind(this),1))},onMessageReceived:function(e){this.receivedPayloadBytes+=e.data.length;var t,e=new Date;1e3<=e-this.lastBitrateMeasureTime&&(t=(this.receivedPayloadBytes-this.lastReceivedPayloadBytes)/(e-this.lastBitrateMeasureTime),t=Math.round(1e3*t*8)/1e3,this.test.reportSuccess("Transmitting at "+t+" kbps."),this.lastReceivedPayloadBytes=this.receivedPayloadBytes,this.lastBitrateMeasureTime=e),this.stopSending&&this.sentPayloadBytes===this.receivedPayloadBytes&&(this.call.close(),this.call=null,t=Math.round(10*(e-this.startTime))/1e4,e=8*this.receivedPayloadBytes/1e3,this.test.reportSuccess("Total transmitted: "+e+" kilo-bits in "+t+" seconds."),this.test.done())}},addTest(testSuiteName.THROUGHPUT,testCaseName.VIDEOBANDWIDTH,function(e){new VideoBandwidthTest(e).run()}),VideoBandwidthTest.prototype={run:function(){Call.asyncCreateTurnConfig(this.start.bind(this),this.test.reportFatal.bind(this.test))},start:function(e){this.call=new Call(e,this.test),this.call.setIceCandidateFilter(Call.isRelay),this.call.disableVideoFec(),this.call.constrainVideoBitrate(this.maxVideoBitrateKbps),doGetUserMedia(this.constraints,this.gotStream.bind(this))},gotStream:function(e){this.call.pc1.addStream(e),this.call.establishConnection(),this.startTime=new Date,this.localStream=e.getVideoTracks()[0],setTimeout(this.gatherStats.bind(this),this.statStepMs)},gatherStats:function(){var e=new Date;e-this.startTime>this.durationMs?(this.test.setProgress(100),this.hangup()):(this.call.statsGatheringRunning||this.call.gatherStats(this.call.pc1,this.call.pc2,this.localStream,this.gotStats.bind(this)),this.test.setProgress(100*(e-this.startTime)/this.durationMs),setTimeout(this.gatherStats.bind(this),this.statStepMs))},gotStats:function(e,t,n,i){if("chrome"===adapter.browserDetails.browser)for(var r in e)void 0!==e[r].connection&&(this.bweStats.add(e[r].connection.timestamp,parseInt(e[r].connection.availableOutgoingBitrate)),this.rttStats.add(e[r].connection.timestamp,parseInt(1e3*e[r].connection.currentRoundTripTime)),this.videoStats[0]=e[r].video.local.frameWidth,this.videoStats[1]=e[r].video.local.frameHeight,this.nackCount=e[r].video.local.nackCount,this.packetsLost=n[r].video.remote.packetsLost,this.qpSum=n[r].video.remote.qpSum,this.pliCount=e[r].video.local.pliCount,this.packetsSent=e[r].video.local.packetsSent,this.packetsReceived=n[r].video.remote.packetsReceived,this.framesEncoded=e[r].video.local.framesEncoded,this.framesDecoded=n[r].video.remote.framesDecoded);else if("firefox"===adapter.browserDetails.browser)for(var o in e)"outbound_rtcp_video_0"===e[o].id?(this.rttStats.add(Date.parse(e[o].timestamp),parseInt(e[o].mozRtt)),this.jitter=e[o].jitter,this.packetsLost=e[o].packetsLost):"outbound_rtp_video_0"===e[o].id&&(this.videoStats[0]="Not supported on Firefox",this.videoStats[1]="Not supported on Firefox",this.bitrateMean=e[o].bitrateMean,this.bitrateStdDev=e[o].bitrateStdDev,this.framerateMean=e[o].framerateMean);else this.test.reportError("Only Firefox and Chrome getStats implementations are supported.");this.completed()},hangup:function(){this.call.pc1.getLocalStreams()[0].getTracks().forEach(function(e){e.stop()}),this.call.close(),this.call=null},completed:function(){"chrome"===adapter.browserDetails.browser?this.videoStats[0]<2&&this.videoStats[1]<2?this.test.reportError("Camera failure: "+this.videoStats[0]+"x"+this.videoStats[1]+". Cannot test bandwidth without a working  camera."):(this.test.reportSuccess("Video resolution: "+this.videoStats[0]+"x"+this.videoStats[1]),this.test.reportInfo("Send bandwidth estimate average: "+Math.round(this.bweStats.getAverage()/1e3)+" kbps"),this.test.reportInfo("Send bandwidth estimate max: "+this.bweStats.getMax()/1e3+" kbps"),this.test.reportInfo("Send bandwidth ramp-up time: "+this.bweStats.getRampUpTime()+" ms"),this.test.reportInfo("Packets sent: "+this.packetsSent),this.test.reportInfo("Packets received: "+this.packetsReceived),this.test.reportInfo("NACK count: "+this.nackCount),this.test.reportInfo("Picture loss indications: "+this.pliCount),this.test.reportInfo("Quality predictor sum: "+this.qpSum),this.test.reportInfo("Frames encoded: "+this.framesEncoded),this.test.reportInfo("Frames decoded: "+this.framesDecoded)):"firefox"===adapter.browserDetails.browser&&(0<parseInt(this.framerateMean)?this.test.reportSuccess("Frame rate mean: "+parseInt(this.framerateMean)):this.test.reportError("Frame rate mean is 0, cannot test bandwidth without a working camera."),this.test.reportInfo("Send bitrate mean: "+parseInt(this.bitrateMean)/1e3+" kbps"),this.test.reportInfo("Send bitrate standard deviation: "+parseInt(this.bitrateStdDev)/1e3+" kbps")),this.test.reportInfo("RTT average: "+this.rttStats.getAverage()+" ms"),this.test.reportInfo("RTT max: "+this.rttStats.getMax()+" ms"),this.test.reportInfo("Packets lost: "+this.packetsLost),this.test.done()}},addExplicitTest(testSuiteName.THROUGHPUT,testCaseName.NETWORKLATENCY,function(e){new WiFiPeriodicScanTest(e,Call.isNotHostCandidate).run()}),addExplicitTest(testSuiteName.THROUGHPUT,testCaseName.NETWORKLATENCYRELAY,function(e){new WiFiPeriodicScanTest(e,Call.isRelay).run()}),WiFiPeriodicScanTest.prototype={run:function(){Call.asyncCreateTurnConfig(this.start.bind(this),this.test.reportFatal.bind(this.test))},start:function(e){this.running=!0,this.call=new Call(e,this.test),this.chart=this.test.createLineChart(),this.call.setIceCandidateFilter(this.candidateFilter),this.senderChannel=this.call.pc1.createDataChannel({ordered:!1,maxRetransmits:0}),this.senderChannel.addEventListener("open",this.send.bind(this)),this.call.pc2.addEventListener("datachannel",this.onReceiverChannel.bind(this)),this.call.establishConnection(),setTimeoutWithProgressBar(this.finishTest.bind(this),this.testDurationMs)},onReceiverChannel:function(e){this.receiveChannel=e.channel,this.receiveChannel.addEventListener("message",this.receive.bind(this))},send:function(){this.running&&(this.senderChannel.send(""+Date.now()),setTimeout(this.send.bind(this),this.sendIntervalMs))},receive:function(e){var t;this.running&&(e=parseInt(e.data),t=Date.now()-e,this.recvTimeStamps.push(e),this.delays.push(t),this.chart.addDatapoint(e+t,t))},finishTest:function(){report.traceEventInstant("periodic-delay",{delays:this.delays,recvTimeStamps:this.recvTimeStamps}),this.running=!1,this.call.close(),this.call=null,this.chart.parentElement.removeChild(this.chart);var e=arrayAverage(this.delays),t=arrayMax(this.delays),n=arrayMin(this.delays);this.test.reportInfo("Average delay: "+e+" ms."),this.test.reportInfo("Min delay: "+n+" ms."),this.test.reportInfo("Max delay: "+t+" ms."),this.delays.length<.8*this.testDurationMs/this.sendIntervalMs?this.test.reportError("Not enough samples gathered. Keep the page on  the foreground while the test is running."):this.test.reportSuccess("Collected "+this.delays.length+" delay samples."),2*(n+100)<t&&this.test.reportError("There is a big difference between the min and max delay of packets. Your network appears unstable."),this.test.done()}};